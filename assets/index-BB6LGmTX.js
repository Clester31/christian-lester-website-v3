var py=a=>{throw TypeError(a)};var Wh=(a,t,e)=>t.has(a)||py("Cannot "+e);var fe=(a,t,e)=>(Wh(a,t,"read from private field"),e?e.call(a):t.get(a)),ui=(a,t,e)=>t.has(a)?py("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,e),yn=(a,t,e,i)=>(Wh(a,t,"write to private field"),i?i.call(a,e):t.set(a,e),e),hi=(a,t,e)=>(Wh(a,t,"access private method"),e);var gy=(a,t,e,i)=>({set _(r){yn(a,t,r,e)},get _(){return fe(a,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}})();function jb(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Qh={exports:{}},Zr={};var my;function z_(){if(my)return Zr;my=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var h in r)h!=="key"&&(l[h]=r[h])}else l=r;return r=l.ref,{$$typeof:a,type:i,key:c,ref:r!==void 0?r:null,props:l}}return Zr.Fragment=t,Zr.jsx=e,Zr.jsxs=e,Zr}var yy;function B_(){return yy||(yy=1,Qh.exports=z_()),Qh.exports}var V=B_(),Jh={exports:{}},Dt={};var by;function P_(){if(by)return Dt;by=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function A(R){return R===null||typeof R!="object"?null:(R=b&&R[b]||R["@@iterator"],typeof R=="function"?R:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,T={};function E(R,q,Q){this.props=R,this.context=q,this.refs=T,this.updater=Q||S}E.prototype.isReactComponent={},E.prototype.setState=function(R,q){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,q,"setState")},E.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function x(){}x.prototype=E.prototype;function C(R,q,Q){this.props=R,this.context=q,this.refs=T,this.updater=Q||S}var L=C.prototype=new x;L.constructor=C,_(L,E.prototype),L.isPureReactComponent=!0;var O=Array.isArray;function P(){}var z={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function Y(R,q,Q){var lt=Q.ref;return{$$typeof:a,type:R,key:q,ref:lt!==void 0?lt:null,props:Q}}function et(R,q){return Y(R.type,q,R.props)}function J(R){return typeof R=="object"&&R!==null&&R.$$typeof===a}function at(R){var q={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(Q){return q[Q]})}var ot=/\/+/g;function rt(R,q){return typeof R=="object"&&R!==null&&R.key!=null?at(""+R.key):q.toString(36)}function ht(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(P,P):(R.status="pending",R.then(function(q){R.status==="pending"&&(R.status="fulfilled",R.value=q)},function(q){R.status==="pending"&&(R.status="rejected",R.reason=q)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function k(R,q,Q,lt,bt){var _t=typeof R;(_t==="undefined"||_t==="boolean")&&(R=null);var mt=!1;if(R===null)mt=!0;else switch(_t){case"bigint":case"string":case"number":mt=!0;break;case"object":switch(R.$$typeof){case a:case t:mt=!0;break;case m:return mt=R._init,k(mt(R._payload),q,Q,lt,bt)}}if(mt)return bt=bt(R),mt=lt===""?"."+rt(R,0):lt,O(bt)?(Q="",mt!=null&&(Q=mt.replace(ot,"$&/")+"/"),k(bt,q,Q,"",function($t){return $t})):bt!=null&&(J(bt)&&(bt=et(bt,Q+(bt.key==null||R&&R.key===bt.key?"":(""+bt.key).replace(ot,"$&/")+"/")+mt)),q.push(bt)),1;mt=0;var Kt=lt===""?".":lt+":";if(O(R))for(var Ot=0;Ot<R.length;Ot++)lt=R[Ot],_t=Kt+rt(lt,Ot),mt+=k(lt,q,Q,_t,bt);else if(Ot=A(R),typeof Ot=="function")for(R=Ot.call(R),Ot=0;!(lt=R.next()).done;)lt=lt.value,_t=Kt+rt(lt,Ot++),mt+=k(lt,q,Q,_t,bt);else if(_t==="object"){if(typeof R.then=="function")return k(ht(R),q,Q,lt,bt);throw q=String(R),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return mt}function j(R,q,Q){if(R==null)return R;var lt=[],bt=0;return k(R,lt,"","",function(_t){return q.call(Q,_t,bt++)}),lt}function nt(R){if(R._status===-1){var q=R._result;q=q(),q.then(function(Q){(R._status===0||R._status===-1)&&(R._status=1,R._result=Q)},function(Q){(R._status===0||R._status===-1)&&(R._status=2,R._result=Q)}),R._status===-1&&(R._status=0,R._result=q)}if(R._status===1)return R._result.default;throw R._result}var vt=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},xt={map:j,forEach:function(R,q,Q){j(R,function(){q.apply(this,arguments)},Q)},count:function(R){var q=0;return j(R,function(){q++}),q},toArray:function(R){return j(R,function(q){return q})||[]},only:function(R){if(!J(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return Dt.Activity=y,Dt.Children=xt,Dt.Component=E,Dt.Fragment=e,Dt.Profiler=r,Dt.PureComponent=C,Dt.StrictMode=i,Dt.Suspense=d,Dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Dt.__COMPILER_RUNTIME={__proto__:null,c:function(R){return z.H.useMemoCache(R)}},Dt.cache=function(R){return function(){return R.apply(null,arguments)}},Dt.cacheSignal=function(){return null},Dt.cloneElement=function(R,q,Q){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var lt=_({},R.props),bt=R.key;if(q!=null)for(_t in q.key!==void 0&&(bt=""+q.key),q)!$.call(q,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&q.ref===void 0||(lt[_t]=q[_t]);var _t=arguments.length-2;if(_t===1)lt.children=Q;else if(1<_t){for(var mt=Array(_t),Kt=0;Kt<_t;Kt++)mt[Kt]=arguments[Kt+2];lt.children=mt}return Y(R.type,bt,lt)},Dt.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:l,_context:R},R},Dt.createElement=function(R,q,Q){var lt,bt={},_t=null;if(q!=null)for(lt in q.key!==void 0&&(_t=""+q.key),q)$.call(q,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(bt[lt]=q[lt]);var mt=arguments.length-2;if(mt===1)bt.children=Q;else if(1<mt){for(var Kt=Array(mt),Ot=0;Ot<mt;Ot++)Kt[Ot]=arguments[Ot+2];bt.children=Kt}if(R&&R.defaultProps)for(lt in mt=R.defaultProps,mt)bt[lt]===void 0&&(bt[lt]=mt[lt]);return Y(R,_t,bt)},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(R){return{$$typeof:h,render:R}},Dt.isValidElement=J,Dt.lazy=function(R){return{$$typeof:m,_payload:{_status:-1,_result:R},_init:nt}},Dt.memo=function(R,q){return{$$typeof:p,type:R,compare:q===void 0?null:q}},Dt.startTransition=function(R){var q=z.T,Q={};z.T=Q;try{var lt=R(),bt=z.S;bt!==null&&bt(Q,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(P,vt)}catch(_t){vt(_t)}finally{q!==null&&Q.types!==null&&(q.types=Q.types),z.T=q}},Dt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Dt.use=function(R){return z.H.use(R)},Dt.useActionState=function(R,q,Q){return z.H.useActionState(R,q,Q)},Dt.useCallback=function(R,q){return z.H.useCallback(R,q)},Dt.useContext=function(R){return z.H.useContext(R)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(R,q){return z.H.useDeferredValue(R,q)},Dt.useEffect=function(R,q){return z.H.useEffect(R,q)},Dt.useEffectEvent=function(R){return z.H.useEffectEvent(R)},Dt.useId=function(){return z.H.useId()},Dt.useImperativeHandle=function(R,q,Q){return z.H.useImperativeHandle(R,q,Q)},Dt.useInsertionEffect=function(R,q){return z.H.useInsertionEffect(R,q)},Dt.useLayoutEffect=function(R,q){return z.H.useLayoutEffect(R,q)},Dt.useMemo=function(R,q){return z.H.useMemo(R,q)},Dt.useOptimistic=function(R,q){return z.H.useOptimistic(R,q)},Dt.useReducer=function(R,q,Q){return z.H.useReducer(R,q,Q)},Dt.useRef=function(R){return z.H.useRef(R)},Dt.useState=function(R){return z.H.useState(R)},Dt.useSyncExternalStore=function(R,q,Q){return z.H.useSyncExternalStore(R,q,Q)},Dt.useTransition=function(){return z.H.useTransition()},Dt.version="19.2.0",Dt}var vy;function zd(){return vy||(vy=1,Jh.exports=P_()),Jh.exports}var ut=zd();const Dn=jb(ut);var td={exports:{}},Kr={},ed={exports:{}},nd={};var Ay;function F_(){return Ay||(Ay=1,(function(a){function t(k,j){var nt=k.length;k.push(j);t:for(;0<nt;){var vt=nt-1>>>1,xt=k[vt];if(0<r(xt,j))k[vt]=j,k[nt]=xt,nt=vt;else break t}}function e(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var j=k[0],nt=k.pop();if(nt!==j){k[0]=nt;t:for(var vt=0,xt=k.length,R=xt>>>1;vt<R;){var q=2*(vt+1)-1,Q=k[q],lt=q+1,bt=k[lt];if(0>r(Q,nt))lt<xt&&0>r(bt,Q)?(k[vt]=bt,k[lt]=nt,vt=lt):(k[vt]=Q,k[q]=nt,vt=q);else if(lt<xt&&0>r(bt,nt))k[vt]=bt,k[lt]=nt,vt=lt;else break t}}return j}function r(k,j){var nt=k.sortIndex-j.sortIndex;return nt!==0?nt:k.id-j.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;a.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();a.unstable_now=function(){return c.now()-h}}var d=[],p=[],m=1,y=null,b=3,A=!1,S=!1,_=!1,T=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function L(k){for(var j=e(p);j!==null;){if(j.callback===null)i(p);else if(j.startTime<=k)i(p),j.sortIndex=j.expirationTime,t(d,j);else break;j=e(p)}}function O(k){if(_=!1,L(k),!S)if(e(d)!==null)S=!0,P||(P=!0,at());else{var j=e(p);j!==null&&ht(O,j.startTime-k)}}var P=!1,z=-1,$=5,Y=-1;function et(){return T?!0:!(a.unstable_now()-Y<$)}function J(){if(T=!1,P){var k=a.unstable_now();Y=k;var j=!0;try{t:{S=!1,_&&(_=!1,x(z),z=-1),A=!0;var nt=b;try{e:{for(L(k),y=e(d);y!==null&&!(y.expirationTime>k&&et());){var vt=y.callback;if(typeof vt=="function"){y.callback=null,b=y.priorityLevel;var xt=vt(y.expirationTime<=k);if(k=a.unstable_now(),typeof xt=="function"){y.callback=xt,L(k),j=!0;break e}y===e(d)&&i(d),L(k)}else i(d);y=e(d)}if(y!==null)j=!0;else{var R=e(p);R!==null&&ht(O,R.startTime-k),j=!1}}break t}finally{y=null,b=nt,A=!1}j=void 0}}finally{j?at():P=!1}}}var at;if(typeof C=="function")at=function(){C(J)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,rt=ot.port2;ot.port1.onmessage=J,at=function(){rt.postMessage(null)}}else at=function(){E(J,0)};function ht(k,j){z=E(function(){k(a.unstable_now())},j)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(k){k.callback=null},a.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<k?Math.floor(1e3/k):5},a.unstable_getCurrentPriorityLevel=function(){return b},a.unstable_next=function(k){switch(b){case 1:case 2:case 3:var j=3;break;default:j=b}var nt=b;b=j;try{return k()}finally{b=nt}},a.unstable_requestPaint=function(){T=!0},a.unstable_runWithPriority=function(k,j){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var nt=b;b=k;try{return j()}finally{b=nt}},a.unstable_scheduleCallback=function(k,j,nt){var vt=a.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?vt+nt:vt):nt=vt,k){case 1:var xt=-1;break;case 2:xt=250;break;case 5:xt=1073741823;break;case 4:xt=1e4;break;default:xt=5e3}return xt=nt+xt,k={id:m++,callback:j,priorityLevel:k,startTime:nt,expirationTime:xt,sortIndex:-1},nt>vt?(k.sortIndex=nt,t(p,k),e(d)===null&&k===e(p)&&(_?(x(z),z=-1):_=!0,ht(O,nt-vt))):(k.sortIndex=xt,t(d,k),S||A||(S=!0,P||(P=!0,at()))),k},a.unstable_shouldYield=et,a.unstable_wrapCallback=function(k){var j=b;return function(){var nt=b;b=j;try{return k.apply(this,arguments)}finally{b=nt}}}})(nd)),nd}var _y;function U_(){return _y||(_y=1,ed.exports=F_()),ed.exports}var id={exports:{}},nn={};var Sy;function I_(){if(Sy)return nn;Sy=1;var a=zd();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(d,p,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:d,containerInfo:p,implementation:m}}var c=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,nn.createPortal=function(d,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(d,p,null,m)},nn.flushSync=function(d){var p=c.T,m=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=p,i.p=m,i.d.f()}},nn.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(d,p))},nn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},nn.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var m=p.as,y=h(m,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?i.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):m==="script"&&i.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},nn.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=h(p.as,p.crossOrigin);i.d.M(d,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(d)},nn.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,y=h(m,p.crossOrigin);i.d.L(d,m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},nn.preloadModule=function(d,p){if(typeof d=="string")if(p){var m=h(p.as,p.crossOrigin);i.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(d)},nn.requestFormReset=function(d){i.d.r(d)},nn.unstable_batchedUpdates=function(d,p){return d(p)},nn.useFormState=function(d,p,m){return c.H.useFormState(d,p,m)},nn.useFormStatus=function(){return c.H.useHostTransitionStatus()},nn.version="19.2.0",nn}var wy;function j_(){if(wy)return id.exports;wy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),id.exports=I_(),id.exports}var Ey;function H_(){if(Ey)return Kr;Ey=1;var a=U_(),t=zd(),e=j_();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(i(188))}function p(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return d(f),n;if(g===u)return d(f),s;g=g.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=g;else{for(var v=!1,w=f.child;w;){if(w===o){v=!0,o=f,u=g;break}if(w===u){v=!0,u=f,o=g;break}w=w.sibling}if(!v){for(w=g.child;w;){if(w===o){v=!0,o=g,u=f;break}if(w===u){v=!0,u=g,o=f;break}w=w.sibling}if(!v)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function m(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=m(n),s!==null)return s;n=n.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),C=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),et=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function at(n){return n===null||typeof n!="object"?null:(n=J&&n[J]||n["@@iterator"],typeof n=="function"?n:null)}var ot=Symbol.for("react.client.reference");function rt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===ot?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case _:return"Fragment";case E:return"Profiler";case T:return"StrictMode";case O:return"Suspense";case P:return"SuspenseList";case Y:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case S:return"Portal";case C:return n.displayName||"Context";case x:return(n._context.displayName||"Context")+".Consumer";case L:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case z:return s=n.displayName||null,s!==null?s:rt(n.type)||"Memo";case $:s=n._payload,n=n._init;try{return rt(n(s))}catch{}}return null}var ht=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt={pending:!1,data:null,method:null,action:null},vt=[],xt=-1;function R(n){return{current:n}}function q(n){0>xt||(n.current=vt[xt],vt[xt]=null,xt--)}function Q(n,s){xt++,vt[xt]=n.current,n.current=s}var lt=R(null),bt=R(null),_t=R(null),mt=R(null);function Kt(n,s){switch(Q(_t,s),Q(bt,n),Q(lt,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Pm(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Pm(s),n=Fm(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}q(lt),Q(lt,n)}function Ot(){q(lt),q(bt),q(_t)}function $t(n){n.memoizedState!==null&&Q(mt,n);var s=lt.current,o=Fm(s,n.type);s!==o&&(Q(bt,n),Q(lt,o))}function Je(n){bt.current===n&&(q(lt),q(bt)),mt.current===n&&(q(mt),qr._currentValue=nt)}var tn,Ut;function Vt(n){if(tn===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);tn=s&&s[1]||"",Ut=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tn+n+Ut}var oe=!1;function he(n,s){if(!n||oe)return"";oe=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(G){var H=G}Reflect.construct(n,[],W)}else{try{W.call()}catch(G){H=G}n.call(W.prototype)}}else{try{throw Error()}catch(G){H=G}(W=n())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),v=g[0],w=g[1];if(v&&w){var D=v.split(`
`),I=w.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<I.length&&!I[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===I.length)for(u=D.length-1,f=I.length-1;1<=u&&0<=f&&D[u]!==I[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==I[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==I[f]){var Z=`
`+D[u].replace(" at new "," at ");return n.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",n.displayName)),Z}while(1<=u&&0<=f);break}}}finally{oe=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Vt(o):""}function ni(n,s){switch(n.tag){case 26:case 27:case 5:return Vt(n.type);case 16:return Vt("Lazy");case 13:return n.child!==s&&s!==null?Vt("Suspense Fallback"):Vt("Suspense");case 19:return Vt("SuspenseList");case 0:case 15:return he(n.type,!1);case 11:return he(n.type.render,!1);case 1:return he(n.type,!0);case 31:return Vt("Activity");default:return""}}function Ai(n){try{var s="",o=null;do s+=ni(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var ii=Object.prototype.hasOwnProperty,M=a.unstable_scheduleCallback,F=a.unstable_cancelCallback,X=a.unstable_shouldYield,ct=a.unstable_requestPaint,it=a.unstable_now,st=a.unstable_getCurrentPriorityLevel,At=a.unstable_ImmediatePriority,Lt=a.unstable_UserBlockingPriority,Bt=a.unstable_NormalPriority,me=a.unstable_LowPriority,Yn=a.unstable_IdlePriority,si=a.log,Pc=a.unstable_setDisableYieldValue,_i=null,Ge=null;function ai(n){if(typeof si=="function"&&Pc(n),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(_i,n)}catch{}}var en=Math.clz32?Math.clz32:_0,Fc=Math.log,Ro=Math.LN2;function _0(n){return n>>>=0,n===0?32:31-(Fc(n)/Ro|0)|0}var ko=256,Oo=262144,Lo=4194304;function As(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function No(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var w=u&134217727;return w!==0?(u=w&~g,u!==0?f=As(u):(v&=w,v!==0?f=As(v):o||(o=w&~n,o!==0&&(f=As(o))))):(w=u&~g,w!==0?f=As(w):v!==0?f=As(v):o||(o=u&~n,o!==0&&(f=As(o)))),f===0?0:s!==0&&s!==f&&(s&g)===0&&(g=f&-f,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:f}function sr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function S0(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bf(){var n=Lo;return Lo<<=1,(Lo&62914560)===0&&(Lo=4194304),n}function Uc(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function ar(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function w0(n,s,o,u,f,g){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var w=n.entanglements,D=n.expirationTimes,I=n.hiddenUpdates;for(o=v&~o;0<o;){var Z=31-en(o),W=1<<Z;w[Z]=0,D[Z]=-1;var H=I[Z];if(H!==null)for(I[Z]=null,Z=0;Z<H.length;Z++){var G=H[Z];G!==null&&(G.lane&=-536870913)}o&=~W}u!==0&&vf(n,u,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(v&~s))}function vf(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-en(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Af(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-en(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function _f(n,s){var o=s&-s;return o=(o&42)!==0?1:Ic(o),(o&(n.suspendedLanes|s))!==0?0:o}function Ic(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function jc(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Sf(){var n=j.p;return n!==0?n:(n=window.event,n===void 0?32:oy(n.type))}function wf(n,s){var o=j.p;try{return j.p=n,s()}finally{j.p=o}}var qi=Math.random().toString(36).slice(2),qe="__reactFiber$"+qi,un="__reactProps$"+qi,ta="__reactContainer$"+qi,Hc="__reactEvents$"+qi,E0="__reactListeners$"+qi,T0="__reactHandles$"+qi,Ef="__reactResources$"+qi,rr="__reactMarker$"+qi;function Vc(n){delete n[qe],delete n[un],delete n[Hc],delete n[E0],delete n[T0]}function ea(n){var s=n[qe];if(s)return s;for(var o=n.parentNode;o;){if(s=o[ta]||o[qe]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=qm(n);n!==null;){if(o=n[qe])return o;n=qm(n)}return s}n=o,o=n.parentNode}return null}function na(n){if(n=n[qe]||n[ta]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function or(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function ia(n){var s=n[Ef];return s||(s=n[Ef]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Pe(n){n[rr]=!0}var Tf=new Set,xf={};function _s(n,s){sa(n,s),sa(n+"Capture",s)}function sa(n,s){for(xf[n]=s,n=0;n<s.length;n++)Tf.add(s[n])}var x0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cf={},Df={};function C0(n){return ii.call(Df,n)?!0:ii.call(Cf,n)?!1:x0.test(n)?Df[n]=!0:(Cf[n]=!0,!1)}function zo(n,s,o){if(C0(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function Bo(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Si(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function Nn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Mf(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function D0(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,g=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,g.call(this,v)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Gc(n){if(!n._valueTracker){var s=Mf(n)?"checked":"value";n._valueTracker=D0(n,s,""+n[s])}}function Rf(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=Mf(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Po(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var M0=/[\n"\\]/g;function zn(n){return n.replace(M0,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function qc(n,s,o,u,f,g,v,w){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),s!=null?v==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Nn(s)):n.value!==""+Nn(s)&&(n.value=""+Nn(s)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),s!=null?$c(n,v,Nn(s)):o!=null?$c(n,v,Nn(o)):u!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+Nn(w):n.removeAttribute("name")}function kf(n,s,o,u,f,g,v,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){Gc(n);return}o=o!=null?""+Nn(o):"",s=s!=null?""+Nn(s):o,w||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=w?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),Gc(n)}function $c(n,s,o){s==="number"&&Po(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function aa(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Nn(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Of(n,s,o){if(s!=null&&(s=""+Nn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Nn(o):""}function Lf(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(ht(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Nn(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Gc(n)}function ra(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var R0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nf(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||R0.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function zf(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&Nf(n,f,u)}else for(var g in s)s.hasOwnProperty(g)&&Nf(n,g,s[g])}function Xc(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var k0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),O0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fo(n){return O0.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function wi(){}var Yc=null;function Zc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var oa=null,la=null;function Bf(n){var s=na(n);if(s&&(n=s.stateNode)){var o=n[un]||null;t:switch(n=s.stateNode,s.type){case"input":if(qc(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+zn(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[un]||null;if(!f)throw Error(i(90));qc(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&Rf(u)}break t;case"textarea":Of(n,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&aa(n,!!o.multiple,s,!1)}}}var Kc=!1;function Pf(n,s,o){if(Kc)return n(s,o);Kc=!0;try{var u=n(s);return u}finally{if(Kc=!1,(oa!==null||la!==null)&&(Tl(),oa&&(s=oa,n=la,la=oa=null,Bf(s),n)))for(s=0;s<n.length;s++)Bf(n[s])}}function lr(n,s){var o=n.stateNode;if(o===null)return null;var u=o[un]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wc=!1;if(Ei)try{var cr={};Object.defineProperty(cr,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",cr,cr),window.removeEventListener("test",cr,cr)}catch{Wc=!1}var $i=null,Qc=null,Uo=null;function Ff(){if(Uo)return Uo;var n,s=Qc,o=s.length,u,f="value"in $i?$i.value:$i.textContent,g=f.length;for(n=0;n<o&&s[n]===f[n];n++);var v=o-n;for(u=1;u<=v&&s[o-u]===f[g-u];u++);return Uo=f.slice(n,1<u?1-u:void 0)}function Io(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function jo(){return!0}function Uf(){return!1}function hn(n){function s(o,u,f,g,v){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(o=n[w],this[w]=o?o(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?jo:Uf,this.isPropagationStopped=Uf,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=jo)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=jo)},persist:function(){},isPersistent:jo}),s}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ho=hn(Ss),ur=y({},Ss,{view:0,detail:0}),L0=hn(ur),Jc,tu,hr,Vo=y({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hr&&(hr&&n.type==="mousemove"?(Jc=n.screenX-hr.screenX,tu=n.screenY-hr.screenY):tu=Jc=0,hr=n),Jc)},movementY:function(n){return"movementY"in n?n.movementY:tu}}),If=hn(Vo),N0=y({},Vo,{dataTransfer:0}),z0=hn(N0),B0=y({},ur,{relatedTarget:0}),eu=hn(B0),P0=y({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),F0=hn(P0),U0=y({},Ss,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),I0=hn(U0),j0=y({},Ss,{data:0}),jf=hn(j0),H0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q0(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=G0[n])?!!s[n]:!1}function nu(){return q0}var $0=y({},ur,{key:function(n){if(n.key){var s=H0[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Io(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?V0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nu,charCode:function(n){return n.type==="keypress"?Io(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Io(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),X0=hn($0),Y0=y({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hf=hn(Y0),Z0=y({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nu}),K0=hn(Z0),W0=y({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q0=hn(W0),J0=y({},Vo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),tA=hn(J0),eA=y({},Ss,{newState:0,oldState:0}),nA=hn(eA),iA=[9,13,27,32],iu=Ei&&"CompositionEvent"in window,dr=null;Ei&&"documentMode"in document&&(dr=document.documentMode);var sA=Ei&&"TextEvent"in window&&!dr,Vf=Ei&&(!iu||dr&&8<dr&&11>=dr),Gf=" ",qf=!1;function $f(n,s){switch(n){case"keyup":return iA.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ca=!1;function aA(n,s){switch(n){case"compositionend":return Xf(s);case"keypress":return s.which!==32?null:(qf=!0,Gf);case"textInput":return n=s.data,n===Gf&&qf?null:n;default:return null}}function rA(n,s){if(ca)return n==="compositionend"||!iu&&$f(n,s)?(n=Ff(),Uo=Qc=$i=null,ca=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Vf&&s.locale!=="ko"?null:s.data;default:return null}}var oA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yf(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!oA[n.type]:s==="textarea"}function Zf(n,s,o,u){oa?la?la.push(u):la=[u]:oa=u,s=Ol(s,"onChange"),0<s.length&&(o=new Ho("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var fr=null,pr=null;function lA(n){km(n,0)}function Go(n){var s=or(n);if(Rf(s))return n}function Kf(n,s){if(n==="change")return s}var Wf=!1;if(Ei){var su;if(Ei){var au="oninput"in document;if(!au){var Qf=document.createElement("div");Qf.setAttribute("oninput","return;"),au=typeof Qf.oninput=="function"}su=au}else su=!1;Wf=su&&(!document.documentMode||9<document.documentMode)}function Jf(){fr&&(fr.detachEvent("onpropertychange",tp),pr=fr=null)}function tp(n){if(n.propertyName==="value"&&Go(pr)){var s=[];Zf(s,pr,n,Zc(n)),Pf(lA,s)}}function cA(n,s,o){n==="focusin"?(Jf(),fr=s,pr=o,fr.attachEvent("onpropertychange",tp)):n==="focusout"&&Jf()}function uA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Go(pr)}function hA(n,s){if(n==="click")return Go(s)}function dA(n,s){if(n==="input"||n==="change")return Go(s)}function fA(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var _n=typeof Object.is=="function"?Object.is:fA;function gr(n,s){if(_n(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!ii.call(s,f)||!_n(n[f],s[f]))return!1}return!0}function ep(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function np(n,s){var o=ep(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=ep(o)}}function ip(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?ip(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function sp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Po(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Po(n.document)}return s}function ru(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var pA=Ei&&"documentMode"in document&&11>=document.documentMode,ua=null,ou=null,mr=null,lu=!1;function ap(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;lu||ua==null||ua!==Po(u)||(u=ua,"selectionStart"in u&&ru(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),mr&&gr(mr,u)||(mr=u,u=Ol(ou,"onSelect"),0<u.length&&(s=new Ho("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=ua)))}function ws(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var ha={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionrun:ws("Transition","TransitionRun"),transitionstart:ws("Transition","TransitionStart"),transitioncancel:ws("Transition","TransitionCancel"),transitionend:ws("Transition","TransitionEnd")},cu={},rp={};Ei&&(rp=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function Es(n){if(cu[n])return cu[n];if(!ha[n])return n;var s=ha[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in rp)return cu[n]=s[o];return n}var op=Es("animationend"),lp=Es("animationiteration"),cp=Es("animationstart"),gA=Es("transitionrun"),mA=Es("transitionstart"),yA=Es("transitioncancel"),up=Es("transitionend"),hp=new Map,uu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");uu.push("scrollEnd");function Zn(n,s){hp.set(n,s),_s(s,[n])}var qo=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Bn=[],da=0,hu=0;function $o(){for(var n=da,s=hu=da=0;s<n;){var o=Bn[s];Bn[s++]=null;var u=Bn[s];Bn[s++]=null;var f=Bn[s];Bn[s++]=null;var g=Bn[s];if(Bn[s++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}g!==0&&dp(o,f,g)}}function Xo(n,s,o,u){Bn[da++]=n,Bn[da++]=s,Bn[da++]=o,Bn[da++]=u,hu|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function du(n,s,o,u){return Xo(n,s,o,u),Yo(n)}function Ts(n,s){return Xo(n,null,null,s),Yo(n)}function dp(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&s!==null&&(f=31-en(o),n=g.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),g):null}function Yo(n){if(50<Fr)throw Fr=0,_h=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var fa={};function bA(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(n,s,o,u){return new bA(n,s,o,u)}function fu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ti(n,s){var o=n.alternate;return o===null?(o=Sn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function fp(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Zo(n,s,o,u,f,g){var v=0;if(u=n,typeof n=="function")fu(n)&&(v=1);else if(typeof n=="string")v=w_(n,o,lt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case Y:return n=Sn(31,o,s,f),n.elementType=Y,n.lanes=g,n;case _:return xs(o.children,f,g,s);case T:v=8,f|=24;break;case E:return n=Sn(12,o,s,f|2),n.elementType=E,n.lanes=g,n;case O:return n=Sn(13,o,s,f),n.elementType=O,n.lanes=g,n;case P:return n=Sn(19,o,s,f),n.elementType=P,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case C:v=10;break t;case x:v=9;break t;case L:v=11;break t;case z:v=14;break t;case $:v=16,u=null;break t}v=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=Sn(v,o,s,f),s.elementType=n,s.type=u,s.lanes=g,s}function xs(n,s,o,u){return n=Sn(7,n,u,s),n.lanes=o,n}function pu(n,s,o){return n=Sn(6,n,null,s),n.lanes=o,n}function pp(n){var s=Sn(18,null,null,0);return s.stateNode=n,s}function gu(n,s,o){return s=Sn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var gp=new WeakMap;function Pn(n,s){if(typeof n=="object"&&n!==null){var o=gp.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Ai(s)},gp.set(n,s),s)}return{value:n,source:s,stack:Ai(s)}}var pa=[],ga=0,Ko=null,yr=0,Fn=[],Un=0,Xi=null,ri=1,oi="";function xi(n,s){pa[ga++]=yr,pa[ga++]=Ko,Ko=n,yr=s}function mp(n,s,o){Fn[Un++]=ri,Fn[Un++]=oi,Fn[Un++]=Xi,Xi=n;var u=ri;n=oi;var f=32-en(u)-1;u&=~(1<<f),o+=1;var g=32-en(s)+f;if(30<g){var v=f-f%5;g=(u&(1<<v)-1).toString(32),u>>=v,f-=v,ri=1<<32-en(s)+f|o<<f|u,oi=g+n}else ri=1<<g|o<<f|u,oi=n}function mu(n){n.return!==null&&(xi(n,1),mp(n,1,0))}function yu(n){for(;n===Ko;)Ko=pa[--ga],pa[ga]=null,yr=pa[--ga],pa[ga]=null;for(;n===Xi;)Xi=Fn[--Un],Fn[Un]=null,oi=Fn[--Un],Fn[Un]=null,ri=Fn[--Un],Fn[Un]=null}function yp(n,s){Fn[Un++]=ri,Fn[Un++]=oi,Fn[Un++]=Xi,ri=s.id,oi=s.overflow,Xi=n}var $e=null,ce=null,Gt=!1,Yi=null,In=!1,bu=Error(i(519));function Zi(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw br(Pn(s,n)),bu}function bp(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[qe]=n,s[un]=u,o){case"dialog":Ft("cancel",s),Ft("close",s);break;case"iframe":case"object":case"embed":Ft("load",s);break;case"video":case"audio":for(o=0;o<Ir.length;o++)Ft(Ir[o],s);break;case"source":Ft("error",s);break;case"img":case"image":case"link":Ft("error",s),Ft("load",s);break;case"details":Ft("toggle",s);break;case"input":Ft("invalid",s),kf(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ft("invalid",s);break;case"textarea":Ft("invalid",s),Lf(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||zm(s.textContent,o)?(u.popover!=null&&(Ft("beforetoggle",s),Ft("toggle",s)),u.onScroll!=null&&Ft("scroll",s),u.onScrollEnd!=null&&Ft("scrollend",s),u.onClick!=null&&(s.onclick=wi),s=!0):s=!1,s||Zi(n,!0)}function vp(n){for($e=n.return;$e;)switch($e.tag){case 5:case 31:case 13:In=!1;return;case 27:case 3:In=!0;return;default:$e=$e.return}}function ma(n){if(n!==$e)return!1;if(!Gt)return vp(n),Gt=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Bh(n.type,n.memoizedProps)),o=!o),o&&ce&&Zi(n),vp(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ce=Gm(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ce=Gm(n)}else s===27?(s=ce,cs(n.type)?(n=jh,jh=null,ce=n):ce=s):ce=$e?Hn(n.stateNode.nextSibling):null;return!0}function Cs(){ce=$e=null,Gt=!1}function vu(){var n=Yi;return n!==null&&(gn===null?gn=n:gn.push.apply(gn,n),Yi=null),n}function br(n){Yi===null?Yi=[n]:Yi.push(n)}var Au=R(null),Ds=null,Ci=null;function Ki(n,s,o){Q(Au,s._currentValue),s._currentValue=o}function Di(n){n._currentValue=Au.current,q(Au)}function _u(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Su(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var v=f.child;g=g.firstContext;t:for(;g!==null;){var w=g;g=f;for(var D=0;D<s.length;D++)if(w.context===s[D]){g.lanes|=o,w=g.alternate,w!==null&&(w.lanes|=o),_u(g.return,o,n),u||(v=null);break t}g=w.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(i(341));v.lanes|=o,g=v.alternate,g!==null&&(g.lanes|=o),_u(v,o,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function ya(n,s,o,u){n=null;for(var f=s,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var w=f.type;_n(f.pendingProps.value,v.value)||(n!==null?n.push(w):n=[w])}}else if(f===mt.current){if(v=f.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(qr):n=[qr])}f=f.return}n!==null&&Su(s,n,o,u),s.flags|=262144}function Wo(n){for(n=n.firstContext;n!==null;){if(!_n(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ms(n){Ds=n,Ci=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Xe(n){return Ap(Ds,n)}function Qo(n,s){return Ds===null&&Ms(n),Ap(n,s)}function Ap(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Ci===null){if(n===null)throw Error(i(308));Ci=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Ci=Ci.next=s;return o}var vA=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},AA=a.unstable_scheduleCallback,_A=a.unstable_NormalPriority,De={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wu(){return{controller:new vA,data:new Map,refCount:0}}function vr(n){n.refCount--,n.refCount===0&&AA(_A,function(){n.controller.abort()})}var Ar=null,Eu=0,ba=0,va=null;function SA(n,s){if(Ar===null){var o=Ar=[];Eu=0,ba=Ch(),va={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Eu++,s.then(_p,_p),s}function _p(){if(--Eu===0&&Ar!==null){va!==null&&(va.status="fulfilled");var n=Ar;Ar=null,ba=0,va=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function wA(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Sp=k.S;k.S=function(n,s){am=it(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&SA(n,s),Sp!==null&&Sp(n,s)};var Rs=R(null);function Tu(){var n=Rs.current;return n!==null?n:ie.pooledCache}function Jo(n,s){s===null?Q(Rs,Rs.current):Q(Rs,s.pool)}function wp(){var n=Tu();return n===null?null:{parent:De._currentValue,pool:n}}var Aa=Error(i(460)),xu=Error(i(474)),tl=Error(i(542)),el={then:function(){}};function Ep(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Tp(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(wi,wi),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Cp(n),n;default:if(typeof s.status=="string")s.then(wi,wi);else{if(n=ie,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Cp(n),n}throw Os=s,Aa}}function ks(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Os=o,Aa):o}}var Os=null;function xp(){if(Os===null)throw Error(i(459));var n=Os;return Os=null,n}function Cp(n){if(n===Aa||n===tl)throw Error(i(483))}var _a=null,_r=0;function nl(n){var s=_r;return _r+=1,_a===null&&(_a=[]),Tp(_a,n,s)}function Sr(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function il(n,s){throw s.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Dp(n){function s(B,N){if(n){var U=B.deletions;U===null?(B.deletions=[N],B.flags|=16):U.push(N)}}function o(B,N){if(!n)return null;for(;N!==null;)s(B,N),N=N.sibling;return null}function u(B){for(var N=new Map;B!==null;)B.key!==null?N.set(B.key,B):N.set(B.index,B),B=B.sibling;return N}function f(B,N){return B=Ti(B,N),B.index=0,B.sibling=null,B}function g(B,N,U){return B.index=U,n?(U=B.alternate,U!==null?(U=U.index,U<N?(B.flags|=67108866,N):U):(B.flags|=67108866,N)):(B.flags|=1048576,N)}function v(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function w(B,N,U,K){return N===null||N.tag!==6?(N=pu(U,B.mode,K),N.return=B,N):(N=f(N,U),N.return=B,N)}function D(B,N,U,K){var St=U.type;return St===_?Z(B,N,U.props.children,K,U.key):N!==null&&(N.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===$&&ks(St)===N.type)?(N=f(N,U.props),Sr(N,U),N.return=B,N):(N=Zo(U.type,U.key,U.props,null,B.mode,K),Sr(N,U),N.return=B,N)}function I(B,N,U,K){return N===null||N.tag!==4||N.stateNode.containerInfo!==U.containerInfo||N.stateNode.implementation!==U.implementation?(N=gu(U,B.mode,K),N.return=B,N):(N=f(N,U.children||[]),N.return=B,N)}function Z(B,N,U,K,St){return N===null||N.tag!==7?(N=xs(U,B.mode,K,St),N.return=B,N):(N=f(N,U),N.return=B,N)}function W(B,N,U){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=pu(""+N,B.mode,U),N.return=B,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case A:return U=Zo(N.type,N.key,N.props,null,B.mode,U),Sr(U,N),U.return=B,U;case S:return N=gu(N,B.mode,U),N.return=B,N;case $:return N=ks(N),W(B,N,U)}if(ht(N)||at(N))return N=xs(N,B.mode,U,null),N.return=B,N;if(typeof N.then=="function")return W(B,nl(N),U);if(N.$$typeof===C)return W(B,Qo(B,N),U);il(B,N)}return null}function H(B,N,U,K){var St=N!==null?N.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return St!==null?null:w(B,N,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return U.key===St?D(B,N,U,K):null;case S:return U.key===St?I(B,N,U,K):null;case $:return U=ks(U),H(B,N,U,K)}if(ht(U)||at(U))return St!==null?null:Z(B,N,U,K,null);if(typeof U.then=="function")return H(B,N,nl(U),K);if(U.$$typeof===C)return H(B,N,Qo(B,U),K);il(B,U)}return null}function G(B,N,U,K,St){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return B=B.get(U)||null,w(N,B,""+K,St);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case A:return B=B.get(K.key===null?U:K.key)||null,D(N,B,K,St);case S:return B=B.get(K.key===null?U:K.key)||null,I(N,B,K,St);case $:return K=ks(K),G(B,N,U,K,St)}if(ht(K)||at(K))return B=B.get(U)||null,Z(N,B,K,St,null);if(typeof K.then=="function")return G(B,N,U,nl(K),St);if(K.$$typeof===C)return G(B,N,U,Qo(N,K),St);il(N,K)}return null}function pt(B,N,U,K){for(var St=null,Xt=null,yt=N,Nt=N=0,jt=null;yt!==null&&Nt<U.length;Nt++){yt.index>Nt?(jt=yt,yt=null):jt=yt.sibling;var Yt=H(B,yt,U[Nt],K);if(Yt===null){yt===null&&(yt=jt);break}n&&yt&&Yt.alternate===null&&s(B,yt),N=g(Yt,N,Nt),Xt===null?St=Yt:Xt.sibling=Yt,Xt=Yt,yt=jt}if(Nt===U.length)return o(B,yt),Gt&&xi(B,Nt),St;if(yt===null){for(;Nt<U.length;Nt++)yt=W(B,U[Nt],K),yt!==null&&(N=g(yt,N,Nt),Xt===null?St=yt:Xt.sibling=yt,Xt=yt);return Gt&&xi(B,Nt),St}for(yt=u(yt);Nt<U.length;Nt++)jt=G(yt,B,Nt,U[Nt],K),jt!==null&&(n&&jt.alternate!==null&&yt.delete(jt.key===null?Nt:jt.key),N=g(jt,N,Nt),Xt===null?St=jt:Xt.sibling=jt,Xt=jt);return n&&yt.forEach(function(ps){return s(B,ps)}),Gt&&xi(B,Nt),St}function Et(B,N,U,K){if(U==null)throw Error(i(151));for(var St=null,Xt=null,yt=N,Nt=N=0,jt=null,Yt=U.next();yt!==null&&!Yt.done;Nt++,Yt=U.next()){yt.index>Nt?(jt=yt,yt=null):jt=yt.sibling;var ps=H(B,yt,Yt.value,K);if(ps===null){yt===null&&(yt=jt);break}n&&yt&&ps.alternate===null&&s(B,yt),N=g(ps,N,Nt),Xt===null?St=ps:Xt.sibling=ps,Xt=ps,yt=jt}if(Yt.done)return o(B,yt),Gt&&xi(B,Nt),St;if(yt===null){for(;!Yt.done;Nt++,Yt=U.next())Yt=W(B,Yt.value,K),Yt!==null&&(N=g(Yt,N,Nt),Xt===null?St=Yt:Xt.sibling=Yt,Xt=Yt);return Gt&&xi(B,Nt),St}for(yt=u(yt);!Yt.done;Nt++,Yt=U.next())Yt=G(yt,B,Nt,Yt.value,K),Yt!==null&&(n&&Yt.alternate!==null&&yt.delete(Yt.key===null?Nt:Yt.key),N=g(Yt,N,Nt),Xt===null?St=Yt:Xt.sibling=Yt,Xt=Yt);return n&&yt.forEach(function(N_){return s(B,N_)}),Gt&&xi(B,Nt),St}function ee(B,N,U,K){if(typeof U=="object"&&U!==null&&U.type===_&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case A:t:{for(var St=U.key;N!==null;){if(N.key===St){if(St=U.type,St===_){if(N.tag===7){o(B,N.sibling),K=f(N,U.props.children),K.return=B,B=K;break t}}else if(N.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===$&&ks(St)===N.type){o(B,N.sibling),K=f(N,U.props),Sr(K,U),K.return=B,B=K;break t}o(B,N);break}else s(B,N);N=N.sibling}U.type===_?(K=xs(U.props.children,B.mode,K,U.key),K.return=B,B=K):(K=Zo(U.type,U.key,U.props,null,B.mode,K),Sr(K,U),K.return=B,B=K)}return v(B);case S:t:{for(St=U.key;N!==null;){if(N.key===St)if(N.tag===4&&N.stateNode.containerInfo===U.containerInfo&&N.stateNode.implementation===U.implementation){o(B,N.sibling),K=f(N,U.children||[]),K.return=B,B=K;break t}else{o(B,N);break}else s(B,N);N=N.sibling}K=gu(U,B.mode,K),K.return=B,B=K}return v(B);case $:return U=ks(U),ee(B,N,U,K)}if(ht(U))return pt(B,N,U,K);if(at(U)){if(St=at(U),typeof St!="function")throw Error(i(150));return U=St.call(U),Et(B,N,U,K)}if(typeof U.then=="function")return ee(B,N,nl(U),K);if(U.$$typeof===C)return ee(B,N,Qo(B,U),K);il(B,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,N!==null&&N.tag===6?(o(B,N.sibling),K=f(N,U),K.return=B,B=K):(o(B,N),K=pu(U,B.mode,K),K.return=B,B=K),v(B)):o(B,N)}return function(B,N,U,K){try{_r=0;var St=ee(B,N,U,K);return _a=null,St}catch(yt){if(yt===Aa||yt===tl)throw yt;var Xt=Sn(29,yt,null,B.mode);return Xt.lanes=K,Xt.return=B,Xt}finally{}}}var Ls=Dp(!0),Mp=Dp(!1),Wi=!1;function Cu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Du(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Qi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ji(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Zt&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Yo(n),dp(n,null,o),s}return Xo(n,u,s,o),Yo(n)}function wr(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Af(n,o)}}function Mu(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=v:g=g.next=v,o=o.next}while(o!==null);g===null?f=g=s:g=g.next=s}else f=g=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Ru=!1;function Er(){if(Ru){var n=va;if(n!==null)throw n}}function Tr(n,s,o,u){Ru=!1;var f=n.updateQueue;Wi=!1;var g=f.firstBaseUpdate,v=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var D=w,I=D.next;D.next=null,v===null?g=I:v.next=I,v=D;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,w=Z.lastBaseUpdate,w!==v&&(w===null?Z.firstBaseUpdate=I:w.next=I,Z.lastBaseUpdate=D))}if(g!==null){var W=f.baseState;v=0,Z=I=D=null,w=g;do{var H=w.lane&-536870913,G=H!==w.lane;if(G?(It&H)===H:(u&H)===H){H!==0&&H===ba&&(Ru=!0),Z!==null&&(Z=Z.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});t:{var pt=n,Et=w;H=s;var ee=o;switch(Et.tag){case 1:if(pt=Et.payload,typeof pt=="function"){W=pt.call(ee,W,H);break t}W=pt;break t;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=Et.payload,H=typeof pt=="function"?pt.call(ee,W,H):pt,H==null)break t;W=y({},W,H);break t;case 2:Wi=!0}}H=w.callback,H!==null&&(n.flags|=64,G&&(n.flags|=8192),G=f.callbacks,G===null?f.callbacks=[H]:G.push(H))}else G={lane:H,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Z===null?(I=Z=G,D=W):Z=Z.next=G,v|=H;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;G=w,w=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);Z===null&&(D=W),f.baseState=D,f.firstBaseUpdate=I,f.lastBaseUpdate=Z,g===null&&(f.shared.lanes=0),ss|=v,n.lanes=v,n.memoizedState=W}}function Rp(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function kp(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Rp(o[n],s)}var Sa=R(null),sl=R(0);function Op(n,s){n=Pi,Q(sl,n),Q(Sa,s),Pi=n|s.baseLanes}function ku(){Q(sl,Pi),Q(Sa,Sa.current)}function Ou(){Pi=sl.current,q(Sa),q(sl)}var wn=R(null),jn=null;function ts(n){var s=n.alternate;Q(we,we.current&1),Q(wn,n),jn===null&&(s===null||Sa.current!==null||s.memoizedState!==null)&&(jn=n)}function Lu(n){Q(we,we.current),Q(wn,n),jn===null&&(jn=n)}function Lp(n){n.tag===22?(Q(we,we.current),Q(wn,n),jn===null&&(jn=n)):es()}function es(){Q(we,we.current),Q(wn,wn.current)}function En(n){q(wn),jn===n&&(jn=null),q(we)}var we=R(0);function al(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Uh(o)||Ih(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Mi=0,kt=null,Jt=null,Me=null,rl=!1,wa=!1,Ns=!1,ol=0,xr=0,Ea=null,EA=0;function _e(){throw Error(i(321))}function Nu(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!_n(n[o],s[o]))return!1;return!0}function zu(n,s,o,u,f,g){return Mi=g,kt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,k.H=n===null||n.memoizedState===null?mg:Ku,Ns=!1,g=o(u,f),Ns=!1,wa&&(g=zp(s,o,u,f)),Np(n),g}function Np(n){k.H=Mr;var s=Jt!==null&&Jt.next!==null;if(Mi=0,Me=Jt=kt=null,rl=!1,xr=0,Ea=null,s)throw Error(i(300));n===null||Re||(n=n.dependencies,n!==null&&Wo(n)&&(Re=!0))}function zp(n,s,o,u){kt=n;var f=0;do{if(wa&&(Ea=null),xr=0,wa=!1,25<=f)throw Error(i(301));if(f+=1,Me=Jt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}k.H=yg,g=s(o,u)}while(wa);return g}function TA(){var n=k.H,s=n.useState()[0];return s=typeof s.then=="function"?Cr(s):s,n=n.useState()[0],(Jt!==null?Jt.memoizedState:null)!==n&&(kt.flags|=1024),s}function Bu(){var n=ol!==0;return ol=0,n}function Pu(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Fu(n){if(rl){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}rl=!1}Mi=0,Me=Jt=kt=null,wa=!1,xr=ol=0,Ea=null}function rn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Me===null?kt.memoizedState=Me=n:Me=Me.next=n,Me}function Ee(){if(Jt===null){var n=kt.alternate;n=n!==null?n.memoizedState:null}else n=Jt.next;var s=Me===null?kt.memoizedState:Me.next;if(s!==null)Me=s,Jt=n;else{if(n===null)throw kt.alternate===null?Error(i(467)):Error(i(310));Jt=n,n={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},Me===null?kt.memoizedState=Me=n:Me=Me.next=n}return Me}function ll(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cr(n){var s=xr;return xr+=1,Ea===null&&(Ea=[]),n=Tp(Ea,n,s),s=kt,(Me===null?s.memoizedState:Me.next)===null&&(s=s.alternate,k.H=s===null||s.memoizedState===null?mg:Ku),n}function cl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Cr(n);if(n.$$typeof===C)return Xe(n)}throw Error(i(438,String(n)))}function Uu(n){var s=null,o=kt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=kt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=ll(),kt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=et;return s.index++,o}function Ri(n,s){return typeof s=="function"?s(n):s}function ul(n){var s=Ee();return Iu(s,Jt,n)}function Iu(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,g=u.pending;if(g!==null){if(f!==null){var v=f.next;f.next=g.next,g.next=v}s.baseQueue=f=g,u.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{s=f.next;var w=v=null,D=null,I=s,Z=!1;do{var W=I.lane&-536870913;if(W!==I.lane?(It&W)===W:(Mi&W)===W){var H=I.revertLane;if(H===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),W===ba&&(Z=!0);else if((Mi&H)===H){I=I.next,H===ba&&(Z=!0);continue}else W={lane:0,revertLane:I.revertLane,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},D===null?(w=D=W,v=g):D=D.next=W,kt.lanes|=H,ss|=H;W=I.action,Ns&&o(g,W),g=I.hasEagerState?I.eagerState:o(g,W)}else H={lane:W,revertLane:I.revertLane,gesture:I.gesture,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},D===null?(w=D=H,v=g):D=D.next=H,kt.lanes|=W,ss|=W;I=I.next}while(I!==null&&I!==s);if(D===null?v=g:D.next=w,!_n(g,n.memoizedState)&&(Re=!0,Z&&(o=va,o!==null)))throw o;n.memoizedState=g,n.baseState=v,n.baseQueue=D,u.lastRenderedState=g}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function ju(n){var s=Ee(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,g=s.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do g=n(g,v.action),v=v.next;while(v!==f);_n(g,s.memoizedState)||(Re=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,u]}function Bp(n,s,o){var u=kt,f=Ee(),g=Gt;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var v=!_n((Jt||f).memoizedState,o);if(v&&(f.memoizedState=o,Re=!0),f=f.queue,Gu(Up.bind(null,u,f,n),[n]),f.getSnapshot!==s||v||Me!==null&&Me.memoizedState.tag&1){if(u.flags|=2048,Ta(9,{destroy:void 0},Fp.bind(null,u,f,o,s),null),ie===null)throw Error(i(349));g||(Mi&127)!==0||Pp(u,s,o)}return o}function Pp(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=kt.updateQueue,s===null?(s=ll(),kt.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function Fp(n,s,o,u){s.value=o,s.getSnapshot=u,Ip(s)&&jp(n)}function Up(n,s,o){return o(function(){Ip(s)&&jp(n)})}function Ip(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!_n(n,o)}catch{return!0}}function jp(n){var s=Ts(n,2);s!==null&&mn(s,n,2)}function Hu(n){var s=rn();if(typeof n=="function"){var o=n;if(n=o(),Ns){ai(!0);try{o()}finally{ai(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:n},s}function Hp(n,s,o,u){return n.baseState=o,Iu(n,Jt,typeof u=="function"?u:Ri)}function xA(n,s,o,u,f){if(fl(n))throw Error(i(485));if(n=s.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){g.listeners.push(v)}};k.T!==null?o(!0):g.isTransition=!1,u(g),o=s.pending,o===null?(g.next=s.pending=g,Vp(s,g)):(g.next=o.next,s.pending=o.next=g)}}function Vp(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var g=k.T,v={};k.T=v;try{var w=o(f,u),D=k.S;D!==null&&D(v,w),Gp(n,s,w)}catch(I){Vu(n,s,I)}finally{g!==null&&v.types!==null&&(g.types=v.types),k.T=g}}else try{g=o(f,u),Gp(n,s,g)}catch(I){Vu(n,s,I)}}function Gp(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){qp(n,s,u)},function(u){return Vu(n,s,u)}):qp(n,s,o)}function qp(n,s,o){s.status="fulfilled",s.value=o,$p(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Vp(n,o)))}function Vu(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,$p(s),s=s.next;while(s!==u)}n.action=null}function $p(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Xp(n,s){return s}function Yp(n,s){if(Gt){var o=ie.formState;if(o!==null){t:{var u=kt;if(Gt){if(ce){e:{for(var f=ce,g=In;f.nodeType!==8;){if(!g){f=null;break e}if(f=Hn(f.nextSibling),f===null){f=null;break e}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){ce=Hn(f.nextSibling),u=f.data==="F!";break t}}Zi(u)}u=!1}u&&(s=o[0])}}return o=rn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xp,lastRenderedState:s},o.queue=u,o=fg.bind(null,kt,u),u.dispatch=o,u=Hu(!1),g=Zu.bind(null,kt,!1,u.queue),u=rn(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=xA.bind(null,kt,f,g,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function Zp(n){var s=Ee();return Kp(s,Jt,n)}function Kp(n,s,o){if(s=Iu(n,s,Xp)[0],n=ul(Ri)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Cr(s)}catch(v){throw v===Aa?tl:v}else u=s;s=Ee();var f=s.queue,g=f.dispatch;return o!==s.memoizedState&&(kt.flags|=2048,Ta(9,{destroy:void 0},CA.bind(null,f,o),null)),[u,g,n]}function CA(n,s){n.action=s}function Wp(n){var s=Ee(),o=Jt;if(o!==null)return Kp(s,o,n);Ee(),s=s.memoizedState,o=Ee();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function Ta(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=kt.updateQueue,s===null&&(s=ll(),kt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function Qp(){return Ee().memoizedState}function hl(n,s,o,u){var f=rn();kt.flags|=n,f.memoizedState=Ta(1|s,{destroy:void 0},o,u===void 0?null:u)}function dl(n,s,o,u){var f=Ee();u=u===void 0?null:u;var g=f.memoizedState.inst;Jt!==null&&u!==null&&Nu(u,Jt.memoizedState.deps)?f.memoizedState=Ta(s,g,o,u):(kt.flags|=n,f.memoizedState=Ta(1|s,g,o,u))}function Jp(n,s){hl(8390656,8,n,s)}function Gu(n,s){dl(2048,8,n,s)}function DA(n){kt.flags|=4;var s=kt.updateQueue;if(s===null)s=ll(),kt.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function tg(n){var s=Ee().memoizedState;return DA({ref:s,nextImpl:n}),function(){if((Zt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function eg(n,s){return dl(4,2,n,s)}function ng(n,s){return dl(4,4,n,s)}function ig(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function sg(n,s,o){o=o!=null?o.concat([n]):null,dl(4,4,ig.bind(null,s,n),o)}function qu(){}function ag(n,s){var o=Ee();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Nu(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function rg(n,s){var o=Ee();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Nu(s,u[1]))return u[0];if(u=n(),Ns){ai(!0);try{n()}finally{ai(!1)}}return o.memoizedState=[u,s],u}function $u(n,s,o){return o===void 0||(Mi&1073741824)!==0&&(It&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=om(),kt.lanes|=n,ss|=n,o)}function og(n,s,o,u){return _n(o,s)?o:Sa.current!==null?(n=$u(n,o,u),_n(n,s)||(Re=!0),n):(Mi&42)===0||(Mi&1073741824)!==0&&(It&261930)===0?(Re=!0,n.memoizedState=o):(n=om(),kt.lanes|=n,ss|=n,s)}function lg(n,s,o,u,f){var g=j.p;j.p=g!==0&&8>g?g:8;var v=k.T,w={};k.T=w,Zu(n,!1,s,o);try{var D=f(),I=k.S;if(I!==null&&I(w,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=wA(D,u);Dr(n,s,Z,Cn(n))}else Dr(n,s,u,Cn(n))}catch(W){Dr(n,s,{then:function(){},status:"rejected",reason:W},Cn())}finally{j.p=g,v!==null&&w.types!==null&&(v.types=w.types),k.T=v}}function MA(){}function Xu(n,s,o,u){if(n.tag!==5)throw Error(i(476));var f=cg(n).queue;lg(n,f,s,nt,o===null?MA:function(){return ug(n),o(u)})}function cg(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:nt,baseState:nt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:nt},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function ug(n){var s=cg(n);s.next===null&&(s=n.alternate.memoizedState),Dr(n,s.next.queue,{},Cn())}function Yu(){return Xe(qr)}function hg(){return Ee().memoizedState}function dg(){return Ee().memoizedState}function RA(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Cn();n=Qi(o);var u=Ji(s,n,o);u!==null&&(mn(u,s,o),wr(u,s,o)),s={cache:wu()},n.payload=s;return}s=s.return}}function kA(n,s,o){var u=Cn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},fl(n)?pg(s,o):(o=du(n,s,o,u),o!==null&&(mn(o,n,u),gg(o,s,u)))}function fg(n,s,o){var u=Cn();Dr(n,s,o,u)}function Dr(n,s,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(fl(n))pg(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var v=s.lastRenderedState,w=g(v,o);if(f.hasEagerState=!0,f.eagerState=w,_n(w,v))return Xo(n,s,f,0),ie===null&&$o(),!1}catch{}finally{}if(o=du(n,s,f,u),o!==null)return mn(o,n,u),gg(o,s,u),!0}return!1}function Zu(n,s,o,u){if(u={lane:2,revertLane:Ch(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},fl(n)){if(s)throw Error(i(479))}else s=du(n,o,u,2),s!==null&&mn(s,n,2)}function fl(n){var s=n.alternate;return n===kt||s!==null&&s===kt}function pg(n,s){wa=rl=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function gg(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Af(n,o)}}var Mr={readContext:Xe,use:cl,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e,useHostTransitionStatus:_e,useFormState:_e,useActionState:_e,useOptimistic:_e,useMemoCache:_e,useCacheRefresh:_e};Mr.useEffectEvent=_e;var mg={readContext:Xe,use:cl,useCallback:function(n,s){return rn().memoizedState=[n,s===void 0?null:s],n},useContext:Xe,useEffect:Jp,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,hl(4194308,4,ig.bind(null,s,n),o)},useLayoutEffect:function(n,s){return hl(4194308,4,n,s)},useInsertionEffect:function(n,s){hl(4,2,n,s)},useMemo:function(n,s){var o=rn();s=s===void 0?null:s;var u=n();if(Ns){ai(!0);try{n()}finally{ai(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=rn();if(o!==void 0){var f=o(s);if(Ns){ai(!0);try{o(s)}finally{ai(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=kA.bind(null,kt,n),[u.memoizedState,n]},useRef:function(n){var s=rn();return n={current:n},s.memoizedState=n},useState:function(n){n=Hu(n);var s=n.queue,o=fg.bind(null,kt,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:qu,useDeferredValue:function(n,s){var o=rn();return $u(o,n,s)},useTransition:function(){var n=Hu(!1);return n=lg.bind(null,kt,n.queue,!0,!1),rn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=kt,f=rn();if(Gt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),ie===null)throw Error(i(349));(It&127)!==0||Pp(u,s,o)}f.memoizedState=o;var g={value:o,getSnapshot:s};return f.queue=g,Jp(Up.bind(null,u,g,n),[n]),u.flags|=2048,Ta(9,{destroy:void 0},Fp.bind(null,u,g,o,s),null),o},useId:function(){var n=rn(),s=ie.identifierPrefix;if(Gt){var o=oi,u=ri;o=(u&~(1<<32-en(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=ol++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=EA++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Yu,useFormState:Yp,useActionState:Yp,useOptimistic:function(n){var s=rn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Zu.bind(null,kt,!0,o),o.dispatch=s,[n,s]},useMemoCache:Uu,useCacheRefresh:function(){return rn().memoizedState=RA.bind(null,kt)},useEffectEvent:function(n){var s=rn(),o={impl:n};return s.memoizedState=o,function(){if((Zt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Ku={readContext:Xe,use:cl,useCallback:ag,useContext:Xe,useEffect:Gu,useImperativeHandle:sg,useInsertionEffect:eg,useLayoutEffect:ng,useMemo:rg,useReducer:ul,useRef:Qp,useState:function(){return ul(Ri)},useDebugValue:qu,useDeferredValue:function(n,s){var o=Ee();return og(o,Jt.memoizedState,n,s)},useTransition:function(){var n=ul(Ri)[0],s=Ee().memoizedState;return[typeof n=="boolean"?n:Cr(n),s]},useSyncExternalStore:Bp,useId:hg,useHostTransitionStatus:Yu,useFormState:Zp,useActionState:Zp,useOptimistic:function(n,s){var o=Ee();return Hp(o,Jt,n,s)},useMemoCache:Uu,useCacheRefresh:dg};Ku.useEffectEvent=tg;var yg={readContext:Xe,use:cl,useCallback:ag,useContext:Xe,useEffect:Gu,useImperativeHandle:sg,useInsertionEffect:eg,useLayoutEffect:ng,useMemo:rg,useReducer:ju,useRef:Qp,useState:function(){return ju(Ri)},useDebugValue:qu,useDeferredValue:function(n,s){var o=Ee();return Jt===null?$u(o,n,s):og(o,Jt.memoizedState,n,s)},useTransition:function(){var n=ju(Ri)[0],s=Ee().memoizedState;return[typeof n=="boolean"?n:Cr(n),s]},useSyncExternalStore:Bp,useId:hg,useHostTransitionStatus:Yu,useFormState:Wp,useActionState:Wp,useOptimistic:function(n,s){var o=Ee();return Jt!==null?Hp(o,Jt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Uu,useCacheRefresh:dg};yg.useEffectEvent=tg;function Wu(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Qu={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=Cn(),f=Qi(u);f.payload=s,o!=null&&(f.callback=o),s=Ji(n,f,u),s!==null&&(mn(s,n,u),wr(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=Cn(),f=Qi(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Ji(n,f,u),s!==null&&(mn(s,n,u),wr(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Cn(),u=Qi(o);u.tag=2,s!=null&&(u.callback=s),s=Ji(n,u,o),s!==null&&(mn(s,n,o),wr(s,n,o))}};function bg(n,s,o,u,f,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,v):s.prototype&&s.prototype.isPureReactComponent?!gr(o,u)||!gr(f,g):!0}function vg(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&Qu.enqueueReplaceState(s,s.state,null)}function zs(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=y({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}function Ag(n){qo(n)}function _g(n){console.error(n)}function Sg(n){qo(n)}function pl(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function wg(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Ju(n,s,o){return o=Qi(o),o.tag=3,o.payload={element:null},o.callback=function(){pl(n,s)},o}function Eg(n){return n=Qi(n),n.tag=3,n}function Tg(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;n.payload=function(){return f(g)},n.callback=function(){wg(s,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){wg(s,o,u),typeof f!="function"&&(as===null?as=new Set([this]):as.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function OA(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&ya(s,o,f,!0),o=wn.current,o!==null){switch(o.tag){case 31:case 13:return jn===null?xl():o.alternate===null&&Se===0&&(Se=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===el?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Eh(n,u,f)),!1;case 22:return o.flags|=65536,u===el?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Eh(n,u,f)),!1}throw Error(i(435,o.tag))}return Eh(n,u,f),xl(),!1}if(Gt)return s=wn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==bu&&(n=Error(i(422),{cause:u}),br(Pn(n,o)))):(u!==bu&&(s=Error(i(423),{cause:u}),br(Pn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Pn(u,o),f=Ju(n.stateNode,u,f),Mu(n,f),Se!==4&&(Se=2)),!1;var g=Error(i(520),{cause:u});if(g=Pn(g,o),Pr===null?Pr=[g]:Pr.push(g),Se!==4&&(Se=2),s===null)return!0;u=Pn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Ju(o.stateNode,u,n),Mu(o,n),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(as===null||!as.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Eg(f),Tg(f,n,o,u),Mu(o,f),!1}o=o.return}while(o!==null);return!1}var th=Error(i(461)),Re=!1;function Ye(n,s,o,u){s.child=n===null?Mp(s,null,o,u):Ls(s,n.child,o,u)}function xg(n,s,o,u,f){o=o.render;var g=s.ref;if("ref"in u){var v={};for(var w in u)w!=="ref"&&(v[w]=u[w])}else v=u;return Ms(s),u=zu(n,s,o,v,g,f),w=Bu(),n!==null&&!Re?(Pu(n,s,f),ki(n,s,f)):(Gt&&w&&mu(s),s.flags|=1,Ye(n,s,u,f),s.child)}function Cg(n,s,o,u,f){if(n===null){var g=o.type;return typeof g=="function"&&!fu(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,Dg(n,s,g,u,f)):(n=Zo(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!lh(n,f)){var v=g.memoizedProps;if(o=o.compare,o=o!==null?o:gr,o(v,u)&&n.ref===s.ref)return ki(n,s,f)}return s.flags|=1,n=Ti(g,u),n.ref=s.ref,n.return=s,s.child=n}function Dg(n,s,o,u,f){if(n!==null){var g=n.memoizedProps;if(gr(g,u)&&n.ref===s.ref)if(Re=!1,s.pendingProps=u=g,lh(n,f))(n.flags&131072)!==0&&(Re=!0);else return s.lanes=n.lanes,ki(n,s,f)}return eh(n,s,o,u,f)}function Mg(n,s,o,u){var f=u.children,g=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,n!==null){for(u=s.child=n.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~g}else u=0,s.child=null;return Rg(n,s,g,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Jo(s,g!==null?g.cachePool:null),g!==null?Op(s,g):ku(),Lp(s);else return u=s.lanes=536870912,Rg(n,s,g!==null?g.baseLanes|o:o,o,u)}else g!==null?(Jo(s,g.cachePool),Op(s,g),es(),s.memoizedState=null):(n!==null&&Jo(s,null),ku(),es());return Ye(n,s,f,o),s.child}function Rr(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Rg(n,s,o,u,f){var g=Tu();return g=g===null?null:{parent:De._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},n!==null&&Jo(s,null),ku(),Lp(s),n!==null&&ya(n,s,u,!0),s.childLanes=f,null}function gl(n,s){return s=yl({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function kg(n,s,o){return Ls(s,n.child,null,o),n=gl(s,s.pendingProps),n.flags|=2,En(s),s.memoizedState=null,n}function LA(n,s,o){var u=s.pendingProps,f=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Gt){if(u.mode==="hidden")return n=gl(s,u),s.lanes=536870912,Rr(null,n);if(Lu(s),(n=ce)?(n=Vm(n,In),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Xi!==null?{id:ri,overflow:oi}:null,retryLane:536870912,hydrationErrors:null},o=pp(n),o.return=s,s.child=o,$e=s,ce=null)):n=null,n===null)throw Zi(s);return s.lanes=536870912,null}return gl(s,u)}var g=n.memoizedState;if(g!==null){var v=g.dehydrated;if(Lu(s),f)if(s.flags&256)s.flags&=-257,s=kg(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(Re||ya(n,s,o,!1),f=(o&n.childLanes)!==0,Re||f){if(u=ie,u!==null&&(v=_f(u,o),v!==0&&v!==g.retryLane))throw g.retryLane=v,Ts(n,v),mn(u,n,v),th;xl(),s=kg(n,s,o)}else n=g.treeContext,ce=Hn(v.nextSibling),$e=s,Gt=!0,Yi=null,In=!1,n!==null&&yp(s,n),s=gl(s,u),s.flags|=4096;return s}return n=Ti(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function ml(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function eh(n,s,o,u,f){return Ms(s),o=zu(n,s,o,u,void 0,f),u=Bu(),n!==null&&!Re?(Pu(n,s,f),ki(n,s,f)):(Gt&&u&&mu(s),s.flags|=1,Ye(n,s,o,f),s.child)}function Og(n,s,o,u,f,g){return Ms(s),s.updateQueue=null,o=zp(s,u,o,f),Np(n),u=Bu(),n!==null&&!Re?(Pu(n,s,g),ki(n,s,g)):(Gt&&u&&mu(s),s.flags|=1,Ye(n,s,o,g),s.child)}function Lg(n,s,o,u,f){if(Ms(s),s.stateNode===null){var g=fa,v=o.contextType;typeof v=="object"&&v!==null&&(g=Xe(v)),g=new o(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Qu,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},Cu(s),v=o.contextType,g.context=typeof v=="object"&&v!==null?Xe(v):fa,g.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(Wu(s,o,v,u),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(v=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),v!==g.state&&Qu.enqueueReplaceState(g,g.state,null),Tr(s,u,g,f),Er(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){g=s.stateNode;var w=s.memoizedProps,D=zs(o,w);g.props=D;var I=g.context,Z=o.contextType;v=fa,typeof Z=="object"&&Z!==null&&(v=Xe(Z));var W=o.getDerivedStateFromProps;Z=typeof W=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,Z||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||I!==v)&&vg(s,g,u,v),Wi=!1;var H=s.memoizedState;g.state=H,Tr(s,u,g,f),Er(),I=s.memoizedState,w||H!==I||Wi?(typeof W=="function"&&(Wu(s,o,W,u),I=s.memoizedState),(D=Wi||bg(s,o,D,u,H,I,v))?(Z||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=I),g.props=u,g.state=I,g.context=v,u=D):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,Du(n,s),v=s.memoizedProps,Z=zs(o,v),g.props=Z,W=s.pendingProps,H=g.context,I=o.contextType,D=fa,typeof I=="object"&&I!==null&&(D=Xe(I)),w=o.getDerivedStateFromProps,(I=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(v!==W||H!==D)&&vg(s,g,u,D),Wi=!1,H=s.memoizedState,g.state=H,Tr(s,u,g,f),Er();var G=s.memoizedState;v!==W||H!==G||Wi||n!==null&&n.dependencies!==null&&Wo(n.dependencies)?(typeof w=="function"&&(Wu(s,o,w,u),G=s.memoizedState),(Z=Wi||bg(s,o,Z,u,H,G,D)||n!==null&&n.dependencies!==null&&Wo(n.dependencies))?(I||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,G,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,G,D)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||v===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=G),g.props=u,g.state=G,g.context=D,u=Z):(typeof g.componentDidUpdate!="function"||v===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),u=!1)}return g=u,ml(n,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,n!==null&&u?(s.child=Ls(s,n.child,null,f),s.child=Ls(s,null,o,f)):Ye(n,s,o,f),s.memoizedState=g.state,n=s.child):n=ki(n,s,f),n}function Ng(n,s,o,u){return Cs(),s.flags|=256,Ye(n,s,o,u),s.child}var nh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ih(n){return{baseLanes:n,cachePool:wp()}}function sh(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=xn),n}function zg(n,s,o){var u=s.pendingProps,f=!1,g=(s.flags&128)!==0,v;if((v=g)||(v=n!==null&&n.memoizedState===null?!1:(we.current&2)!==0),v&&(f=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,n===null){if(Gt){if(f?ts(s):es(),(n=ce)?(n=Vm(n,In),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Xi!==null?{id:ri,overflow:oi}:null,retryLane:536870912,hydrationErrors:null},o=pp(n),o.return=s,s.child=o,$e=s,ce=null)):n=null,n===null)throw Zi(s);return Ih(n)?s.lanes=32:s.lanes=536870912,null}var w=u.children;return u=u.fallback,f?(es(),f=s.mode,w=yl({mode:"hidden",children:w},f),u=xs(u,f,o,null),w.return=s,u.return=s,w.sibling=u,s.child=w,u=s.child,u.memoizedState=ih(o),u.childLanes=sh(n,v,o),s.memoizedState=nh,Rr(null,u)):(ts(s),ah(s,w))}var D=n.memoizedState;if(D!==null&&(w=D.dehydrated,w!==null)){if(g)s.flags&256?(ts(s),s.flags&=-257,s=rh(n,s,o)):s.memoizedState!==null?(es(),s.child=n.child,s.flags|=128,s=null):(es(),w=u.fallback,f=s.mode,u=yl({mode:"visible",children:u.children},f),w=xs(w,f,o,null),w.flags|=2,u.return=s,w.return=s,u.sibling=w,s.child=u,Ls(s,n.child,null,o),u=s.child,u.memoizedState=ih(o),u.childLanes=sh(n,v,o),s.memoizedState=nh,s=Rr(null,u));else if(ts(s),Ih(w)){if(v=w.nextSibling&&w.nextSibling.dataset,v)var I=v.dgst;v=I,u=Error(i(419)),u.stack="",u.digest=v,br({value:u,source:null,stack:null}),s=rh(n,s,o)}else if(Re||ya(n,s,o,!1),v=(o&n.childLanes)!==0,Re||v){if(v=ie,v!==null&&(u=_f(v,o),u!==0&&u!==D.retryLane))throw D.retryLane=u,Ts(n,u),mn(v,n,u),th;Uh(w)||xl(),s=rh(n,s,o)}else Uh(w)?(s.flags|=192,s.child=n.child,s=null):(n=D.treeContext,ce=Hn(w.nextSibling),$e=s,Gt=!0,Yi=null,In=!1,n!==null&&yp(s,n),s=ah(s,u.children),s.flags|=4096);return s}return f?(es(),w=u.fallback,f=s.mode,D=n.child,I=D.sibling,u=Ti(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,I!==null?w=Ti(I,w):(w=xs(w,f,o,null),w.flags|=2),w.return=s,u.return=s,u.sibling=w,s.child=u,Rr(null,u),u=s.child,w=n.child.memoizedState,w===null?w=ih(o):(f=w.cachePool,f!==null?(D=De._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=wp(),w={baseLanes:w.baseLanes|o,cachePool:f}),u.memoizedState=w,u.childLanes=sh(n,v,o),s.memoizedState=nh,Rr(n.child,u)):(ts(s),o=n.child,n=o.sibling,o=Ti(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(v=s.deletions,v===null?(s.deletions=[n],s.flags|=16):v.push(n)),s.child=o,s.memoizedState=null,o)}function ah(n,s){return s=yl({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function yl(n,s){return n=Sn(22,n,null,s),n.lanes=0,n}function rh(n,s,o){return Ls(s,n.child,null,o),n=ah(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Bg(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),_u(n.return,s,o)}function oh(n,s,o,u,f,g){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:g}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=f,v.treeForkCount=g)}function Pg(n,s,o){var u=s.pendingProps,f=u.revealOrder,g=u.tail;u=u.children;var v=we.current,w=(v&2)!==0;if(w?(v=v&1|2,s.flags|=128):v&=1,Q(we,v),Ye(n,s,u,o),u=Gt?yr:0,!w&&n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Bg(n,o,s);else if(n.tag===19)Bg(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&al(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),oh(s,!1,f,o,g,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&al(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}oh(s,!0,o,null,g,u);break;case"together":oh(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function ki(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),ss|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(ya(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=Ti(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=Ti(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function lh(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Wo(n)))}function NA(n,s,o){switch(s.tag){case 3:Kt(s,s.stateNode.containerInfo),Ki(s,De,n.memoizedState.cache),Cs();break;case 27:case 5:$t(s);break;case 4:Kt(s,s.stateNode.containerInfo);break;case 10:Ki(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Lu(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ts(s),s.flags|=128,null):(o&s.child.childLanes)!==0?zg(n,s,o):(ts(s),n=ki(n,s,o),n!==null?n.sibling:null);ts(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(ya(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return Pg(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Q(we,we.current),u)break;return null;case 22:return s.lanes=0,Mg(n,s,o,s.pendingProps);case 24:Ki(s,De,n.memoizedState.cache)}return ki(n,s,o)}function Fg(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Re=!0;else{if(!lh(n,o)&&(s.flags&128)===0)return Re=!1,NA(n,s,o);Re=(n.flags&131072)!==0}else Re=!1,Gt&&(s.flags&1048576)!==0&&mp(s,yr,s.index);switch(s.lanes=0,s.tag){case 16:t:{var u=s.pendingProps;if(n=ks(s.elementType),s.type=n,typeof n=="function")fu(n)?(u=zs(n,u),s.tag=1,s=Lg(null,s,n,u,o)):(s.tag=0,s=eh(null,s,n,u,o));else{if(n!=null){var f=n.$$typeof;if(f===L){s.tag=11,s=xg(null,s,n,u,o);break t}else if(f===z){s.tag=14,s=Cg(null,s,n,u,o);break t}}throw s=rt(n)||n,Error(i(306,s,""))}}return s;case 0:return eh(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=zs(u,s.pendingProps),Lg(n,s,u,f,o);case 3:t:{if(Kt(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var g=s.memoizedState;f=g.element,Du(n,s),Tr(s,u,null,o);var v=s.memoizedState;if(u=v.cache,Ki(s,De,u),u!==g.cache&&Su(s,[De],o,!0),Er(),u=v.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=Ng(n,s,u,o);break t}else if(u!==f){f=Pn(Error(i(424)),s),br(f),s=Ng(n,s,u,o);break t}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ce=Hn(n.firstChild),$e=s,Gt=!0,Yi=null,In=!0,o=Mp(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Cs(),u===f){s=ki(n,s,o);break t}Ye(n,s,u,o)}s=s.child}return s;case 26:return ml(n,s),n===null?(o=Zm(s.type,null,s.pendingProps,null))?s.memoizedState=o:Gt||(o=s.type,n=s.pendingProps,u=Ll(_t.current).createElement(o),u[qe]=s,u[un]=n,Ze(u,o,n),Pe(u),s.stateNode=u):s.memoizedState=Zm(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return $t(s),n===null&&Gt&&(u=s.stateNode=$m(s.type,s.pendingProps,_t.current),$e=s,In=!0,f=ce,cs(s.type)?(jh=f,ce=Hn(u.firstChild)):ce=f),Ye(n,s,s.pendingProps.children,o),ml(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Gt&&((f=u=ce)&&(u=u_(u,s.type,s.pendingProps,In),u!==null?(s.stateNode=u,$e=s,ce=Hn(u.firstChild),In=!1,f=!0):f=!1),f||Zi(s)),$t(s),f=s.type,g=s.pendingProps,v=n!==null?n.memoizedProps:null,u=g.children,Bh(f,g)?u=null:v!==null&&Bh(f,v)&&(s.flags|=32),s.memoizedState!==null&&(f=zu(n,s,TA,null,null,o),qr._currentValue=f),ml(n,s),Ye(n,s,u,o),s.child;case 6:return n===null&&Gt&&((n=o=ce)&&(o=h_(o,s.pendingProps,In),o!==null?(s.stateNode=o,$e=s,ce=null,n=!0):n=!1),n||Zi(s)),null;case 13:return zg(n,s,o);case 4:return Kt(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Ls(s,null,u,o):Ye(n,s,u,o),s.child;case 11:return xg(n,s,s.type,s.pendingProps,o);case 7:return Ye(n,s,s.pendingProps,o),s.child;case 8:return Ye(n,s,s.pendingProps.children,o),s.child;case 12:return Ye(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Ki(s,s.type,u.value),Ye(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,Ms(s),f=Xe(f),u=u(f),s.flags|=1,Ye(n,s,u,o),s.child;case 14:return Cg(n,s,s.type,s.pendingProps,o);case 15:return Dg(n,s,s.type,s.pendingProps,o);case 19:return Pg(n,s,o);case 31:return LA(n,s,o);case 22:return Mg(n,s,o,s.pendingProps);case 24:return Ms(s),u=Xe(De),n===null?(f=Tu(),f===null&&(f=ie,g=wu(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),s.memoizedState={parent:u,cache:f},Cu(s),Ki(s,De,f)):((n.lanes&o)!==0&&(Du(n,s),Tr(s,null,null,o),Er()),f=n.memoizedState,g=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Ki(s,De,u)):(u=g.cache,Ki(s,De,u),u!==f.cache&&Su(s,[De],o,!0))),Ye(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Oi(n){n.flags|=4}function ch(n,s,o,u,f){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(hm())n.flags|=8192;else throw Os=el,xu}else n.flags&=-16777217}function Ug(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!ty(s))if(hm())n.flags|=8192;else throw Os=el,xu}function bl(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?bf():536870912,n.lanes|=s,Ma|=s)}function kr(n,s){if(!Gt)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ue(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function zA(n,s,o){var u=s.pendingProps;switch(yu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ue(s),null;case 1:return ue(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Di(De),Ot(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ma(s)?Oi(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,vu())),ue(s),null;case 26:var f=s.type,g=s.memoizedState;return n===null?(Oi(s),g!==null?(ue(s),Ug(s,g)):(ue(s),ch(s,f,null,u,o))):g?g!==n.memoizedState?(Oi(s),ue(s),Ug(s,g)):(ue(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Oi(s),ue(s),ch(s,f,n,u,o)),null;case 27:if(Je(s),o=_t.current,f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Oi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ue(s),null}n=lt.current,ma(s)?bp(s):(n=$m(f,u,o),s.stateNode=n,Oi(s))}return ue(s),null;case 5:if(Je(s),f=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Oi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ue(s),null}if(g=lt.current,ma(s))bp(s);else{var v=Ll(_t.current);switch(g){case 1:g=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=v.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?v.createElement(f,{is:u.is}):v.createElement(f)}}g[qe]=s,g[un]=u;t:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)g.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break t;for(;v.sibling===null;){if(v.return===null||v.return===s)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=g;t:switch(Ze(g,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Oi(s)}}return ue(s),ch(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Oi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=_t.current,ma(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=$e,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[qe]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||zm(n.nodeValue,o)),n||Zi(s,!0)}else n=Ll(n).createTextNode(u),n[qe]=s,s.stateNode=n}return ue(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=ma(s),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[qe]=s}else Cs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ue(s),n=!1}else o=vu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(En(s),s):(En(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ue(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ma(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[qe]=s}else Cs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ue(s),f=!1}else f=vu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(En(s),s):(En(s),null)}return En(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),bl(s,s.updateQueue),ue(s),null);case 4:return Ot(),n===null&&kh(s.stateNode.containerInfo),ue(s),null;case 10:return Di(s.type),ue(s),null;case 19:if(q(we),u=s.memoizedState,u===null)return ue(s),null;if(f=(s.flags&128)!==0,g=u.rendering,g===null)if(f)kr(u,!1);else{if(Se!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(g=al(n),g!==null){for(s.flags|=128,kr(u,!1),n=g.updateQueue,s.updateQueue=n,bl(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)fp(o,n),o=o.sibling;return Q(we,we.current&1|2),Gt&&xi(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&it()>wl&&(s.flags|=128,f=!0,kr(u,!1),s.lanes=4194304)}else{if(!f)if(n=al(g),n!==null){if(s.flags|=128,f=!0,n=n.updateQueue,s.updateQueue=n,bl(s,n),kr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!Gt)return ue(s),null}else 2*it()-u.renderingStartTime>wl&&o!==536870912&&(s.flags|=128,f=!0,kr(u,!1),s.lanes=4194304);u.isBackwards?(g.sibling=s.child,s.child=g):(n=u.last,n!==null?n.sibling=g:s.child=g,u.last=g)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=it(),n.sibling=null,o=we.current,Q(we,f?o&1|2:o&1),Gt&&xi(s,u.treeForkCount),n):(ue(s),null);case 22:case 23:return En(s),Ou(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ue(s),s.subtreeFlags&6&&(s.flags|=8192)):ue(s),o=s.updateQueue,o!==null&&bl(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&q(Rs),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Di(De),ue(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function BA(n,s){switch(yu(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Di(De),Ot(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Je(s),null;case 31:if(s.memoizedState!==null){if(En(s),s.alternate===null)throw Error(i(340));Cs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(En(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Cs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return q(we),null;case 4:return Ot(),null;case 10:return Di(s.type),null;case 22:case 23:return En(s),Ou(),n!==null&&q(Rs),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Di(De),null;case 25:return null;default:return null}}function Ig(n,s){switch(yu(s),s.tag){case 3:Di(De),Ot();break;case 26:case 27:case 5:Je(s);break;case 4:Ot();break;case 31:s.memoizedState!==null&&En(s);break;case 13:En(s);break;case 19:q(we);break;case 10:Di(s.type);break;case 22:case 23:En(s),Ou(),n!==null&&q(Rs);break;case 24:Di(De)}}function Or(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var g=o.create,v=o.inst;u=g(),v.destroy=u}o=o.next}while(o!==f)}}catch(w){Qt(s,s.return,w)}}function ns(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&n)===n){var v=u.inst,w=v.destroy;if(w!==void 0){v.destroy=void 0,f=s;var D=o,I=w;try{I()}catch(Z){Qt(f,D,Z)}}}u=u.next}while(u!==g)}}catch(Z){Qt(s,s.return,Z)}}function jg(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{kp(s,o)}catch(u){Qt(n,n.return,u)}}}function Hg(n,s,o){o.props=zs(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){Qt(n,s,u)}}function Lr(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){Qt(n,s,f)}}function li(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){Qt(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Qt(n,s,f)}else o.current=null}function Vg(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){Qt(n,n.return,f)}}function uh(n,s,o){try{var u=n.stateNode;s_(u,n.type,o,s),u[un]=s}catch(f){Qt(n,n.return,f)}}function Gg(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&cs(n.type)||n.tag===4}function hh(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Gg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&cs(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function dh(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=wi));else if(u!==4&&(u===27&&cs(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(dh(n,s,o),n=n.sibling;n!==null;)dh(n,s,o),n=n.sibling}function vl(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&cs(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(vl(n,s,o),n=n.sibling;n!==null;)vl(n,s,o),n=n.sibling}function qg(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Ze(s,u,o),s[qe]=n,s[un]=o}catch(g){Qt(n,n.return,g)}}var Li=!1,ke=!1,fh=!1,$g=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function PA(n,s){if(n=n.containerInfo,Nh=Il,n=sp(n),ru(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break t}var v=0,w=-1,D=-1,I=0,Z=0,W=n,H=null;e:for(;;){for(var G;W!==o||f!==0&&W.nodeType!==3||(w=v+f),W!==g||u!==0&&W.nodeType!==3||(D=v+u),W.nodeType===3&&(v+=W.nodeValue.length),(G=W.firstChild)!==null;)H=W,W=G;for(;;){if(W===n)break e;if(H===o&&++I===f&&(w=v),H===g&&++Z===u&&(D=v),(G=W.nextSibling)!==null)break;W=H,H=W.parentNode}W=G}o=w===-1||D===-1?null:{start:w,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(zh={focusedElem:n,selectionRange:o},Il=!1,Fe=s;Fe!==null;)if(s=Fe,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Fe=n;else for(;Fe!==null;){switch(s=Fe,g=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)f=n[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=s,f=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var pt=zs(o.type,f);n=u.getSnapshotBeforeUpdate(pt,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(Et){Qt(o,o.return,Et)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Fh(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Fh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Fe=n;break}Fe=s.return}}function Xg(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:zi(n,o),u&4&&Or(5,o);break;case 1:if(zi(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(v){Qt(o,o.return,v)}else{var f=zs(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(v){Qt(o,o.return,v)}}u&64&&jg(o),u&512&&Lr(o,o.return);break;case 3:if(zi(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{kp(n,s)}catch(v){Qt(o,o.return,v)}}break;case 27:s===null&&u&4&&qg(o);case 26:case 5:zi(n,o),s===null&&u&4&&Vg(o),u&512&&Lr(o,o.return);break;case 12:zi(n,o);break;case 31:zi(n,o),u&4&&Kg(n,o);break;case 13:zi(n,o),u&4&&Wg(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=$A.bind(null,o),d_(n,o))));break;case 22:if(u=o.memoizedState!==null||Li,!u){s=s!==null&&s.memoizedState!==null||ke,f=Li;var g=ke;Li=u,(ke=s)&&!g?Bi(n,o,(o.subtreeFlags&8772)!==0):zi(n,o),Li=f,ke=g}break;case 30:break;default:zi(n,o)}}function Yg(n){var s=n.alternate;s!==null&&(n.alternate=null,Yg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Vc(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var de=null,dn=!1;function Ni(n,s,o){for(o=o.child;o!==null;)Zg(n,s,o),o=o.sibling}function Zg(n,s,o){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(_i,o)}catch{}switch(o.tag){case 26:ke||li(o,s),Ni(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ke||li(o,s);var u=de,f=dn;cs(o.type)&&(de=o.stateNode,dn=!1),Ni(n,s,o),Hr(o.stateNode),de=u,dn=f;break;case 5:ke||li(o,s);case 6:if(u=de,f=dn,de=null,Ni(n,s,o),de=u,dn=f,de!==null)if(dn)try{(de.nodeType===9?de.body:de.nodeName==="HTML"?de.ownerDocument.body:de).removeChild(o.stateNode)}catch(g){Qt(o,s,g)}else try{de.removeChild(o.stateNode)}catch(g){Qt(o,s,g)}break;case 18:de!==null&&(dn?(n=de,jm(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Pa(n)):jm(de,o.stateNode));break;case 4:u=de,f=dn,de=o.stateNode.containerInfo,dn=!0,Ni(n,s,o),de=u,dn=f;break;case 0:case 11:case 14:case 15:ns(2,o,s),ke||ns(4,o,s),Ni(n,s,o);break;case 1:ke||(li(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Hg(o,s,u)),Ni(n,s,o);break;case 21:Ni(n,s,o);break;case 22:ke=(u=ke)||o.memoizedState!==null,Ni(n,s,o),ke=u;break;default:Ni(n,s,o)}}function Kg(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Pa(n)}catch(o){Qt(s,s.return,o)}}}function Wg(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Pa(n)}catch(o){Qt(s,s.return,o)}}function FA(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new $g),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new $g),s;default:throw Error(i(435,n.tag))}}function Al(n,s){var o=FA(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var f=XA.bind(null,n,u);u.then(f,f)}})}function fn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],g=n,v=s,w=v;t:for(;w!==null;){switch(w.tag){case 27:if(cs(w.type)){de=w.stateNode,dn=!1;break t}break;case 5:de=w.stateNode,dn=!1;break t;case 3:case 4:de=w.stateNode.containerInfo,dn=!0;break t}w=w.return}if(de===null)throw Error(i(160));Zg(g,v,f),de=null,dn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Qg(s,n),s=s.sibling}var Kn=null;function Qg(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:fn(s,n),pn(n),u&4&&(ns(3,n,n.return),Or(3,n),ns(5,n,n.return));break;case 1:fn(s,n),pn(n),u&512&&(ke||o===null||li(o,o.return)),u&64&&Li&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Kn;if(fn(s,n),pn(n),u&512&&(ke||o===null||li(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){t:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[rr]||g[qe]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),Ze(g,u,o),g[qe]=n,Pe(g),u=g;break t;case"link":var v=Qm("link","href",f).get(u+(o.href||""));if(v){for(var w=0;w<v.length;w++)if(g=v[w],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(w,1);break e}}g=f.createElement(u),Ze(g,u,o),f.head.appendChild(g);break;case"meta":if(v=Qm("meta","content",f).get(u+(o.content||""))){for(w=0;w<v.length;w++)if(g=v[w],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(w,1);break e}}g=f.createElement(u),Ze(g,u,o),f.head.appendChild(g);break;default:throw Error(i(468,u))}g[qe]=n,Pe(g),u=g}n.stateNode=u}else Jm(f,n.type,n.stateNode);else n.stateNode=Wm(f,u,n.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?Jm(f,n.type,n.stateNode):Wm(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&uh(n,n.memoizedProps,o.memoizedProps)}break;case 27:fn(s,n),pn(n),u&512&&(ke||o===null||li(o,o.return)),o!==null&&u&4&&uh(n,n.memoizedProps,o.memoizedProps);break;case 5:if(fn(s,n),pn(n),u&512&&(ke||o===null||li(o,o.return)),n.flags&32){f=n.stateNode;try{ra(f,"")}catch(pt){Qt(n,n.return,pt)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,uh(n,f,o!==null?o.memoizedProps:f)),u&1024&&(fh=!0);break;case 6:if(fn(s,n),pn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(pt){Qt(n,n.return,pt)}}break;case 3:if(Bl=null,f=Kn,Kn=Nl(s.containerInfo),fn(s,n),Kn=f,pn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Pa(s.containerInfo)}catch(pt){Qt(n,n.return,pt)}fh&&(fh=!1,Jg(n));break;case 4:u=Kn,Kn=Nl(n.stateNode.containerInfo),fn(s,n),pn(n),Kn=u;break;case 12:fn(s,n),pn(n);break;case 31:fn(s,n),pn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Al(n,u)));break;case 13:fn(s,n),pn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Sl=it()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Al(n,u)));break;case 22:f=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,I=Li,Z=ke;if(Li=I||f,ke=Z||D,fn(s,n),ke=Z,Li=I,pn(n),u&8192)t:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||D||Li||ke||Bs(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){D=o=s;try{if(g=D.stateNode,f)v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{w=D.stateNode;var W=D.memoizedProps.style,H=W!=null&&W.hasOwnProperty("display")?W.display:null;w.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(pt){Qt(D,D.return,pt)}}}else if(s.tag===6){if(o===null){D=s;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(pt){Qt(D,D.return,pt)}}}else if(s.tag===18){if(o===null){D=s;try{var G=D.stateNode;f?Hm(G,!0):Hm(D.stateNode,!1)}catch(pt){Qt(D,D.return,pt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Al(n,o))));break;case 19:fn(s,n),pn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Al(n,u)));break;case 30:break;case 21:break;default:fn(s,n),pn(n)}}function pn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(Gg(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,g=hh(n);vl(n,g,f);break;case 5:var v=o.stateNode;o.flags&32&&(ra(v,""),o.flags&=-33);var w=hh(n);vl(n,w,v);break;case 3:case 4:var D=o.stateNode.containerInfo,I=hh(n);dh(n,I,D);break;default:throw Error(i(161))}}catch(Z){Qt(n,n.return,Z)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Jg(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Jg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function zi(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Xg(n,s.alternate,s),s=s.sibling}function Bs(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:ns(4,s,s.return),Bs(s);break;case 1:li(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Hg(s,s.return,o),Bs(s);break;case 27:Hr(s.stateNode);case 26:case 5:li(s,s.return),Bs(s);break;case 22:s.memoizedState===null&&Bs(s);break;case 30:Bs(s);break;default:Bs(s)}n=n.sibling}}function Bi(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,g=s,v=g.flags;switch(g.tag){case 0:case 11:case 15:Bi(f,g,o),Or(4,g);break;case 1:if(Bi(f,g,o),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(I){Qt(u,u.return,I)}if(u=g,f=u.updateQueue,f!==null){var w=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Rp(D[f],w)}catch(I){Qt(u,u.return,I)}}o&&v&64&&jg(g),Lr(g,g.return);break;case 27:qg(g);case 26:case 5:Bi(f,g,o),o&&u===null&&v&4&&Vg(g),Lr(g,g.return);break;case 12:Bi(f,g,o);break;case 31:Bi(f,g,o),o&&v&4&&Kg(f,g);break;case 13:Bi(f,g,o),o&&v&4&&Wg(f,g);break;case 22:g.memoizedState===null&&Bi(f,g,o),Lr(g,g.return);break;case 30:break;default:Bi(f,g,o)}s=s.sibling}}function ph(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&vr(o))}function gh(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&vr(n))}function Wn(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)tm(n,s,o,u),s=s.sibling}function tm(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Wn(n,s,o,u),f&2048&&Or(9,s);break;case 1:Wn(n,s,o,u);break;case 3:Wn(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&vr(n)));break;case 12:if(f&2048){Wn(n,s,o,u),n=s.stateNode;try{var g=s.memoizedProps,v=g.id,w=g.onPostCommit;typeof w=="function"&&w(v,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){Qt(s,s.return,D)}}else Wn(n,s,o,u);break;case 31:Wn(n,s,o,u);break;case 13:Wn(n,s,o,u);break;case 23:break;case 22:g=s.stateNode,v=s.alternate,s.memoizedState!==null?g._visibility&2?Wn(n,s,o,u):Nr(n,s):g._visibility&2?Wn(n,s,o,u):(g._visibility|=2,xa(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),f&2048&&ph(v,s);break;case 24:Wn(n,s,o,u),f&2048&&gh(s.alternate,s);break;default:Wn(n,s,o,u)}}function xa(n,s,o,u,f){for(f=f&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=n,v=s,w=o,D=u,I=v.flags;switch(v.tag){case 0:case 11:case 15:xa(g,v,w,D,f),Or(8,v);break;case 23:break;case 22:var Z=v.stateNode;v.memoizedState!==null?Z._visibility&2?xa(g,v,w,D,f):Nr(g,v):(Z._visibility|=2,xa(g,v,w,D,f)),f&&I&2048&&ph(v.alternate,v);break;case 24:xa(g,v,w,D,f),f&&I&2048&&gh(v.alternate,v);break;default:xa(g,v,w,D,f)}s=s.sibling}}function Nr(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:Nr(o,u),f&2048&&ph(u.alternate,u);break;case 24:Nr(o,u),f&2048&&gh(u.alternate,u);break;default:Nr(o,u)}s=s.sibling}}var zr=8192;function Ca(n,s,o){if(n.subtreeFlags&zr)for(n=n.child;n!==null;)em(n,s,o),n=n.sibling}function em(n,s,o){switch(n.tag){case 26:Ca(n,s,o),n.flags&zr&&n.memoizedState!==null&&E_(o,Kn,n.memoizedState,n.memoizedProps);break;case 5:Ca(n,s,o);break;case 3:case 4:var u=Kn;Kn=Nl(n.stateNode.containerInfo),Ca(n,s,o),Kn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=zr,zr=16777216,Ca(n,s,o),zr=u):Ca(n,s,o));break;default:Ca(n,s,o)}}function nm(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Br(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Fe=u,sm(u,n)}nm(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)im(n),n=n.sibling}function im(n){switch(n.tag){case 0:case 11:case 15:Br(n),n.flags&2048&&ns(9,n,n.return);break;case 3:Br(n);break;case 12:Br(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,_l(n)):Br(n);break;default:Br(n)}}function _l(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Fe=u,sm(u,n)}nm(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:ns(8,s,s.return),_l(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,_l(s));break;default:_l(s)}n=n.sibling}}function sm(n,s){for(;Fe!==null;){var o=Fe;switch(o.tag){case 0:case 11:case 15:ns(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:vr(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Fe=u;else t:for(o=n;Fe!==null;){u=Fe;var f=u.sibling,g=u.return;if(Yg(u),u===o){Fe=null;break t}if(f!==null){f.return=g,Fe=f;break t}Fe=g}}}var UA={getCacheForType:function(n){var s=Xe(De),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return Xe(De).controller.signal}},IA=typeof WeakMap=="function"?WeakMap:Map,Zt=0,ie=null,Pt=null,It=0,Wt=0,Tn=null,is=!1,Da=!1,mh=!1,Pi=0,Se=0,ss=0,Ps=0,yh=0,xn=0,Ma=0,Pr=null,gn=null,bh=!1,Sl=0,am=0,wl=1/0,El=null,as=null,ze=0,rs=null,Ra=null,Fi=0,vh=0,Ah=null,rm=null,Fr=0,_h=null;function Cn(){return(Zt&2)!==0&&It!==0?It&-It:k.T!==null?Ch():Sf()}function om(){if(xn===0)if((It&536870912)===0||Gt){var n=Oo;Oo<<=1,(Oo&3932160)===0&&(Oo=262144),xn=n}else xn=536870912;return n=wn.current,n!==null&&(n.flags|=32),xn}function mn(n,s,o){(n===ie&&(Wt===2||Wt===9)||n.cancelPendingCommit!==null)&&(ka(n,0),os(n,It,xn,!1)),ar(n,o),((Zt&2)===0||n!==ie)&&(n===ie&&((Zt&2)===0&&(Ps|=o),Se===4&&os(n,It,xn,!1)),ci(n))}function lm(n,s,o){if((Zt&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||sr(n,s),f=u?VA(n,s):wh(n,s,!0),g=u;do{if(f===0){Da&&!u&&os(n,s,0,!1);break}else{if(o=n.current.alternate,g&&!jA(o)){f=wh(n,s,!1),g=!1;continue}if(f===2){if(g=s,n.errorRecoveryDisabledLanes&g)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;t:{var w=n;f=Pr;var D=w.current.memoizedState.isDehydrated;if(D&&(ka(w,v).flags|=256),v=wh(w,v,!1),v!==2){if(mh&&!D){w.errorRecoveryDisabledLanes|=g,Ps|=g,f=4;break t}g=gn,gn=f,g!==null&&(gn===null?gn=g:gn.push.apply(gn,g))}f=v}if(g=!1,f!==2)continue}}if(f===1){ka(n,0),os(n,s,0,!0);break}t:{switch(u=n,g=f,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:os(u,s,xn,!is);break t;case 2:gn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=Sl+300-it(),10<f)){if(os(u,s,xn,!is),No(u,0,!0)!==0)break t;Fi=s,u.timeoutHandle=Um(cm.bind(null,u,o,gn,El,bh,s,xn,Ps,Ma,is,g,"Throttled",-0,0),f);break t}cm(u,o,gn,El,bh,s,xn,Ps,Ma,is,g,null,-0,0)}}break}while(!0);ci(n)}function cm(n,s,o,u,f,g,v,w,D,I,Z,W,H,G){if(n.timeoutHandle=-1,W=s.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wi},em(s,g,W);var pt=(g&62914560)===g?Sl-it():(g&4194048)===g?am-it():0;if(pt=T_(W,pt),pt!==null){Fi=g,n.cancelPendingCommit=pt(ym.bind(null,n,s,g,o,u,f,v,w,D,Z,W,null,H,G)),os(n,g,v,!I);return}}ym(n,s,g,o,u,f,v,w,D)}function jA(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],g=f.getSnapshot;f=f.value;try{if(!_n(g(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function os(n,s,o,u){s&=~yh,s&=~Ps,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var g=31-en(f),v=1<<g;u[g]=-1,f&=~v}o!==0&&vf(n,o,s)}function Tl(){return(Zt&6)===0?(Ur(0),!1):!0}function Sh(){if(Pt!==null){if(Wt===0)var n=Pt.return;else n=Pt,Ci=Ds=null,Fu(n),_a=null,_r=0,n=Pt;for(;n!==null;)Ig(n.alternate,n),n=n.return;Pt=null}}function ka(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,o_(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Fi=0,Sh(),ie=n,Pt=o=Ti(n.current,null),It=s,Wt=0,Tn=null,is=!1,Da=sr(n,s),mh=!1,Ma=xn=yh=Ps=ss=Se=0,gn=Pr=null,bh=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-en(u),g=1<<f;s|=n[f],u&=~g}return Pi=s,$o(),o}function um(n,s){kt=null,k.H=Mr,s===Aa||s===tl?(s=xp(),Wt=3):s===xu?(s=xp(),Wt=4):Wt=s===th?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Tn=s,Pt===null&&(Se=1,pl(n,Pn(s,n.current)))}function hm(){var n=wn.current;return n===null?!0:(It&4194048)===It?jn===null:(It&62914560)===It||(It&536870912)!==0?n===jn:!1}function dm(){var n=k.H;return k.H=Mr,n===null?Mr:n}function fm(){var n=k.A;return k.A=UA,n}function xl(){Se=4,is||(It&4194048)!==It&&wn.current!==null||(Da=!0),(ss&134217727)===0&&(Ps&134217727)===0||ie===null||os(ie,It,xn,!1)}function wh(n,s,o){var u=Zt;Zt|=2;var f=dm(),g=fm();(ie!==n||It!==s)&&(El=null,ka(n,s)),s=!1;var v=Se;t:do try{if(Wt!==0&&Pt!==null){var w=Pt,D=Tn;switch(Wt){case 8:Sh(),v=6;break t;case 3:case 2:case 9:case 6:wn.current===null&&(s=!0);var I=Wt;if(Wt=0,Tn=null,Oa(n,w,D,I),o&&Da){v=0;break t}break;default:I=Wt,Wt=0,Tn=null,Oa(n,w,D,I)}}HA(),v=Se;break}catch(Z){um(n,Z)}while(!0);return s&&n.shellSuspendCounter++,Ci=Ds=null,Zt=u,k.H=f,k.A=g,Pt===null&&(ie=null,It=0,$o()),v}function HA(){for(;Pt!==null;)pm(Pt)}function VA(n,s){var o=Zt;Zt|=2;var u=dm(),f=fm();ie!==n||It!==s?(El=null,wl=it()+500,ka(n,s)):Da=sr(n,s);t:do try{if(Wt!==0&&Pt!==null){s=Pt;var g=Tn;e:switch(Wt){case 1:Wt=0,Tn=null,Oa(n,s,g,1);break;case 2:case 9:if(Ep(g)){Wt=0,Tn=null,gm(s);break}s=function(){Wt!==2&&Wt!==9||ie!==n||(Wt=7),ci(n)},g.then(s,s);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:Ep(g)?(Wt=0,Tn=null,gm(s)):(Wt=0,Tn=null,Oa(n,s,g,7));break;case 5:var v=null;switch(Pt.tag){case 26:v=Pt.memoizedState;case 5:case 27:var w=Pt;if(v?ty(v):w.stateNode.complete){Wt=0,Tn=null;var D=w.sibling;if(D!==null)Pt=D;else{var I=w.return;I!==null?(Pt=I,Cl(I)):Pt=null}break e}}Wt=0,Tn=null,Oa(n,s,g,5);break;case 6:Wt=0,Tn=null,Oa(n,s,g,6);break;case 8:Sh(),Se=6;break t;default:throw Error(i(462))}}GA();break}catch(Z){um(n,Z)}while(!0);return Ci=Ds=null,k.H=u,k.A=f,Zt=o,Pt!==null?0:(ie=null,It=0,$o(),Se)}function GA(){for(;Pt!==null&&!X();)pm(Pt)}function pm(n){var s=Fg(n.alternate,n,Pi);n.memoizedProps=n.pendingProps,s===null?Cl(n):Pt=s}function gm(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Og(o,s,s.pendingProps,s.type,void 0,It);break;case 11:s=Og(o,s,s.pendingProps,s.type.render,s.ref,It);break;case 5:Fu(s);default:Ig(o,s),s=Pt=fp(s,Pi),s=Fg(o,s,Pi)}n.memoizedProps=n.pendingProps,s===null?Cl(n):Pt=s}function Oa(n,s,o,u){Ci=Ds=null,Fu(s),_a=null,_r=0;var f=s.return;try{if(OA(n,f,s,o,It)){Se=1,pl(n,Pn(o,n.current)),Pt=null;return}}catch(g){if(f!==null)throw Pt=f,g;Se=1,pl(n,Pn(o,n.current)),Pt=null;return}s.flags&32768?(Gt||u===1?n=!0:Da||(It&536870912)!==0?n=!1:(is=n=!0,(u===2||u===9||u===3||u===6)&&(u=wn.current,u!==null&&u.tag===13&&(u.flags|=16384))),mm(s,n)):Cl(s)}function Cl(n){var s=n;do{if((s.flags&32768)!==0){mm(s,is);return}n=s.return;var o=zA(s.alternate,s,Pi);if(o!==null){Pt=o;return}if(s=s.sibling,s!==null){Pt=s;return}Pt=s=n}while(s!==null);Se===0&&(Se=5)}function mm(n,s){do{var o=BA(n.alternate,n);if(o!==null){o.flags&=32767,Pt=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Pt=n;return}Pt=n=o}while(n!==null);Se=6,Pt=null}function ym(n,s,o,u,f,g,v,w,D){n.cancelPendingCommit=null;do Dl();while(ze!==0);if((Zt&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=hu,w0(n,o,g,v,w,D),n===ie&&(Pt=ie=null,It=0),Ra=s,rs=n,Fi=o,vh=g,Ah=f,rm=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,YA(Bt,function(){return Sm(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=k.T,k.T=null,f=j.p,j.p=2,v=Zt,Zt|=4;try{PA(n,s,o)}finally{Zt=v,j.p=f,k.T=u}}ze=1,bm(),vm(),Am()}}function bm(){if(ze===1){ze=0;var n=rs,s=Ra,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=k.T,k.T=null;var u=j.p;j.p=2;var f=Zt;Zt|=4;try{Qg(s,n);var g=zh,v=sp(n.containerInfo),w=g.focusedElem,D=g.selectionRange;if(v!==w&&w&&w.ownerDocument&&ip(w.ownerDocument.documentElement,w)){if(D!==null&&ru(w)){var I=D.start,Z=D.end;if(Z===void 0&&(Z=I),"selectionStart"in w)w.selectionStart=I,w.selectionEnd=Math.min(Z,w.value.length);else{var W=w.ownerDocument||document,H=W&&W.defaultView||window;if(H.getSelection){var G=H.getSelection(),pt=w.textContent.length,Et=Math.min(D.start,pt),ee=D.end===void 0?Et:Math.min(D.end,pt);!G.extend&&Et>ee&&(v=ee,ee=Et,Et=v);var B=np(w,Et),N=np(w,ee);if(B&&N&&(G.rangeCount!==1||G.anchorNode!==B.node||G.anchorOffset!==B.offset||G.focusNode!==N.node||G.focusOffset!==N.offset)){var U=W.createRange();U.setStart(B.node,B.offset),G.removeAllRanges(),Et>ee?(G.addRange(U),G.extend(N.node,N.offset)):(U.setEnd(N.node,N.offset),G.addRange(U))}}}}for(W=[],G=w;G=G.parentNode;)G.nodeType===1&&W.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<W.length;w++){var K=W[w];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}Il=!!Nh,zh=Nh=null}finally{Zt=f,j.p=u,k.T=o}}n.current=s,ze=2}}function vm(){if(ze===2){ze=0;var n=rs,s=Ra,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=k.T,k.T=null;var u=j.p;j.p=2;var f=Zt;Zt|=4;try{Xg(n,s.alternate,s)}finally{Zt=f,j.p=u,k.T=o}}ze=3}}function Am(){if(ze===4||ze===3){ze=0,ct();var n=rs,s=Ra,o=Fi,u=rm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ze=5:(ze=0,Ra=rs=null,_m(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(as=null),jc(o),s=s.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(_i,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=k.T,f=j.p,j.p=2,k.T=null;try{for(var g=n.onRecoverableError,v=0;v<u.length;v++){var w=u[v];g(w.value,{componentStack:w.stack})}}finally{k.T=s,j.p=f}}(Fi&3)!==0&&Dl(),ci(n),f=n.pendingLanes,(o&261930)!==0&&(f&42)!==0?n===_h?Fr++:(Fr=0,_h=n):Fr=0,Ur(0)}}function _m(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,vr(s)))}function Dl(){return bm(),vm(),Am(),Sm()}function Sm(){if(ze!==5)return!1;var n=rs,s=vh;vh=0;var o=jc(Fi),u=k.T,f=j.p;try{j.p=32>o?32:o,k.T=null,o=Ah,Ah=null;var g=rs,v=Fi;if(ze=0,Ra=rs=null,Fi=0,(Zt&6)!==0)throw Error(i(331));var w=Zt;if(Zt|=4,im(g.current),tm(g,g.current,v,o),Zt=w,Ur(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(_i,g)}catch{}return!0}finally{j.p=f,k.T=u,_m(n,s)}}function wm(n,s,o){s=Pn(o,s),s=Ju(n.stateNode,s,2),n=Ji(n,s,2),n!==null&&(ar(n,2),ci(n))}function Qt(n,s,o){if(n.tag===3)wm(n,n,o);else for(;s!==null;){if(s.tag===3){wm(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(as===null||!as.has(u))){n=Pn(o,n),o=Eg(2),u=Ji(s,o,2),u!==null&&(Tg(o,u,s,n),ar(u,2),ci(u));break}}s=s.return}}function Eh(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new IA;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(mh=!0,f.add(o),n=qA.bind(null,n,s,o),s.then(n,n))}function qA(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ie===n&&(It&o)===o&&(Se===4||Se===3&&(It&62914560)===It&&300>it()-Sl?(Zt&2)===0&&ka(n,0):yh|=o,Ma===It&&(Ma=0)),ci(n)}function Em(n,s){s===0&&(s=bf()),n=Ts(n,s),n!==null&&(ar(n,s),ci(n))}function $A(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),Em(n,o)}function XA(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),Em(n,o)}function YA(n,s){return M(n,s)}var Ml=null,La=null,Th=!1,Rl=!1,xh=!1,ls=0;function ci(n){n!==La&&n.next===null&&(La===null?Ml=La=n:La=La.next=n),Rl=!0,Th||(Th=!0,KA())}function Ur(n,s){if(!xh&&Rl){xh=!0;do for(var o=!1,u=Ml;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var v=u.suspendedLanes,w=u.pingedLanes;g=(1<<31-en(42|n)+1)-1,g&=f&~(v&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,Dm(u,g))}else g=It,g=No(u,u===ie?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||sr(u,g)||(o=!0,Dm(u,g));u=u.next}while(o);xh=!1}}function ZA(){Tm()}function Tm(){Rl=Th=!1;var n=0;ls!==0&&r_()&&(n=ls);for(var s=it(),o=null,u=Ml;u!==null;){var f=u.next,g=xm(u,s);g===0?(u.next=null,o===null?Ml=f:o.next=f,f===null&&(La=o)):(o=u,(n!==0||(g&3)!==0)&&(Rl=!0)),u=f}ze!==0&&ze!==5||Ur(n),ls!==0&&(ls=0)}function xm(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var v=31-en(g),w=1<<v,D=f[v];D===-1?((w&o)===0||(w&u)!==0)&&(f[v]=S0(w,s)):D<=s&&(n.expiredLanes|=w),g&=~w}if(s=ie,o=It,o=No(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(Wt===2||Wt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&F(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||sr(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&F(u),jc(o)){case 2:case 8:o=Lt;break;case 32:o=Bt;break;case 268435456:o=Yn;break;default:o=Bt}return u=Cm.bind(null,n),o=M(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&F(u),n.callbackPriority=2,n.callbackNode=null,2}function Cm(n,s){if(ze!==0&&ze!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Dl()&&n.callbackNode!==o)return null;var u=It;return u=No(n,n===ie?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(lm(n,u,s),xm(n,it()),n.callbackNode!=null&&n.callbackNode===o?Cm.bind(null,n):null)}function Dm(n,s){if(Dl())return null;lm(n,s,!0)}function KA(){l_(function(){(Zt&6)!==0?M(At,ZA):Tm()})}function Ch(){if(ls===0){var n=ba;n===0&&(n=ko,ko<<=1,(ko&261888)===0&&(ko=256)),ls=n}return ls}function Mm(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Fo(""+n)}function Rm(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function WA(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var g=Mm((f[un]||null).action),v=u.submitter;v&&(s=(s=v[un]||null)?Mm(s.formAction):v.getAttribute("formAction"),s!==null&&(g=s,v=null));var w=new Ho("action","action",null,u,f);n.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ls!==0){var D=v?Rm(f,v):new FormData(f);Xu(o,{pending:!0,data:D,method:f.method,action:g},null,D)}}else typeof g=="function"&&(w.preventDefault(),D=v?Rm(f,v):new FormData(f),Xu(o,{pending:!0,data:D,method:f.method,action:g},g,D))},currentTarget:f}]})}}for(var Dh=0;Dh<uu.length;Dh++){var Mh=uu[Dh],QA=Mh.toLowerCase(),JA=Mh[0].toUpperCase()+Mh.slice(1);Zn(QA,"on"+JA)}Zn(op,"onAnimationEnd"),Zn(lp,"onAnimationIteration"),Zn(cp,"onAnimationStart"),Zn("dblclick","onDoubleClick"),Zn("focusin","onFocus"),Zn("focusout","onBlur"),Zn(gA,"onTransitionRun"),Zn(mA,"onTransitionStart"),Zn(yA,"onTransitionCancel"),Zn(up,"onTransitionEnd"),sa("onMouseEnter",["mouseout","mouseover"]),sa("onMouseLeave",["mouseout","mouseover"]),sa("onPointerEnter",["pointerout","pointerover"]),sa("onPointerLeave",["pointerout","pointerover"]),_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_s("onBeforeInput",["compositionend","keypress","textInput","paste"]),_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ir));function km(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;t:{var g=void 0;if(s)for(var v=u.length-1;0<=v;v--){var w=u[v],D=w.instance,I=w.currentTarget;if(w=w.listener,D!==g&&f.isPropagationStopped())break t;g=w,f.currentTarget=I;try{g(f)}catch(Z){qo(Z)}f.currentTarget=null,g=D}else for(v=0;v<u.length;v++){if(w=u[v],D=w.instance,I=w.currentTarget,w=w.listener,D!==g&&f.isPropagationStopped())break t;g=w,f.currentTarget=I;try{g(f)}catch(Z){qo(Z)}f.currentTarget=null,g=D}}}}function Ft(n,s){var o=s[Hc];o===void 0&&(o=s[Hc]=new Set);var u=n+"__bubble";o.has(u)||(Om(s,n,2,!1),o.add(u))}function Rh(n,s,o){var u=0;s&&(u|=4),Om(o,n,u,s)}var kl="_reactListening"+Math.random().toString(36).slice(2);function kh(n){if(!n[kl]){n[kl]=!0,Tf.forEach(function(o){o!=="selectionchange"&&(t_.has(o)||Rh(o,!1,n),Rh(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[kl]||(s[kl]=!0,Rh("selectionchange",!1,s))}}function Om(n,s,o,u){switch(oy(s)){case 2:var f=D_;break;case 8:f=M_;break;default:f=$h}o=f.bind(null,s,o,n),f=void 0,!Wc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function Oh(n,s,o,u,f){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var w=u.stateNode.containerInfo;if(w===f)break;if(v===4)for(v=u.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;w!==null;){if(v=ea(w),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){u=g=v;continue t}w=w.parentNode}}u=u.return}Pf(function(){var I=g,Z=Zc(o),W=[];t:{var H=hp.get(n);if(H!==void 0){var G=Ho,pt=n;switch(n){case"keypress":if(Io(o)===0)break t;case"keydown":case"keyup":G=X0;break;case"focusin":pt="focus",G=eu;break;case"focusout":pt="blur",G=eu;break;case"beforeblur":case"afterblur":G=eu;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=If;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=z0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=K0;break;case op:case lp:case cp:G=F0;break;case up:G=Q0;break;case"scroll":case"scrollend":G=L0;break;case"wheel":G=tA;break;case"copy":case"cut":case"paste":G=I0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Hf;break;case"toggle":case"beforetoggle":G=nA}var Et=(s&4)!==0,ee=!Et&&(n==="scroll"||n==="scrollend"),B=Et?H!==null?H+"Capture":null:H;Et=[];for(var N=I,U;N!==null;){var K=N;if(U=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||U===null||B===null||(K=lr(N,B),K!=null&&Et.push(jr(N,K,U))),ee)break;N=N.return}0<Et.length&&(H=new G(H,pt,null,o,Z),W.push({event:H,listeners:Et}))}}if((s&7)===0){t:{if(H=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",H&&o!==Yc&&(pt=o.relatedTarget||o.fromElement)&&(ea(pt)||pt[ta]))break t;if((G||H)&&(H=Z.window===Z?Z:(H=Z.ownerDocument)?H.defaultView||H.parentWindow:window,G?(pt=o.relatedTarget||o.toElement,G=I,pt=pt?ea(pt):null,pt!==null&&(ee=l(pt),Et=pt.tag,pt!==ee||Et!==5&&Et!==27&&Et!==6)&&(pt=null)):(G=null,pt=I),G!==pt)){if(Et=If,K="onMouseLeave",B="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(Et=Hf,K="onPointerLeave",B="onPointerEnter",N="pointer"),ee=G==null?H:or(G),U=pt==null?H:or(pt),H=new Et(K,N+"leave",G,o,Z),H.target=ee,H.relatedTarget=U,K=null,ea(Z)===I&&(Et=new Et(B,N+"enter",pt,o,Z),Et.target=U,Et.relatedTarget=ee,K=Et),ee=K,G&&pt)e:{for(Et=e_,B=G,N=pt,U=0,K=B;K;K=Et(K))U++;K=0;for(var St=N;St;St=Et(St))K++;for(;0<U-K;)B=Et(B),U--;for(;0<K-U;)N=Et(N),K--;for(;U--;){if(B===N||N!==null&&B===N.alternate){Et=B;break e}B=Et(B),N=Et(N)}Et=null}else Et=null;G!==null&&Lm(W,H,G,Et,!1),pt!==null&&ee!==null&&Lm(W,ee,pt,Et,!0)}}t:{if(H=I?or(I):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var Xt=Kf;else if(Yf(H))if(Wf)Xt=dA;else{Xt=uA;var yt=cA}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?I&&Xc(I.elementType)&&(Xt=Kf):Xt=hA;if(Xt&&(Xt=Xt(n,I))){Zf(W,Xt,o,Z);break t}yt&&yt(n,H,I),n==="focusout"&&I&&H.type==="number"&&I.memoizedProps.value!=null&&$c(H,"number",H.value)}switch(yt=I?or(I):window,n){case"focusin":(Yf(yt)||yt.contentEditable==="true")&&(ua=yt,ou=I,mr=null);break;case"focusout":mr=ou=ua=null;break;case"mousedown":lu=!0;break;case"contextmenu":case"mouseup":case"dragend":lu=!1,ap(W,o,Z);break;case"selectionchange":if(pA)break;case"keydown":case"keyup":ap(W,o,Z)}var Nt;if(iu)t:{switch(n){case"compositionstart":var jt="onCompositionStart";break t;case"compositionend":jt="onCompositionEnd";break t;case"compositionupdate":jt="onCompositionUpdate";break t}jt=void 0}else ca?$f(n,o)&&(jt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(jt="onCompositionStart");jt&&(Vf&&o.locale!=="ko"&&(ca||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&ca&&(Nt=Ff()):($i=Z,Qc="value"in $i?$i.value:$i.textContent,ca=!0)),yt=Ol(I,jt),0<yt.length&&(jt=new jf(jt,n,null,o,Z),W.push({event:jt,listeners:yt}),Nt?jt.data=Nt:(Nt=Xf(o),Nt!==null&&(jt.data=Nt)))),(Nt=sA?aA(n,o):rA(n,o))&&(jt=Ol(I,"onBeforeInput"),0<jt.length&&(yt=new jf("onBeforeInput","beforeinput",null,o,Z),W.push({event:yt,listeners:jt}),yt.data=Nt)),WA(W,n,I,o,Z)}km(W,s)})}function jr(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Ol(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=lr(n,o),f!=null&&u.unshift(jr(n,f,g)),f=lr(n,s),f!=null&&u.push(jr(n,f,g))),n.tag===3)return u;n=n.return}return[]}function e_(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Lm(n,s,o,u,f){for(var g=s._reactName,v=[];o!==null&&o!==u;){var w=o,D=w.alternate,I=w.stateNode;if(w=w.tag,D!==null&&D===u)break;w!==5&&w!==26&&w!==27||I===null||(D=I,f?(I=lr(o,g),I!=null&&v.unshift(jr(o,I,D))):f||(I=lr(o,g),I!=null&&v.push(jr(o,I,D)))),o=o.return}v.length!==0&&n.push({event:s,listeners:v})}var n_=/\r\n?/g,i_=/\u0000|\uFFFD/g;function Nm(n){return(typeof n=="string"?n:""+n).replace(n_,`
`).replace(i_,"")}function zm(n,s){return s=Nm(s),Nm(n)===s}function te(n,s,o,u,f,g){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||ra(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&ra(n,""+u);break;case"className":Bo(n,"class",u);break;case"tabIndex":Bo(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Bo(n,o,u);break;case"style":zf(n,u,g);break;case"data":if(s!=="object"){Bo(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Fo(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&te(n,s,"name",f.name,f,null),te(n,s,"formEncType",f.formEncType,f,null),te(n,s,"formMethod",f.formMethod,f,null),te(n,s,"formTarget",f.formTarget,f,null)):(te(n,s,"encType",f.encType,f,null),te(n,s,"method",f.method,f,null),te(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Fo(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=wi);break;case"onScroll":u!=null&&Ft("scroll",n);break;case"onScrollEnd":u!=null&&Ft("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Fo(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Ft("beforetoggle",n),Ft("toggle",n),zo(n,"popover",u);break;case"xlinkActuate":Si(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Si(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Si(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Si(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Si(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Si(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Si(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Si(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Si(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":zo(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=k0.get(o)||o,zo(n,o,u))}}function Lh(n,s,o,u,f,g){switch(o){case"style":zf(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?ra(n,u):(typeof u=="number"||typeof u=="bigint")&&ra(n,""+u);break;case"onScroll":u!=null&&Ft("scroll",n);break;case"onScrollEnd":u!=null&&Ft("scrollend",n);break;case"onClick":u!=null&&(n.onclick=wi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xf.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),g=n[un]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(s,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break t}o in n?n[o]=u:u===!0?n.setAttribute(o,""):zo(n,o,u)}}}function Ze(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ft("error",n),Ft("load",n);var u=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var v=o[g];if(v!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:te(n,s,g,v,o,null)}}f&&te(n,s,"srcSet",o.srcSet,o,null),u&&te(n,s,"src",o.src,o,null);return;case"input":Ft("invalid",n);var w=g=v=f=null,D=null,I=null;for(u in o)if(o.hasOwnProperty(u)){var Z=o[u];if(Z!=null)switch(u){case"name":f=Z;break;case"type":v=Z;break;case"checked":D=Z;break;case"defaultChecked":I=Z;break;case"value":g=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:te(n,s,u,Z,o,null)}}kf(n,g,w,D,I,v,f,!1);return;case"select":Ft("invalid",n),u=v=g=null;for(f in o)if(o.hasOwnProperty(f)&&(w=o[f],w!=null))switch(f){case"value":g=w;break;case"defaultValue":v=w;break;case"multiple":u=w;default:te(n,s,f,w,o,null)}s=g,o=v,n.multiple=!!u,s!=null?aa(n,!!u,s,!1):o!=null&&aa(n,!!u,o,!0);return;case"textarea":Ft("invalid",n),g=f=u=null;for(v in o)if(o.hasOwnProperty(v)&&(w=o[v],w!=null))switch(v){case"value":u=w;break;case"defaultValue":f=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:te(n,s,v,w,o,null)}Lf(n,u,f,g);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(u=o[D],u!=null))switch(D){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:te(n,s,D,u,o,null)}return;case"dialog":Ft("beforetoggle",n),Ft("toggle",n),Ft("cancel",n),Ft("close",n);break;case"iframe":case"object":Ft("load",n);break;case"video":case"audio":for(u=0;u<Ir.length;u++)Ft(Ir[u],n);break;case"image":Ft("error",n),Ft("load",n);break;case"details":Ft("toggle",n);break;case"embed":case"source":case"link":Ft("error",n),Ft("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in o)if(o.hasOwnProperty(I)&&(u=o[I],u!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:te(n,s,I,u,o,null)}return;default:if(Xc(s)){for(Z in o)o.hasOwnProperty(Z)&&(u=o[Z],u!==void 0&&Lh(n,s,Z,u,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(u=o[w],u!=null&&te(n,s,w,u,o,null))}function s_(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,v=null,w=null,D=null,I=null,Z=null;for(G in o){var W=o[G];if(o.hasOwnProperty(G)&&W!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":D=W;default:u.hasOwnProperty(G)||te(n,s,G,null,u,W)}}for(var H in u){var G=u[H];if(W=o[H],u.hasOwnProperty(H)&&(G!=null||W!=null))switch(H){case"type":g=G;break;case"name":f=G;break;case"checked":I=G;break;case"defaultChecked":Z=G;break;case"value":v=G;break;case"defaultValue":w=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:G!==W&&te(n,s,H,G,u,W)}}qc(n,v,w,D,I,Z,g,f);return;case"select":G=v=w=H=null;for(g in o)if(D=o[g],o.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":G=D;default:u.hasOwnProperty(g)||te(n,s,g,null,u,D)}for(f in u)if(g=u[f],D=o[f],u.hasOwnProperty(f)&&(g!=null||D!=null))switch(f){case"value":H=g;break;case"defaultValue":w=g;break;case"multiple":v=g;default:g!==D&&te(n,s,f,g,u,D)}s=w,o=v,u=G,H!=null?aa(n,!!o,H,!1):!!u!=!!o&&(s!=null?aa(n,!!o,s,!0):aa(n,!!o,o?[]:"",!1));return;case"textarea":G=H=null;for(w in o)if(f=o[w],o.hasOwnProperty(w)&&f!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:te(n,s,w,null,u,f)}for(v in u)if(f=u[v],g=o[v],u.hasOwnProperty(v)&&(f!=null||g!=null))switch(v){case"value":H=f;break;case"defaultValue":G=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&te(n,s,v,f,u,g)}Of(n,H,G);return;case"option":for(var pt in o)if(H=o[pt],o.hasOwnProperty(pt)&&H!=null&&!u.hasOwnProperty(pt))switch(pt){case"selected":n.selected=!1;break;default:te(n,s,pt,null,u,H)}for(D in u)if(H=u[D],G=o[D],u.hasOwnProperty(D)&&H!==G&&(H!=null||G!=null))switch(D){case"selected":n.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:te(n,s,D,H,u,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Et in o)H=o[Et],o.hasOwnProperty(Et)&&H!=null&&!u.hasOwnProperty(Et)&&te(n,s,Et,null,u,H);for(I in u)if(H=u[I],G=o[I],u.hasOwnProperty(I)&&H!==G&&(H!=null||G!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,s));break;default:te(n,s,I,H,u,G)}return;default:if(Xc(s)){for(var ee in o)H=o[ee],o.hasOwnProperty(ee)&&H!==void 0&&!u.hasOwnProperty(ee)&&Lh(n,s,ee,void 0,u,H);for(Z in u)H=u[Z],G=o[Z],!u.hasOwnProperty(Z)||H===G||H===void 0&&G===void 0||Lh(n,s,Z,H,u,G);return}}for(var B in o)H=o[B],o.hasOwnProperty(B)&&H!=null&&!u.hasOwnProperty(B)&&te(n,s,B,null,u,H);for(W in u)H=u[W],G=o[W],!u.hasOwnProperty(W)||H===G||H==null&&G==null||te(n,s,W,H,u,G)}function Bm(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function a_(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],g=f.transferSize,v=f.initiatorType,w=f.duration;if(g&&w&&Bm(v)){for(v=0,w=f.responseEnd,u+=1;u<o.length;u++){var D=o[u],I=D.startTime;if(I>w)break;var Z=D.transferSize,W=D.initiatorType;Z&&Bm(W)&&(D=D.responseEnd,v+=Z*(D<w?1:(w-I)/(D-I)))}if(--u,s+=8*(g+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Nh=null,zh=null;function Ll(n){return n.nodeType===9?n:n.ownerDocument}function Pm(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Fm(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Bh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ph=null;function r_(){var n=window.event;return n&&n.type==="popstate"?n===Ph?!1:(Ph=n,!0):(Ph=null,!1)}var Um=typeof setTimeout=="function"?setTimeout:void 0,o_=typeof clearTimeout=="function"?clearTimeout:void 0,Im=typeof Promise=="function"?Promise:void 0,l_=typeof queueMicrotask=="function"?queueMicrotask:typeof Im<"u"?function(n){return Im.resolve(null).then(n).catch(c_)}:Um;function c_(n){setTimeout(function(){throw n})}function cs(n){return n==="head"}function jm(n,s){var o=s,u=0;do{var f=o.nextSibling;if(n.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(f),Pa(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Hr(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Hr(o);for(var g=o.firstChild;g;){var v=g.nextSibling,w=g.nodeName;g[rr]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=v}}else o==="body"&&Hr(n.ownerDocument.body);o=f}while(o);Pa(s)}function Hm(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Fh(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Fh(o),Vc(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function u_(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[rr])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Hn(n.nextSibling),n===null)break}return null}function h_(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Hn(n.nextSibling),n===null))return null;return n}function Vm(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Hn(n.nextSibling),n===null))return null;return n}function Uh(n){return n.data==="$?"||n.data==="$~"}function Ih(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function d_(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Hn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var jh=null;function Gm(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return Hn(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function qm(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function $m(n,s,o){switch(s=Ll(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Hr(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Vc(n)}var Vn=new Map,Xm=new Set;function Nl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ui=j.d;j.d={f:f_,r:p_,D:g_,C:m_,L:y_,m:b_,X:A_,S:v_,M:__};function f_(){var n=Ui.f(),s=Tl();return n||s}function p_(n){var s=na(n);s!==null&&s.tag===5&&s.type==="form"?ug(s):Ui.r(n)}var Na=typeof document>"u"?null:document;function Ym(n,s,o){var u=Na;if(u&&typeof s=="string"&&s){var f=zn(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),Xm.has(f)||(Xm.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Ze(s,"link",n),Pe(s),u.head.appendChild(s)))}}function g_(n){Ui.D(n),Ym("dns-prefetch",n,null)}function m_(n,s){Ui.C(n,s),Ym("preconnect",n,s)}function y_(n,s,o){Ui.L(n,s,o);var u=Na;if(u&&n&&s){var f='link[rel="preload"][as="'+zn(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+zn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+zn(o.imageSizes)+'"]')):f+='[href="'+zn(n)+'"]';var g=f;switch(s){case"style":g=za(n);break;case"script":g=Ba(n)}Vn.has(g)||(n=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Vn.set(g,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(Vr(g))||s==="script"&&u.querySelector(Gr(g))||(s=u.createElement("link"),Ze(s,"link",n),Pe(s),u.head.appendChild(s)))}}function b_(n,s){Ui.m(n,s);var o=Na;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+zn(u)+'"][href="'+zn(n)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ba(n)}if(!Vn.has(g)&&(n=y({rel:"modulepreload",href:n},s),Vn.set(g,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Gr(g)))return}u=o.createElement("link"),Ze(u,"link",n),Pe(u),o.head.appendChild(u)}}}function v_(n,s,o){Ui.S(n,s,o);var u=Na;if(u&&n){var f=ia(u).hoistableStyles,g=za(n);s=s||"default";var v=f.get(g);if(!v){var w={loading:0,preload:null};if(v=u.querySelector(Vr(g)))w.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Vn.get(g))&&Hh(n,o);var D=v=u.createElement("link");Pe(D),Ze(D,"link",n),D._p=new Promise(function(I,Z){D.onload=I,D.onerror=Z}),D.addEventListener("load",function(){w.loading|=1}),D.addEventListener("error",function(){w.loading|=2}),w.loading|=4,zl(v,s,u)}v={type:"stylesheet",instance:v,count:1,state:w},f.set(g,v)}}}function A_(n,s){Ui.X(n,s);var o=Na;if(o&&n){var u=ia(o).hoistableScripts,f=Ba(n),g=u.get(f);g||(g=o.querySelector(Gr(f)),g||(n=y({src:n,async:!0},s),(s=Vn.get(f))&&Vh(n,s),g=o.createElement("script"),Pe(g),Ze(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function __(n,s){Ui.M(n,s);var o=Na;if(o&&n){var u=ia(o).hoistableScripts,f=Ba(n),g=u.get(f);g||(g=o.querySelector(Gr(f)),g||(n=y({src:n,async:!0,type:"module"},s),(s=Vn.get(f))&&Vh(n,s),g=o.createElement("script"),Pe(g),Ze(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function Zm(n,s,o,u){var f=(f=_t.current)?Nl(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=za(o.href),o=ia(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=za(o.href);var g=ia(f).hoistableStyles,v=g.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,v),(g=f.querySelector(Vr(n)))&&!g._p&&(v.instance=g,v.state.loading=5),Vn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Vn.set(n,o),g||S_(f,n,o,v.state))),s&&u===null)throw Error(i(528,""));return v}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ba(o),o=ia(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function za(n){return'href="'+zn(n)+'"'}function Vr(n){return'link[rel="stylesheet"]['+n+"]"}function Km(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function S_(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Ze(s,"link",o),Pe(s),n.head.appendChild(s))}function Ba(n){return'[src="'+zn(n)+'"]'}function Gr(n){return"script[async]"+n}function Wm(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+zn(o.href)+'"]');if(u)return s.instance=u,Pe(u),u;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Pe(u),Ze(u,"style",f),zl(u,o.precedence,n),s.instance=u;case"stylesheet":f=za(o.href);var g=n.querySelector(Vr(f));if(g)return s.state.loading|=4,s.instance=g,Pe(g),g;u=Km(o),(f=Vn.get(f))&&Hh(u,f),g=(n.ownerDocument||n).createElement("link"),Pe(g);var v=g;return v._p=new Promise(function(w,D){v.onload=w,v.onerror=D}),Ze(g,"link",u),s.state.loading|=4,zl(g,o.precedence,n),s.instance=g;case"script":return g=Ba(o.src),(f=n.querySelector(Gr(g)))?(s.instance=f,Pe(f),f):(u=o,(f=Vn.get(g))&&(u=y({},o),Vh(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Pe(f),Ze(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,zl(u,o.precedence,n));return s.instance}function zl(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,v=0;v<u.length;v++){var w=u[v];if(w.dataset.precedence===s)g=w;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Hh(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Vh(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Bl=null;function Qm(n,s,o){if(Bl===null){var u=new Map,f=Bl=new Map;f.set(o,u)}else f=Bl,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[rr]||g[qe]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var v=g.getAttribute(s)||"";v=n+v;var w=u.get(v);w?w.push(g):u.set(v,[g])}}return u}function Jm(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function w_(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ty(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function E_(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=za(u.href),g=s.querySelector(Vr(f));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Pl.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=g,Pe(g);return}g=s.ownerDocument||s,u=Km(u),(f=Vn.get(f))&&Hh(u,f),g=g.createElement("link"),Pe(g);var v=g;v._p=new Promise(function(w,D){v.onload=w,v.onerror=D}),Ze(g,"link",u),o.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Pl.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Gh=0;function T_(n,s){return n.stylesheets&&n.count===0&&Ul(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Ul(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+s);0<n.imgBytes&&Gh===0&&(Gh=62500*a_());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ul(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>Gh?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Pl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ul(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Fl=null;function Ul(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Fl=new Map,s.forEach(x_,n),Fl=null,Pl.call(n))}function x_(n,s){if(!(s.state.loading&4)){var o=Fl.get(n);if(o)var u=o.get(null);else{o=new Map,Fl.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var v=f[g];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}f=s.instance,v=f.getAttribute("data-precedence"),g=o.get(v)||u,g===u&&o.set(null,f),o.set(v,f),this.count++,u=Pl.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var qr={$$typeof:C,Provider:null,Consumer:null,_currentValue:nt,_currentValue2:nt,_threadCount:0};function C_(n,s,o,u,f,g,v,w,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Uc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uc(0),this.hiddenUpdates=Uc(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function ey(n,s,o,u,f,g,v,w,D,I,Z,W){return n=new C_(n,s,o,v,D,I,Z,W,w),s=1,g===!0&&(s|=24),g=Sn(3,null,null,s),n.current=g,g.stateNode=n,s=wu(),s.refCount++,n.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:s},Cu(g),n}function ny(n){return n?(n=fa,n):fa}function iy(n,s,o,u,f,g){f=ny(f),u.context===null?u.context=f:u.pendingContext=f,u=Qi(s),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=Ji(n,u,s),o!==null&&(mn(o,n,s),wr(o,n,s))}function sy(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function qh(n,s){sy(n,s),(n=n.alternate)&&sy(n,s)}function ay(n){if(n.tag===13||n.tag===31){var s=Ts(n,67108864);s!==null&&mn(s,n,67108864),qh(n,67108864)}}function ry(n){if(n.tag===13||n.tag===31){var s=Cn();s=Ic(s);var o=Ts(n,s);o!==null&&mn(o,n,s),qh(n,s)}}var Il=!0;function D_(n,s,o,u){var f=k.T;k.T=null;var g=j.p;try{j.p=2,$h(n,s,o,u)}finally{j.p=g,k.T=f}}function M_(n,s,o,u){var f=k.T;k.T=null;var g=j.p;try{j.p=8,$h(n,s,o,u)}finally{j.p=g,k.T=f}}function $h(n,s,o,u){if(Il){var f=Xh(u);if(f===null)Oh(n,s,u,jl,o),ly(n,u);else if(k_(f,n,s,o,u))u.stopPropagation();else if(ly(n,u),s&4&&-1<R_.indexOf(n)){for(;f!==null;){var g=na(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var v=As(g.pendingLanes);if(v!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;v;){var D=1<<31-en(v);w.entanglements[1]|=D,v&=~D}ci(g),(Zt&6)===0&&(wl=it()+500,Ur(0))}}break;case 31:case 13:w=Ts(g,2),w!==null&&mn(w,g,2),Tl(),qh(g,2)}if(g=Xh(u),g===null&&Oh(n,s,u,jl,o),g===f)break;f=g}f!==null&&u.stopPropagation()}else Oh(n,s,u,null,o)}}function Xh(n){return n=Zc(n),Yh(n)}var jl=null;function Yh(n){if(jl=null,n=ea(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=h(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return jl=n,null}function oy(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(st()){case At:return 2;case Lt:return 8;case Bt:case me:return 32;case Yn:return 268435456;default:return 32}default:return 32}}var Zh=!1,us=null,hs=null,ds=null,$r=new Map,Xr=new Map,fs=[],R_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ly(n,s){switch(n){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":$r.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xr.delete(s.pointerId)}}function Yr(n,s,o,u,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},s!==null&&(s=na(s),s!==null&&ay(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function k_(n,s,o,u,f){switch(s){case"focusin":return us=Yr(us,n,s,o,u,f),!0;case"dragenter":return hs=Yr(hs,n,s,o,u,f),!0;case"mouseover":return ds=Yr(ds,n,s,o,u,f),!0;case"pointerover":var g=f.pointerId;return $r.set(g,Yr($r.get(g)||null,n,s,o,u,f)),!0;case"gotpointercapture":return g=f.pointerId,Xr.set(g,Yr(Xr.get(g)||null,n,s,o,u,f)),!0}return!1}function cy(n){var s=ea(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,wf(n.priority,function(){ry(o)});return}}else if(s===31){if(s=h(o),s!==null){n.blockedOn=s,wf(n.priority,function(){ry(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Hl(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Xh(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Yc=u,o.target.dispatchEvent(u),Yc=null}else return s=na(o),s!==null&&ay(s),n.blockedOn=o,!1;s.shift()}return!0}function uy(n,s,o){Hl(n)&&o.delete(s)}function O_(){Zh=!1,us!==null&&Hl(us)&&(us=null),hs!==null&&Hl(hs)&&(hs=null),ds!==null&&Hl(ds)&&(ds=null),$r.forEach(uy),Xr.forEach(uy)}function Vl(n,s){n.blockedOn===s&&(n.blockedOn=null,Zh||(Zh=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,O_)))}var Gl=null;function hy(n){Gl!==n&&(Gl=n,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Gl===n&&(Gl=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(Yh(u||o)===null)continue;break}var g=na(o);g!==null&&(n.splice(s,3),s-=3,Xu(g,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Pa(n){function s(D){return Vl(D,n)}us!==null&&Vl(us,n),hs!==null&&Vl(hs,n),ds!==null&&Vl(ds,n),$r.forEach(s),Xr.forEach(s);for(var o=0;o<fs.length;o++){var u=fs[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<fs.length&&(o=fs[0],o.blockedOn===null);)cy(o),o.blockedOn===null&&fs.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],v=f[un]||null;if(typeof g=="function")v||hy(o);else if(v){var w=null;if(g&&g.hasAttribute("formAction")){if(f=g,v=g[un]||null)w=v.formAction;else if(Yh(f)!==null)continue}else w=v.action;typeof w=="function"?o[u+1]=w:(o.splice(u,3),u-=3),hy(o)}}}function dy(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function s(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),f!==null&&(f(),f=null)}}}function Kh(n){this._internalRoot=n}ql.prototype.render=Kh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Cn();iy(o,u,n,s,null,null)},ql.prototype.unmount=Kh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;iy(n.current,2,null,n,null,null),Tl(),s[ta]=null}};function ql(n){this._internalRoot=n}ql.prototype.unstable_scheduleHydration=function(n){if(n){var s=Sf();n={blockedOn:null,target:n,priority:s};for(var o=0;o<fs.length&&s!==0&&s<fs[o].priority;o++);fs.splice(o,0,n),o===0&&cy(n)}};var fy=t.version;if(fy!=="19.2.0")throw Error(i(527,fy,"19.2.0"));j.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=p(s),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var L_={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{_i=$l.inject(L_),Ge=$l}catch{}}return Kr.createRoot=function(n,s){if(!r(n))throw Error(i(299));var o=!1,u="",f=Ag,g=_g,v=Sg;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=ey(n,1,!1,null,null,o,u,null,f,g,v,dy),n[ta]=s.current,kh(n),new Kh(s)},Kr.hydrateRoot=function(n,s,o){if(!r(n))throw Error(i(299));var u=!1,f="",g=Ag,v=_g,w=Sg,D=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),s=ey(n,1,!0,s,o??null,u,f,D,g,v,w,dy),s.context=ny(null),o=s.current,u=Cn(),u=Ic(u),f=Qi(u),f.callback=null,Ji(o,f,u),o=u,s.current.lanes=o,ar(s,o),ci(s),n[ta]=s.current,kh(n),new ql(s)},Kr.version="19.2.0",Kr}var Ty;function V_(){if(Ty)return td.exports;Ty=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),td.exports=H_(),td.exports}var G_=V_();function q_({title:a,subtitle:t,children:e}){return V.jsxs("div",{className:"flex flex-col mx-auto mt-4 sm:mt-6 md:mt-8 items-center w-full overflow-y-auto px-2 sm:px-4",children:[V.jsxs("div",{className:"flex flex-col text-center space-y-1 sm:space-y-2 px-2",children:[V.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl text-(--color-accent) underline",children:a}),t&&V.jsx("h2",{className:"text-lg sm:text-xl md:text-2xl text-(--color-text-muted)",children:t})]}),V.jsx("div",{className:"flex w-full sm:w-11/12 md:w-4/5 mt-4 sm:mt-6 md:mt-8 overflow",children:e})]})}function Hb(){return V.jsxs("div",{className:"flex flex-col space-y-6 sm:space-y-8 md:space-y-12 w-full text-base sm:text-lg mx-auto",children:[V.jsxs("div",{className:"bg-(--color-card) p-3 sm:p-4 rounded-xl border border-(--color-border) gap-1 flex flex-col",children:[V.jsx("h1",{className:"font-semibold text-lg sm:text-xl mb-2",children:"About Me"}),V.jsx("p",{className:"leading-relaxed",children:"Hi! My name is Christian Lester. I am a passionate and aspiring frontend engineer who enjoys creating fun and feature-rich web applications with seamless and stylish front-end designs. I have over 4+ years of experience with using front-end technology and creating web applications."})]}),V.jsxs("div",{className:"bg-(--color-card) p-3 sm:p-4 rounded-xl border border-(--color-border) gap-1 flex flex-col",children:[V.jsx("h1",{className:"font-semibold text-lg sm:text-xl mb-2",children:"Education"}),V.jsx("p",{className:"leading-relaxed",children:"I attended the University of Pittsburgh from 2021-2025 and graduated with a Bachelor's in Computer Science along with a minor in Information Science. My classes and projects focused on various topics such as low-level systems/architecture, data structures/algorithms, web development, AI databases, software engineering practices, etc."})]}),V.jsxs("div",{className:"bg-(--color-card) p-3 sm:p-4 rounded-xl border border-(--color-border) gap-1 flex flex-col",children:[V.jsx("h1",{className:"font-semibold text-lg sm:text-xl mb-2",children:"Experience"}),V.jsx("p",{className:"leading-relaxed",children:"I have over 4+ years of experience working as a programming instructor for multiple STEM-based educational programs. I worked alongside students to help them learn and apply programming fundamentals to create projects focused around their special interests and hobbies. Additionally I developed a web application for a non-profit organization focused on assisting formerly incarcerated individuals with re-entry into society."})]})]})}const Vb=ut.createContext(void 0),Bd=()=>{const a=ut.useContext(Vb);if(a===void 0)throw new Error("useMyContext must be used within a MyContextProvider");return a},$_=({children:a})=>{const[t,e]=ut.useState("dark"),[i,r]=ut.useState({sectionName:"about me",sectionTitle:"About me",sectionDescription:"Description",sectionComponent:V.jsx(Hb,{})}),c={theme:t,setTheme:e,section:i,setSection:r,swapTheme:h=>{e(h),document.documentElement.setAttribute("data-theme",h)}};return V.jsx(Vb.Provider,{value:c,children:a})};function X_(){const{section:a}=Bd();return V.jsx("div",{className:"main-content flex grow w-screen",children:V.jsx(q_,{title:a.sectionTitle,subtitle:a.sectionDescription,children:a.sectionComponent})})}var bo=a=>a.type==="checkbox",Is=a=>a instanceof Date,An=a=>a==null;const Gb=a=>typeof a=="object";var Ne=a=>!An(a)&&!Array.isArray(a)&&Gb(a)&&!Is(a),Y_=a=>Ne(a)&&a.target?bo(a.target)?a.target.checked:a.target.value:a,Z_=a=>a.substring(0,a.search(/\.\d+(\.|$)/))||a,K_=(a,t)=>a.has(Z_(t)),W_=a=>{const t=a.constructor&&a.constructor.prototype;return Ne(t)&&t.hasOwnProperty("isPrototypeOf")},Pd=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ue(a){let t;const e=Array.isArray(a),i=typeof FileList<"u"?a instanceof FileList:!1;if(a instanceof Date)t=new Date(a);else if(!(Pd&&(a instanceof Blob||i))&&(e||Ne(a)))if(t=e?[]:Object.create(Object.getPrototypeOf(a)),!e&&!W_(a))t=a;else for(const r in a)a.hasOwnProperty(r)&&(t[r]=Ue(a[r]));else return a;return t}var vc=a=>/^\w*$/.test(a),Ce=a=>a===void 0,Fd=a=>Array.isArray(a)?a.filter(Boolean):[],Ud=a=>Fd(a.replace(/["|']|\]/g,"").split(/\.|\[/)),gt=(a,t,e)=>{if(!t||!Ne(a))return e;const i=(vc(t)?[t]:Ud(t)).reduce((r,l)=>An(r)?r:r[l],a);return Ce(i)||i===a?Ce(a[t])?e:a[t]:i},gi=a=>typeof a=="boolean",se=(a,t,e)=>{let i=-1;const r=vc(t)?[t]:Ud(t),l=r.length,c=l-1;for(;++i<l;){const h=r[i];let d=e;if(i!==c){const p=a[h];d=Ne(p)||Array.isArray(p)?p:isNaN(+r[i+1])?{}:[]}if(h==="__proto__"||h==="constructor"||h==="prototype")return;a[h]=d,a=a[h]}};const xy={BLUR:"blur",FOCUS_OUT:"focusout"},Jn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ii={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Q_=Dn.createContext(null);Q_.displayName="HookFormContext";var J_=(a,t,e,i=!0)=>{const r={defaultValues:t._defaultValues};for(const l in a)Object.defineProperty(r,l,{get:()=>{const c=l;return t._proxyFormState[c]!==Jn.all&&(t._proxyFormState[c]=!i||Jn.all),a[c]}});return r};const tS=typeof window<"u"?Dn.useLayoutEffect:Dn.useEffect;var On=a=>typeof a=="string",eS=(a,t,e,i,r)=>On(a)?(i&&t.watch.add(a),gt(e,a,r)):Array.isArray(a)?a.map(l=>(i&&t.watch.add(l),gt(e,l))):(i&&(t.watchAll=!0),e),yd=a=>An(a)||!Gb(a);function gs(a,t,e=new WeakSet){if(yd(a)||yd(t))return a===t;if(Is(a)&&Is(t))return a.getTime()===t.getTime();const i=Object.keys(a),r=Object.keys(t);if(i.length!==r.length)return!1;if(e.has(a)||e.has(t))return!0;e.add(a),e.add(t);for(const l of i){const c=a[l];if(!r.includes(l))return!1;if(l!=="ref"){const h=t[l];if(Is(c)&&Is(h)||Ne(c)&&Ne(h)||Array.isArray(c)&&Array.isArray(h)?!gs(c,h,e):c!==h)return!1}}return!0}var Id=(a,t,e,i,r)=>t?{...e[a],types:{...e[a]&&e[a].types?e[a].types:{},[i]:r||!0}}:{},ao=a=>Array.isArray(a)?a:[a],Cy=()=>{let a=[];return{get observers(){return a},next:r=>{for(const l of a)l.next&&l.next(r)},subscribe:r=>(a.push(r),{unsubscribe:()=>{a=a.filter(l=>l!==r)}}),unsubscribe:()=>{a=[]}}};function qb(a,t){const e={};for(const i in a)if(a.hasOwnProperty(i)){const r=a[i],l=t[i];if(r&&Ne(r)&&l){const c=qb(r,l);Ne(c)&&(e[i]=c)}else a[i]&&(e[i]=l)}return e}var on=a=>Ne(a)&&!Object.keys(a).length,jd=a=>a.type==="file",ti=a=>typeof a=="function",cc=a=>{if(!Pd)return!1;const t=a?a.ownerDocument:0;return a instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},$b=a=>a.type==="select-multiple",Hd=a=>a.type==="radio",nS=a=>Hd(a)||bo(a),sd=a=>cc(a)&&a.isConnected;function iS(a,t){const e=t.slice(0,-1).length;let i=0;for(;i<e;)a=Ce(a)?i++:a[t[i++]];return a}function sS(a){for(const t in a)if(a.hasOwnProperty(t)&&!Ce(a[t]))return!1;return!0}function Le(a,t){const e=Array.isArray(t)?t:vc(t)?[t]:Ud(t),i=e.length===1?a:iS(a,e),r=e.length-1,l=e[r];return i&&delete i[l],r!==0&&(Ne(i)&&on(i)||Array.isArray(i)&&sS(i))&&Le(a,e.slice(0,-1)),a}var aS=a=>{for(const t in a)if(ti(a[t]))return!0;return!1};function Xb(a){return Array.isArray(a)||Ne(a)&&!aS(a)}function bd(a,t={}){for(const e in a)Xb(a[e])?(t[e]=Array.isArray(a[e])?[]:{},bd(a[e],t[e])):Ce(a[e])||(t[e]=!0);return t}function Ia(a,t,e){e||(e=bd(t));for(const i in a)Xb(a[i])?Ce(t)||yd(e[i])?e[i]=bd(a[i],Array.isArray(a[i])?[]:{}):Ia(a[i],An(t)?{}:t[i],e[i]):e[i]=!gs(a[i],t[i]);return e}const Dy={value:!1,isValid:!1},My={value:!0,isValid:!0};var Yb=a=>{if(Array.isArray(a)){if(a.length>1){const t=a.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return a[0].checked&&!a[0].disabled?a[0].attributes&&!Ce(a[0].attributes.value)?Ce(a[0].value)||a[0].value===""?My:{value:a[0].value,isValid:!0}:My:Dy}return Dy},Zb=(a,{valueAsNumber:t,valueAsDate:e,setValueAs:i})=>Ce(a)?a:t?a===""?NaN:a&&+a:e&&On(a)?new Date(a):i?i(a):a;const Ry={isValid:!1,value:null};var Kb=a=>Array.isArray(a)?a.reduce((t,e)=>e&&e.checked&&!e.disabled?{isValid:!0,value:e.value}:t,Ry):Ry;function ky(a){const t=a.ref;return jd(t)?t.files:Hd(t)?Kb(a.refs).value:$b(t)?[...t.selectedOptions].map(({value:e})=>e):bo(t)?Yb(a.refs).value:Zb(Ce(t.value)?a.ref.value:t.value,a)}var rS=(a,t,e,i)=>{const r={};for(const l of a){const c=gt(t,l);c&&se(r,l,c._f)}return{criteriaMode:e,names:[...a],fields:r,shouldUseNativeValidation:i}},uc=a=>a instanceof RegExp,Wr=a=>Ce(a)?a:uc(a)?a.source:Ne(a)?uc(a.value)?a.value.source:a.value:a,Oy=a=>({isOnSubmit:!a||a===Jn.onSubmit,isOnBlur:a===Jn.onBlur,isOnChange:a===Jn.onChange,isOnAll:a===Jn.all,isOnTouch:a===Jn.onTouched});const Ly="AsyncFunction";var oS=a=>!!a&&!!a.validate&&!!(ti(a.validate)&&a.validate.constructor.name===Ly||Ne(a.validate)&&Object.values(a.validate).find(t=>t.constructor.name===Ly)),lS=a=>a.mount&&(a.required||a.min||a.max||a.maxLength||a.minLength||a.pattern||a.validate),Ny=(a,t,e)=>!e&&(t.watchAll||t.watch.has(a)||[...t.watch].some(i=>a.startsWith(i)&&/^\.\w+/.test(a.slice(i.length))));const ro=(a,t,e,i)=>{for(const r of e||Object.keys(a)){const l=gt(a,r);if(l){const{_f:c,...h}=l;if(c){if(c.refs&&c.refs[0]&&t(c.refs[0],r)&&!i)return!0;if(c.ref&&t(c.ref,c.name)&&!i)return!0;if(ro(h,t))break}else if(Ne(h)&&ro(h,t))break}}};function zy(a,t,e){const i=gt(a,e);if(i||vc(e))return{error:i,name:e};const r=e.split(".");for(;r.length;){const l=r.join("."),c=gt(t,l),h=gt(a,l);if(c&&!Array.isArray(c)&&e!==l)return{name:e};if(h&&h.type)return{name:l,error:h};if(h&&h.root&&h.root.type)return{name:`${l}.root`,error:h.root};r.pop()}return{name:e}}var cS=(a,t,e,i)=>{e(a);const{name:r,...l}=a;return on(l)||Object.keys(l).length>=Object.keys(t).length||Object.keys(l).find(c=>t[c]===(!i||Jn.all))},uS=(a,t,e)=>!a||!t||a===t||ao(a).some(i=>i&&(e?i===t:i.startsWith(t)||t.startsWith(i))),hS=(a,t,e,i,r)=>r.isOnAll?!1:!e&&r.isOnTouch?!(t||a):(e?i.isOnBlur:r.isOnBlur)?!a:(e?i.isOnChange:r.isOnChange)?a:!0,dS=(a,t)=>!Fd(gt(a,t)).length&&Le(a,t),fS=(a,t,e)=>{const i=ao(gt(a,e));return se(i,"root",t[e]),se(a,e,i),a};function By(a,t,e="validate"){if(On(a)||Array.isArray(a)&&a.every(On)||gi(a)&&!a)return{type:e,message:On(a)?a:"",ref:t}}var Fa=a=>Ne(a)&&!uc(a)?a:{value:a,message:""},Py=async(a,t,e,i,r,l)=>{const{ref:c,refs:h,required:d,maxLength:p,minLength:m,min:y,max:b,pattern:A,validate:S,name:_,valueAsNumber:T,mount:E}=a._f,x=gt(e,_);if(!E||t.has(_))return{};const C=h?h[0]:c,L=at=>{r&&C.reportValidity&&(C.setCustomValidity(gi(at)?"":at||""),C.reportValidity())},O={},P=Hd(c),z=bo(c),$=P||z,Y=(T||jd(c))&&Ce(c.value)&&Ce(x)||cc(c)&&c.value===""||x===""||Array.isArray(x)&&!x.length,et=Id.bind(null,_,i,O),J=(at,ot,rt,ht=Ii.maxLength,k=Ii.minLength)=>{const j=at?ot:rt;O[_]={type:at?ht:k,message:j,ref:c,...et(at?ht:k,j)}};if(l?!Array.isArray(x)||!x.length:d&&(!$&&(Y||An(x))||gi(x)&&!x||z&&!Yb(h).isValid||P&&!Kb(h).isValid)){const{value:at,message:ot}=On(d)?{value:!!d,message:d}:Fa(d);if(at&&(O[_]={type:Ii.required,message:ot,ref:C,...et(Ii.required,ot)},!i))return L(ot),O}if(!Y&&(!An(y)||!An(b))){let at,ot;const rt=Fa(b),ht=Fa(y);if(!An(x)&&!isNaN(x)){const k=c.valueAsNumber||x&&+x;An(rt.value)||(at=k>rt.value),An(ht.value)||(ot=k<ht.value)}else{const k=c.valueAsDate||new Date(x),j=xt=>new Date(new Date().toDateString()+" "+xt),nt=c.type=="time",vt=c.type=="week";On(rt.value)&&x&&(at=nt?j(x)>j(rt.value):vt?x>rt.value:k>new Date(rt.value)),On(ht.value)&&x&&(ot=nt?j(x)<j(ht.value):vt?x<ht.value:k<new Date(ht.value))}if((at||ot)&&(J(!!at,rt.message,ht.message,Ii.max,Ii.min),!i))return L(O[_].message),O}if((p||m)&&!Y&&(On(x)||l&&Array.isArray(x))){const at=Fa(p),ot=Fa(m),rt=!An(at.value)&&x.length>+at.value,ht=!An(ot.value)&&x.length<+ot.value;if((rt||ht)&&(J(rt,at.message,ot.message),!i))return L(O[_].message),O}if(A&&!Y&&On(x)){const{value:at,message:ot}=Fa(A);if(uc(at)&&!x.match(at)&&(O[_]={type:Ii.pattern,message:ot,ref:c,...et(Ii.pattern,ot)},!i))return L(ot),O}if(S){if(ti(S)){const at=await S(x,e),ot=By(at,C);if(ot&&(O[_]={...ot,...et(Ii.validate,ot.message)},!i))return L(ot.message),O}else if(Ne(S)){let at={};for(const ot in S){if(!on(at)&&!i)break;const rt=By(await S[ot](x,e),C,ot);rt&&(at={...rt,...et(ot,rt.message)},L(rt.message),i&&(O[_]=at))}if(!on(at)&&(O[_]={ref:C,...at},!i))return O}}return L(!0),O};const pS={mode:Jn.onSubmit,reValidateMode:Jn.onChange,shouldFocusError:!0};function gS(a={}){let t={...pS,...a},e={submitCount:0,isDirty:!1,isReady:!1,isLoading:ti(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},i={},r=Ne(t.defaultValues)||Ne(t.values)?Ue(t.defaultValues||t.values)||{}:{},l=t.shouldUnregister?{}:Ue(r),c={action:!1,mount:!1,watch:!1},h={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,p=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...m};const b={array:Cy(),state:Cy()},A=t.criteriaMode===Jn.all,S=M=>F=>{clearTimeout(p),p=setTimeout(M,F)},_=async M=>{if(!t.disabled&&(m.isValid||y.isValid||M)){const F=t.resolver?on((await z()).errors):await Y(i,!0);F!==e.isValid&&b.state.next({isValid:F})}},T=(M,F)=>{!t.disabled&&(m.isValidating||m.validatingFields||y.isValidating||y.validatingFields)&&((M||Array.from(h.mount)).forEach(X=>{X&&(F?se(e.validatingFields,X,F):Le(e.validatingFields,X))}),b.state.next({validatingFields:e.validatingFields,isValidating:!on(e.validatingFields)}))},E=(M,F=[],X,ct,it=!0,st=!0)=>{if(ct&&X&&!t.disabled){if(c.action=!0,st&&Array.isArray(gt(i,M))){const At=X(gt(i,M),ct.argA,ct.argB);it&&se(i,M,At)}if(st&&Array.isArray(gt(e.errors,M))){const At=X(gt(e.errors,M),ct.argA,ct.argB);it&&se(e.errors,M,At),dS(e.errors,M)}if((m.touchedFields||y.touchedFields)&&st&&Array.isArray(gt(e.touchedFields,M))){const At=X(gt(e.touchedFields,M),ct.argA,ct.argB);it&&se(e.touchedFields,M,At)}(m.dirtyFields||y.dirtyFields)&&(e.dirtyFields=Ia(r,l)),b.state.next({name:M,isDirty:J(M,F),dirtyFields:e.dirtyFields,errors:e.errors,isValid:e.isValid})}else se(l,M,F)},x=(M,F)=>{se(e.errors,M,F),b.state.next({errors:e.errors})},C=M=>{e.errors=M,b.state.next({errors:e.errors,isValid:!1})},L=(M,F,X,ct)=>{const it=gt(i,M);if(it){const st=gt(l,M,Ce(X)?gt(r,M):X);Ce(st)||ct&&ct.defaultChecked||F?se(l,M,F?st:ky(it._f)):rt(M,st),c.mount&&_()}},O=(M,F,X,ct,it)=>{let st=!1,At=!1;const Lt={name:M};if(!t.disabled){if(!X||ct){(m.isDirty||y.isDirty)&&(At=e.isDirty,e.isDirty=Lt.isDirty=J(),st=At!==Lt.isDirty);const Bt=gs(gt(r,M),F);At=!!gt(e.dirtyFields,M),Bt?Le(e.dirtyFields,M):se(e.dirtyFields,M,!0),Lt.dirtyFields=e.dirtyFields,st=st||(m.dirtyFields||y.dirtyFields)&&At!==!Bt}if(X){const Bt=gt(e.touchedFields,M);Bt||(se(e.touchedFields,M,X),Lt.touchedFields=e.touchedFields,st=st||(m.touchedFields||y.touchedFields)&&Bt!==X)}st&&it&&b.state.next(Lt)}return st?Lt:{}},P=(M,F,X,ct)=>{const it=gt(e.errors,M),st=(m.isValid||y.isValid)&&gi(F)&&e.isValid!==F;if(t.delayError&&X?(d=S(()=>x(M,X)),d(t.delayError)):(clearTimeout(p),d=null,X?se(e.errors,M,X):Le(e.errors,M)),(X?!gs(it,X):it)||!on(ct)||st){const At={...ct,...st&&gi(F)?{isValid:F}:{},errors:e.errors,name:M};e={...e,...At},b.state.next(At)}},z=async M=>{T(M,!0);const F=await t.resolver(l,t.context,rS(M||h.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return T(M),F},$=async M=>{const{errors:F}=await z(M);if(M)for(const X of M){const ct=gt(F,X);ct?se(e.errors,X,ct):Le(e.errors,X)}else e.errors=F;return F},Y=async(M,F,X={valid:!0})=>{for(const ct in M){const it=M[ct];if(it){const{_f:st,...At}=it;if(st){const Lt=h.array.has(st.name),Bt=it._f&&oS(it._f);Bt&&m.validatingFields&&T([st.name],!0);const me=await Py(it,h.disabled,l,A,t.shouldUseNativeValidation&&!F,Lt);if(Bt&&m.validatingFields&&T([st.name]),me[st.name]&&(X.valid=!1,F))break;!F&&(gt(me,st.name)?Lt?fS(e.errors,me,st.name):se(e.errors,st.name,me[st.name]):Le(e.errors,st.name))}!on(At)&&await Y(At,F,X)}}return X.valid},et=()=>{for(const M of h.unMount){const F=gt(i,M);F&&(F._f.refs?F._f.refs.every(X=>!sd(X)):!sd(F._f.ref))&&mt(M)}h.unMount=new Set},J=(M,F)=>!t.disabled&&(M&&F&&se(l,M,F),!gs(xt(),r)),at=(M,F,X)=>eS(M,h,{...c.mount?l:Ce(F)?r:On(M)?{[M]:F}:F},X,F),ot=M=>Fd(gt(c.mount?l:r,M,t.shouldUnregister?gt(r,M,[]):[])),rt=(M,F,X={})=>{const ct=gt(i,M);let it=F;if(ct){const st=ct._f;st&&(!st.disabled&&se(l,M,Zb(F,st)),it=cc(st.ref)&&An(F)?"":F,$b(st.ref)?[...st.ref.options].forEach(At=>At.selected=it.includes(At.value)):st.refs?bo(st.ref)?st.refs.forEach(At=>{(!At.defaultChecked||!At.disabled)&&(Array.isArray(it)?At.checked=!!it.find(Lt=>Lt===At.value):At.checked=it===At.value||!!it)}):st.refs.forEach(At=>At.checked=At.value===it):jd(st.ref)?st.ref.value="":(st.ref.value=it,st.ref.type||b.state.next({name:M,values:Ue(l)})))}(X.shouldDirty||X.shouldTouch)&&O(M,it,X.shouldTouch,X.shouldDirty,!0),X.shouldValidate&&vt(M)},ht=(M,F,X)=>{for(const ct in F){if(!F.hasOwnProperty(ct))return;const it=F[ct],st=M+"."+ct,At=gt(i,st);(h.array.has(M)||Ne(it)||At&&!At._f)&&!Is(it)?ht(st,it,X):rt(st,it,X)}},k=(M,F,X={})=>{const ct=gt(i,M),it=h.array.has(M),st=Ue(F);se(l,M,st),it?(b.array.next({name:M,values:Ue(l)}),(m.isDirty||m.dirtyFields||y.isDirty||y.dirtyFields)&&X.shouldDirty&&b.state.next({name:M,dirtyFields:Ia(r,l),isDirty:J(M,st)})):ct&&!ct._f&&!An(st)?ht(M,st,X):rt(M,st,X),Ny(M,h)&&b.state.next({...e,name:M}),b.state.next({name:c.mount?M:void 0,values:Ue(l)})},j=async M=>{c.mount=!0;const F=M.target;let X=F.name,ct=!0;const it=gt(i,X),st=Bt=>{ct=Number.isNaN(Bt)||Is(Bt)&&isNaN(Bt.getTime())||gs(Bt,gt(l,X,Bt))},At=Oy(t.mode),Lt=Oy(t.reValidateMode);if(it){let Bt,me;const Yn=F.type?ky(it._f):Y_(M),si=M.type===xy.BLUR||M.type===xy.FOCUS_OUT,Pc=!lS(it._f)&&!t.resolver&&!gt(e.errors,X)&&!it._f.deps||hS(si,gt(e.touchedFields,X),e.isSubmitted,Lt,At),_i=Ny(X,h,si);se(l,X,Yn),si?(!F||!F.readOnly)&&(it._f.onBlur&&it._f.onBlur(M),d&&d(0)):it._f.onChange&&it._f.onChange(M);const Ge=O(X,Yn,si),ai=!on(Ge)||_i;if(!si&&b.state.next({name:X,type:M.type,values:Ue(l)}),Pc)return(m.isValid||y.isValid)&&(t.mode==="onBlur"?si&&_():si||_()),ai&&b.state.next({name:X,..._i?{}:Ge});if(!si&&_i&&b.state.next({...e}),t.resolver){const{errors:en}=await z([X]);if(st(Yn),ct){const Fc=zy(e.errors,i,X),Ro=zy(en,i,Fc.name||X);Bt=Ro.error,X=Ro.name,me=on(en)}}else T([X],!0),Bt=(await Py(it,h.disabled,l,A,t.shouldUseNativeValidation))[X],T([X]),st(Yn),ct&&(Bt?me=!1:(m.isValid||y.isValid)&&(me=await Y(i,!0)));ct&&(it._f.deps&&(!Array.isArray(it._f.deps)||it._f.deps.length>0)&&vt(it._f.deps),P(X,me,Bt,Ge))}},nt=(M,F)=>{if(gt(e.errors,F)&&M.focus)return M.focus(),1},vt=async(M,F={})=>{let X,ct;const it=ao(M);if(t.resolver){const st=await $(Ce(M)?M:it);X=on(st),ct=M?!it.some(At=>gt(st,At)):X}else M?(ct=(await Promise.all(it.map(async st=>{const At=gt(i,st);return await Y(At&&At._f?{[st]:At}:At)}))).every(Boolean),!(!ct&&!e.isValid)&&_()):ct=X=await Y(i);return b.state.next({...!On(M)||(m.isValid||y.isValid)&&X!==e.isValid?{}:{name:M},...t.resolver||!M?{isValid:X}:{},errors:e.errors}),F.shouldFocus&&!ct&&ro(i,nt,M?it:h.mount),ct},xt=(M,F)=>{let X={...c.mount?l:r};return F&&(X=qb(F.dirtyFields?e.dirtyFields:e.touchedFields,X)),Ce(M)?X:On(M)?gt(X,M):M.map(ct=>gt(X,ct))},R=(M,F)=>({invalid:!!gt((F||e).errors,M),isDirty:!!gt((F||e).dirtyFields,M),error:gt((F||e).errors,M),isValidating:!!gt(e.validatingFields,M),isTouched:!!gt((F||e).touchedFields,M)}),q=M=>{M&&ao(M).forEach(F=>Le(e.errors,F)),b.state.next({errors:M?e.errors:{}})},Q=(M,F,X)=>{const ct=(gt(i,M,{_f:{}})._f||{}).ref,it=gt(e.errors,M)||{},{ref:st,message:At,type:Lt,...Bt}=it;se(e.errors,M,{...Bt,...F,ref:ct}),b.state.next({name:M,errors:e.errors,isValid:!1}),X&&X.shouldFocus&&ct&&ct.focus&&ct.focus()},lt=(M,F)=>ti(M)?b.state.subscribe({next:X=>"values"in X&&M(at(void 0,F),X)}):at(M,F,!0),bt=M=>b.state.subscribe({next:F=>{uS(M.name,F.name,M.exact)&&cS(F,M.formState||m,ni,M.reRenderRoot)&&M.callback({values:{...l},...e,...F,defaultValues:r})}}).unsubscribe,_t=M=>(c.mount=!0,y={...y,...M.formState},bt({...M,formState:y})),mt=(M,F={})=>{for(const X of M?ao(M):h.mount)h.mount.delete(X),h.array.delete(X),F.keepValue||(Le(i,X),Le(l,X)),!F.keepError&&Le(e.errors,X),!F.keepDirty&&Le(e.dirtyFields,X),!F.keepTouched&&Le(e.touchedFields,X),!F.keepIsValidating&&Le(e.validatingFields,X),!t.shouldUnregister&&!F.keepDefaultValue&&Le(r,X);b.state.next({values:Ue(l)}),b.state.next({...e,...F.keepDirty?{isDirty:J()}:{}}),!F.keepIsValid&&_()},Kt=({disabled:M,name:F})=>{(gi(M)&&c.mount||M||h.disabled.has(F))&&(M?h.disabled.add(F):h.disabled.delete(F))},Ot=(M,F={})=>{let X=gt(i,M);const ct=gi(F.disabled)||gi(t.disabled);return se(i,M,{...X||{},_f:{...X&&X._f?X._f:{ref:{name:M}},name:M,mount:!0,...F}}),h.mount.add(M),X?Kt({disabled:gi(F.disabled)?F.disabled:t.disabled,name:M}):L(M,!0,F.value),{...ct?{disabled:F.disabled||t.disabled}:{},...t.progressive?{required:!!F.required,min:Wr(F.min),max:Wr(F.max),minLength:Wr(F.minLength),maxLength:Wr(F.maxLength),pattern:Wr(F.pattern)}:{},name:M,onChange:j,onBlur:j,ref:it=>{if(it){Ot(M,F),X=gt(i,M);const st=Ce(it.value)&&it.querySelectorAll&&it.querySelectorAll("input,select,textarea")[0]||it,At=nS(st),Lt=X._f.refs||[];if(At?Lt.find(Bt=>Bt===st):st===X._f.ref)return;se(i,M,{_f:{...X._f,...At?{refs:[...Lt.filter(sd),st,...Array.isArray(gt(r,M))?[{}]:[]],ref:{type:st.type,name:M}}:{ref:st}}}),L(M,!1,void 0,st)}else X=gt(i,M,{}),X._f&&(X._f.mount=!1),(t.shouldUnregister||F.shouldUnregister)&&!(K_(h.array,M)&&c.action)&&h.unMount.add(M)}}},$t=()=>t.shouldFocusError&&ro(i,nt,h.mount),Je=M=>{gi(M)&&(b.state.next({disabled:M}),ro(i,(F,X)=>{const ct=gt(i,X);ct&&(F.disabled=ct._f.disabled||M,Array.isArray(ct._f.refs)&&ct._f.refs.forEach(it=>{it.disabled=ct._f.disabled||M}))},0,!1))},tn=(M,F)=>async X=>{let ct;X&&(X.preventDefault&&X.preventDefault(),X.persist&&X.persist());let it=Ue(l);if(b.state.next({isSubmitting:!0}),t.resolver){const{errors:st,values:At}=await z();e.errors=st,it=Ue(At)}else await Y(i);if(h.disabled.size)for(const st of h.disabled)Le(it,st);if(Le(e.errors,"root"),on(e.errors)){b.state.next({errors:{}});try{await M(it,X)}catch(st){ct=st}}else F&&await F({...e.errors},X),$t(),setTimeout($t);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:on(e.errors)&&!ct,submitCount:e.submitCount+1,errors:e.errors}),ct)throw ct},Ut=(M,F={})=>{gt(i,M)&&(Ce(F.defaultValue)?k(M,Ue(gt(r,M))):(k(M,F.defaultValue),se(r,M,Ue(F.defaultValue))),F.keepTouched||Le(e.touchedFields,M),F.keepDirty||(Le(e.dirtyFields,M),e.isDirty=F.defaultValue?J(M,Ue(gt(r,M))):J()),F.keepError||(Le(e.errors,M),m.isValid&&_()),b.state.next({...e}))},Vt=(M,F={})=>{const X=M?Ue(M):r,ct=Ue(X),it=on(M),st=it?r:ct;if(F.keepDefaultValues||(r=X),!F.keepValues){if(F.keepDirtyValues){const At=new Set([...h.mount,...Object.keys(Ia(r,l))]);for(const Lt of Array.from(At))gt(e.dirtyFields,Lt)?se(st,Lt,gt(l,Lt)):k(Lt,gt(st,Lt))}else{if(Pd&&Ce(M))for(const At of h.mount){const Lt=gt(i,At);if(Lt&&Lt._f){const Bt=Array.isArray(Lt._f.refs)?Lt._f.refs[0]:Lt._f.ref;if(cc(Bt)){const me=Bt.closest("form");if(me){me.reset();break}}}}if(F.keepFieldsRef)for(const At of h.mount)k(At,gt(st,At));else i={}}l=t.shouldUnregister?F.keepDefaultValues?Ue(r):{}:Ue(st),b.array.next({values:{...st}}),b.state.next({values:{...st}})}h={mount:F.keepDirtyValues?h.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!m.isValid||!!F.keepIsValid||!!F.keepDirtyValues||!t.shouldUnregister&&!on(st),c.watch=!!t.shouldUnregister,b.state.next({submitCount:F.keepSubmitCount?e.submitCount:0,isDirty:it?!1:F.keepDirty?e.isDirty:!!(F.keepDefaultValues&&!gs(M,r)),isSubmitted:F.keepIsSubmitted?e.isSubmitted:!1,dirtyFields:it?{}:F.keepDirtyValues?F.keepDefaultValues&&l?Ia(r,l):e.dirtyFields:F.keepDefaultValues&&M?Ia(r,M):F.keepDirty?e.dirtyFields:{},touchedFields:F.keepTouched?e.touchedFields:{},errors:F.keepErrors?e.errors:{},isSubmitSuccessful:F.keepIsSubmitSuccessful?e.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:r})},oe=(M,F)=>Vt(ti(M)?M(l):M,F),he=(M,F={})=>{const X=gt(i,M),ct=X&&X._f;if(ct){const it=ct.refs?ct.refs[0]:ct.ref;it.focus&&(it.focus(),F.shouldSelect&&ti(it.select)&&it.select())}},ni=M=>{e={...e,...M}},ii={control:{register:Ot,unregister:mt,getFieldState:R,handleSubmit:tn,setError:Q,_subscribe:bt,_runSchema:z,_focusError:$t,_getWatch:at,_getDirty:J,_setValid:_,_setFieldArray:E,_setDisabledField:Kt,_setErrors:C,_getFieldArray:ot,_reset:Vt,_resetDefaultValues:()=>ti(t.defaultValues)&&t.defaultValues().then(M=>{oe(M,t.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:et,_disableForm:Je,_subjects:b,_proxyFormState:m,get _fields(){return i},get _formValues(){return l},get _state(){return c},set _state(M){c=M},get _defaultValues(){return r},get _names(){return h},set _names(M){h=M},get _formState(){return e},get _options(){return t},set _options(M){t={...t,...M}}},subscribe:_t,trigger:vt,register:Ot,handleSubmit:tn,watch:lt,setValue:k,getValues:xt,reset:oe,resetField:Ut,clearErrors:q,unregister:mt,setError:Q,setFocus:he,getFieldState:R};return{...ii,formControl:ii}}function mS(a={}){const t=Dn.useRef(void 0),e=Dn.useRef(void 0),[i,r]=Dn.useState({isDirty:!1,isValidating:!1,isLoading:ti(a.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1,isReady:!1,defaultValues:ti(a.defaultValues)?void 0:a.defaultValues});if(!t.current)if(a.formControl)t.current={...a.formControl,formState:i},a.defaultValues&&!ti(a.defaultValues)&&a.formControl.reset(a.defaultValues,a.resetOptions);else{const{formControl:c,...h}=gS(a);t.current={...h,formState:i}}const l=t.current.control;return l._options=a,tS(()=>{const c=l._subscribe({formState:l._proxyFormState,callback:()=>r({...l._formState}),reRenderRoot:!0});return r(h=>({...h,isReady:!0})),l._formState.isReady=!0,c},[l]),Dn.useEffect(()=>l._disableForm(a.disabled),[l,a.disabled]),Dn.useEffect(()=>{a.mode&&(l._options.mode=a.mode),a.reValidateMode&&(l._options.reValidateMode=a.reValidateMode)},[l,a.mode,a.reValidateMode]),Dn.useEffect(()=>{a.errors&&(l._setErrors(a.errors),l._focusError())},[l,a.errors]),Dn.useEffect(()=>{a.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,a.shouldUnregister]),Dn.useEffect(()=>{if(l._proxyFormState.isDirty){const c=l._getDirty();c!==i.isDirty&&l._subjects.state.next({isDirty:c})}},[l,i.isDirty]),Dn.useEffect(()=>{a.values&&!gs(a.values,e.current)?(l._reset(a.values,{keepFieldsRef:!0,...l._options.resetOptions}),e.current=a.values,r(c=>({...c}))):l._resetDefaultValues()},[l,a.values]),Dn.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),t.current.formState=J_(i,l),t.current}const Fy=(a,t,e)=>{if(a&&"reportValidity"in a){const i=gt(e,t);a.setCustomValidity(i&&i.message||""),a.reportValidity()}},vd=(a,t)=>{for(const e in t.fields){const i=t.fields[e];i&&i.ref&&"reportValidity"in i.ref?Fy(i.ref,e,a):i&&i.refs&&i.refs.forEach(r=>Fy(r,e,a))}},Uy=(a,t)=>{t.shouldUseNativeValidation&&vd(a,t);const e={};for(const i in a){const r=gt(t.fields,i),l=Object.assign(a[i]||{},{ref:r&&r.ref});if(yS(t.names||Object.keys(a),i)){const c=Object.assign({},gt(e,i));se(c,"root",l),se(e,i,c)}else se(e,i,l)}return e},yS=(a,t)=>{const e=Iy(t);return a.some(i=>Iy(i).match(`^${e}\\.\\d+`))};function Iy(a){return a.replace(/\]|\[/g,"")}function tt(a,t,e){function i(h,d){var p;Object.defineProperty(h,"_zod",{value:h._zod??{},enumerable:!1}),(p=h._zod).traits??(p.traits=new Set),h._zod.traits.add(a),t(h,d);for(const m in c.prototype)m in h||Object.defineProperty(h,m,{value:c.prototype[m].bind(h)});h._zod.constr=c,h._zod.def=d}const r=e?.Parent??Object;class l extends r{}Object.defineProperty(l,"name",{value:a});function c(h){var d;const p=e?.Parent?new l:this;i(p,h),(d=p._zod).deferred??(d.deferred=[]);for(const m of p._zod.deferred)m();return p}return Object.defineProperty(c,"init",{value:i}),Object.defineProperty(c,Symbol.hasInstance,{value:h=>e?.Parent&&h instanceof e.Parent?!0:h?._zod?.traits?.has(a)}),Object.defineProperty(c,"name",{value:a}),c}class $a extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Wb extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const Qb={};function qs(a){return Qb}function bS(a){const t=Object.values(a).filter(i=>typeof i=="number");return Object.entries(a).filter(([i,r])=>t.indexOf(+i)===-1).map(([i,r])=>r)}function Ad(a,t){return typeof t=="bigint"?t.toString():t}function Vd(a){return{get value(){{const t=a();return Object.defineProperty(this,"value",{value:t}),t}}}}function Gd(a){return a==null}function qd(a){const t=a.startsWith("^")?1:0,e=a.endsWith("$")?a.length-1:a.length;return a.slice(t,e)}const jy=Symbol("evaluating");function le(a,t,e){let i;Object.defineProperty(a,t,{get(){if(i!==jy)return i===void 0&&(i=jy,i=e()),i},set(r){Object.defineProperty(a,t,{value:r})},configurable:!0})}function Ks(a,t,e){Object.defineProperty(a,t,{value:e,writable:!0,enumerable:!0,configurable:!0})}function Ws(...a){const t={};for(const e of a){const i=Object.getOwnPropertyDescriptors(e);Object.assign(t,i)}return Object.defineProperties({},t)}function Hy(a){return JSON.stringify(a)}const Jb="captureStackTrace"in Error?Error.captureStackTrace:(...a)=>{};function hc(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}const vS=Vd(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const a=Function;return new a(""),!0}catch{return!1}});function co(a){if(hc(a)===!1)return!1;const t=a.constructor;if(t===void 0)return!0;const e=t.prototype;return!(hc(e)===!1||Object.prototype.hasOwnProperty.call(e,"isPrototypeOf")===!1)}function tv(a){return co(a)?{...a}:Array.isArray(a)?[...a]:a}const AS=new Set(["string","number","symbol"]);function Ac(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function vs(a,t,e){const i=new a._zod.constr(t??a._zod.def);return(!t||e?.parent)&&(i._zod.parent=a),i}function Ct(a){const t=a;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function _S(a){return Object.keys(a).filter(t=>a[t]._zod.optin==="optional"&&a[t]._zod.optout==="optional")}function SS(a,t){const e=a._zod.def,i=Ws(a._zod.def,{get shape(){const r={};for(const l in t){if(!(l in e.shape))throw new Error(`Unrecognized key: "${l}"`);t[l]&&(r[l]=e.shape[l])}return Ks(this,"shape",r),r},checks:[]});return vs(a,i)}function wS(a,t){const e=a._zod.def,i=Ws(a._zod.def,{get shape(){const r={...a._zod.def.shape};for(const l in t){if(!(l in e.shape))throw new Error(`Unrecognized key: "${l}"`);t[l]&&delete r[l]}return Ks(this,"shape",r),r},checks:[]});return vs(a,i)}function ES(a,t){if(!co(t))throw new Error("Invalid input to extend: expected a plain object");const e=a._zod.def.checks;if(e&&e.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const r=Ws(a._zod.def,{get shape(){const l={...a._zod.def.shape,...t};return Ks(this,"shape",l),l},checks:[]});return vs(a,r)}function TS(a,t){if(!co(t))throw new Error("Invalid input to safeExtend: expected a plain object");const e={...a._zod.def,get shape(){const i={...a._zod.def.shape,...t};return Ks(this,"shape",i),i},checks:a._zod.def.checks};return vs(a,e)}function xS(a,t){const e=Ws(a._zod.def,{get shape(){const i={...a._zod.def.shape,...t._zod.def.shape};return Ks(this,"shape",i),i},get catchall(){return t._zod.def.catchall},checks:[]});return vs(a,e)}function CS(a,t,e){const i=Ws(t._zod.def,{get shape(){const r=t._zod.def.shape,l={...r};if(e)for(const c in e){if(!(c in r))throw new Error(`Unrecognized key: "${c}"`);e[c]&&(l[c]=a?new a({type:"optional",innerType:r[c]}):r[c])}else for(const c in r)l[c]=a?new a({type:"optional",innerType:r[c]}):r[c];return Ks(this,"shape",l),l},checks:[]});return vs(t,i)}function DS(a,t,e){const i=Ws(t._zod.def,{get shape(){const r=t._zod.def.shape,l={...r};if(e)for(const c in e){if(!(c in l))throw new Error(`Unrecognized key: "${c}"`);e[c]&&(l[c]=new a({type:"nonoptional",innerType:r[c]}))}else for(const c in r)l[c]=new a({type:"nonoptional",innerType:r[c]});return Ks(this,"shape",l),l},checks:[]});return vs(t,i)}function Va(a,t=0){if(a.aborted===!0)return!0;for(let e=t;e<a.issues.length;e++)if(a.issues[e]?.continue!==!0)return!0;return!1}function ev(a,t){return t.map(e=>{var i;return(i=e).path??(i.path=[]),e.path.unshift(a),e})}function Xl(a){return typeof a=="string"?a:a?.message}function $s(a,t,e){const i={...a,path:a.path??[]};if(!a.message){const r=Xl(a.inst?._zod.def?.error?.(a))??Xl(t?.error?.(a))??Xl(e.customError?.(a))??Xl(e.localeError?.(a))??"Invalid input";i.message=r}return delete i.inst,delete i.continue,t?.reportInput||delete i.input,i}function $d(a){return Array.isArray(a)?"array":typeof a=="string"?"string":"unknown"}function uo(...a){const[t,e,i]=a;return typeof t=="string"?{message:t,code:"custom",input:e,inst:i}:{...t}}const nv=(a,t)=>{a.name="$ZodError",Object.defineProperty(a,"_zod",{value:a._zod,enumerable:!1}),Object.defineProperty(a,"issues",{value:t,enumerable:!1}),a.message=JSON.stringify(t,Ad,2),Object.defineProperty(a,"toString",{value:()=>a.message,enumerable:!1})},Xd=tt("$ZodError",nv),_c=tt("$ZodError",nv,{Parent:Error});function MS(a,t=e=>e.message){const e={},i=[];for(const r of a.issues)r.path.length>0?(e[r.path[0]]=e[r.path[0]]||[],e[r.path[0]].push(t(r))):i.push(t(r));return{formErrors:i,fieldErrors:e}}function RS(a,t=e=>e.message){const e={_errors:[]},i=r=>{for(const l of r.issues)if(l.code==="invalid_union"&&l.errors.length)l.errors.map(c=>i({issues:c}));else if(l.code==="invalid_key")i({issues:l.issues});else if(l.code==="invalid_element")i({issues:l.issues});else if(l.path.length===0)e._errors.push(t(l));else{let c=e,h=0;for(;h<l.path.length;){const d=l.path[h];h===l.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(t(l))):c[d]=c[d]||{_errors:[]},c=c[d],h++}}};return i(a),e}const Sc=a=>(t,e,i,r)=>{const l=i?Object.assign(i,{async:!1}):{async:!1},c=t._zod.run({value:e,issues:[]},l);if(c instanceof Promise)throw new $a;if(c.issues.length){const h=new(r?.Err??a)(c.issues.map(d=>$s(d,l,qs())));throw Jb(h,r?.callee),h}return c.value},kS=Sc(_c),wc=a=>async(t,e,i,r)=>{const l=i?Object.assign(i,{async:!0}):{async:!0};let c=t._zod.run({value:e,issues:[]},l);if(c instanceof Promise&&(c=await c),c.issues.length){const h=new(r?.Err??a)(c.issues.map(d=>$s(d,l,qs())));throw Jb(h,r?.callee),h}return c.value},OS=wc(_c),Ec=a=>(t,e,i)=>{const r=i?{...i,async:!1}:{async:!1},l=t._zod.run({value:e,issues:[]},r);if(l instanceof Promise)throw new $a;return l.issues.length?{success:!1,error:new(a??Xd)(l.issues.map(c=>$s(c,r,qs())))}:{success:!0,data:l.value}},LS=Ec(_c),Tc=a=>async(t,e,i)=>{const r=i?Object.assign(i,{async:!0}):{async:!0};let l=t._zod.run({value:e,issues:[]},r);return l instanceof Promise&&(l=await l),l.issues.length?{success:!1,error:new a(l.issues.map(c=>$s(c,r,qs())))}:{success:!0,data:l.value}},NS=Tc(_c),zS=a=>(t,e,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Sc(a)(t,e,r)},BS=a=>(t,e,i)=>Sc(a)(t,e,i),PS=a=>async(t,e,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return wc(a)(t,e,r)},FS=a=>async(t,e,i)=>wc(a)(t,e,i),US=a=>(t,e,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Ec(a)(t,e,r)},IS=a=>(t,e,i)=>Ec(a)(t,e,i),jS=a=>async(t,e,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Tc(a)(t,e,r)},HS=a=>async(t,e,i)=>Tc(a)(t,e,i),VS=/^[cC][^\s-]{8,}$/,GS=/^[0-9a-z]+$/,qS=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,$S=/^[0-9a-vA-V]{20}$/,XS=/^[A-Za-z0-9]{27}$/,YS=/^[a-zA-Z0-9_-]{21}$/,ZS=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,KS=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Vy=a=>a?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${a}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,WS=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,QS="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function JS(){return new RegExp(QS,"u")}const tw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ew=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,nw=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,iw=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,sw=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,iv=/^[A-Za-z0-9_-]*$/,aw=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,rw=/^\+(?:[0-9]){6,14}[0-9]$/,sv="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ow=new RegExp(`^${sv}$`);function av(a){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof a.precision=="number"?a.precision===-1?`${t}`:a.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${a.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function lw(a){return new RegExp(`^${av(a)}$`)}function cw(a){const t=av({precision:a.precision}),e=["Z"];a.local&&e.push(""),a.offset&&e.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${t}(?:${e.join("|")})`;return new RegExp(`^${sv}T(?:${i})$`)}const uw=a=>{const t=a?`[\\s\\S]{${a?.minimum??0},${a?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},hw=/^[^A-Z]*$/,dw=/^[^a-z]*$/,vi=tt("$ZodCheck",(a,t)=>{var e;a._zod??(a._zod={}),a._zod.def=t,(e=a._zod).onattach??(e.onattach=[])}),fw=tt("$ZodCheckMaxLength",(a,t)=>{var e;vi.init(a,t),(e=a._zod.def).when??(e.when=i=>{const r=i.value;return!Gd(r)&&r.length!==void 0}),a._zod.onattach.push(i=>{const r=i._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(i._zod.bag.maximum=t.maximum)}),a._zod.check=i=>{const r=i.value;if(r.length<=t.maximum)return;const c=$d(r);i.issues.push({origin:c,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:a,continue:!t.abort})}}),pw=tt("$ZodCheckMinLength",(a,t)=>{var e;vi.init(a,t),(e=a._zod.def).when??(e.when=i=>{const r=i.value;return!Gd(r)&&r.length!==void 0}),a._zod.onattach.push(i=>{const r=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(i._zod.bag.minimum=t.minimum)}),a._zod.check=i=>{const r=i.value;if(r.length>=t.minimum)return;const c=$d(r);i.issues.push({origin:c,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:a,continue:!t.abort})}}),gw=tt("$ZodCheckLengthEquals",(a,t)=>{var e;vi.init(a,t),(e=a._zod.def).when??(e.when=i=>{const r=i.value;return!Gd(r)&&r.length!==void 0}),a._zod.onattach.push(i=>{const r=i._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),a._zod.check=i=>{const r=i.value,l=r.length;if(l===t.length)return;const c=$d(r),h=l>t.length;i.issues.push({origin:c,...h?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:i.value,inst:a,continue:!t.abort})}}),xc=tt("$ZodCheckStringFormat",(a,t)=>{var e,i;vi.init(a,t),a._zod.onattach.push(r=>{const l=r._zod.bag;l.format=t.format,t.pattern&&(l.patterns??(l.patterns=new Set),l.patterns.add(t.pattern))}),t.pattern?(e=a._zod).check??(e.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:a,continue:!t.abort})}):(i=a._zod).check??(i.check=()=>{})}),mw=tt("$ZodCheckRegex",(a,t)=>{xc.init(a,t),a._zod.check=e=>{t.pattern.lastIndex=0,!t.pattern.test(e.value)&&e.issues.push({origin:"string",code:"invalid_format",format:"regex",input:e.value,pattern:t.pattern.toString(),inst:a,continue:!t.abort})}}),yw=tt("$ZodCheckLowerCase",(a,t)=>{t.pattern??(t.pattern=hw),xc.init(a,t)}),bw=tt("$ZodCheckUpperCase",(a,t)=>{t.pattern??(t.pattern=dw),xc.init(a,t)}),vw=tt("$ZodCheckIncludes",(a,t)=>{vi.init(a,t);const e=Ac(t.includes),i=new RegExp(typeof t.position=="number"?`^.{${t.position}}${e}`:e);t.pattern=i,a._zod.onattach.push(r=>{const l=r._zod.bag;l.patterns??(l.patterns=new Set),l.patterns.add(i)}),a._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:a,continue:!t.abort})}}),Aw=tt("$ZodCheckStartsWith",(a,t)=>{vi.init(a,t);const e=new RegExp(`^${Ac(t.prefix)}.*`);t.pattern??(t.pattern=e),a._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(e)}),a._zod.check=i=>{i.value.startsWith(t.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:i.value,inst:a,continue:!t.abort})}}),_w=tt("$ZodCheckEndsWith",(a,t)=>{vi.init(a,t);const e=new RegExp(`.*${Ac(t.suffix)}$`);t.pattern??(t.pattern=e),a._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(e)}),a._zod.check=i=>{i.value.endsWith(t.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:i.value,inst:a,continue:!t.abort})}}),Sw=tt("$ZodCheckOverwrite",(a,t)=>{vi.init(a,t),a._zod.check=e=>{e.value=t.tx(e.value)}});class ww{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const i=t.split(`
`).filter(c=>c),r=Math.min(...i.map(c=>c.length-c.trimStart().length)),l=i.map(c=>c.slice(r)).map(c=>" ".repeat(this.indent*2)+c);for(const c of l)this.content.push(c)}compile(){const t=Function,e=this?.args,r=[...(this?.content??[""]).map(l=>`  ${l}`)];return new t(...e,r.join(`
`))}}const Ew={major:4,minor:1,patch:12},Be=tt("$ZodType",(a,t)=>{var e;a??(a={}),a._zod.def=t,a._zod.bag=a._zod.bag||{},a._zod.version=Ew;const i=[...a._zod.def.checks??[]];a._zod.traits.has("$ZodCheck")&&i.unshift(a);for(const r of i)for(const l of r._zod.onattach)l(a);if(i.length===0)(e=a._zod).deferred??(e.deferred=[]),a._zod.deferred?.push(()=>{a._zod.run=a._zod.parse});else{const r=(c,h,d)=>{let p=Va(c),m;for(const y of h){if(y._zod.def.when){if(!y._zod.def.when(c))continue}else if(p)continue;const b=c.issues.length,A=y._zod.check(c);if(A instanceof Promise&&d?.async===!1)throw new $a;if(m||A instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await A,c.issues.length!==b&&(p||(p=Va(c,b)))});else{if(c.issues.length===b)continue;p||(p=Va(c,b))}}return m?m.then(()=>c):c},l=(c,h,d)=>{if(Va(c))return c.aborted=!0,c;const p=r(h,i,d);if(p instanceof Promise){if(d.async===!1)throw new $a;return p.then(m=>a._zod.parse(m,d))}return a._zod.parse(p,d)};a._zod.run=(c,h)=>{if(h.skipChecks)return a._zod.parse(c,h);if(h.direction==="backward"){const p=a._zod.parse({value:c.value,issues:[]},{...h,skipChecks:!0});return p instanceof Promise?p.then(m=>l(m,c,h)):l(p,c,h)}const d=a._zod.parse(c,h);if(d instanceof Promise){if(h.async===!1)throw new $a;return d.then(p=>r(p,i,h))}return r(d,i,h)}}a["~standard"]={validate:r=>{try{const l=LS(a,r);return l.success?{value:l.data}:{issues:l.error?.issues}}catch{return NS(a,r).then(c=>c.success?{value:c.data}:{issues:c.error?.issues})}},vendor:"zod",version:1}}),Yd=tt("$ZodString",(a,t)=>{Be.init(a,t),a._zod.pattern=[...a?._zod.bag?.patterns??[]].pop()??uw(a._zod.bag),a._zod.parse=(e,i)=>{if(t.coerce)try{e.value=String(e.value)}catch{}return typeof e.value=="string"||e.issues.push({expected:"string",code:"invalid_type",input:e.value,inst:a}),e}}),ge=tt("$ZodStringFormat",(a,t)=>{xc.init(a,t),Yd.init(a,t)}),Tw=tt("$ZodGUID",(a,t)=>{t.pattern??(t.pattern=KS),ge.init(a,t)}),xw=tt("$ZodUUID",(a,t)=>{if(t.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(i===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Vy(i))}else t.pattern??(t.pattern=Vy());ge.init(a,t)}),Cw=tt("$ZodEmail",(a,t)=>{t.pattern??(t.pattern=WS),ge.init(a,t)}),Dw=tt("$ZodURL",(a,t)=>{ge.init(a,t),a._zod.check=e=>{try{const i=e.value.trim(),r=new URL(i);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(r.hostname)||e.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:aw.source,input:e.value,inst:a,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||e.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:e.value,inst:a,continue:!t.abort})),t.normalize?e.value=r.href:e.value=i;return}catch{e.issues.push({code:"invalid_format",format:"url",input:e.value,inst:a,continue:!t.abort})}}}),Mw=tt("$ZodEmoji",(a,t)=>{t.pattern??(t.pattern=JS()),ge.init(a,t)}),Rw=tt("$ZodNanoID",(a,t)=>{t.pattern??(t.pattern=YS),ge.init(a,t)}),kw=tt("$ZodCUID",(a,t)=>{t.pattern??(t.pattern=VS),ge.init(a,t)}),Ow=tt("$ZodCUID2",(a,t)=>{t.pattern??(t.pattern=GS),ge.init(a,t)}),Lw=tt("$ZodULID",(a,t)=>{t.pattern??(t.pattern=qS),ge.init(a,t)}),Nw=tt("$ZodXID",(a,t)=>{t.pattern??(t.pattern=$S),ge.init(a,t)}),zw=tt("$ZodKSUID",(a,t)=>{t.pattern??(t.pattern=XS),ge.init(a,t)}),Bw=tt("$ZodISODateTime",(a,t)=>{t.pattern??(t.pattern=cw(t)),ge.init(a,t)}),Pw=tt("$ZodISODate",(a,t)=>{t.pattern??(t.pattern=ow),ge.init(a,t)}),Fw=tt("$ZodISOTime",(a,t)=>{t.pattern??(t.pattern=lw(t)),ge.init(a,t)}),Uw=tt("$ZodISODuration",(a,t)=>{t.pattern??(t.pattern=ZS),ge.init(a,t)}),Iw=tt("$ZodIPv4",(a,t)=>{t.pattern??(t.pattern=tw),ge.init(a,t),a._zod.onattach.push(e=>{const i=e._zod.bag;i.format="ipv4"})}),jw=tt("$ZodIPv6",(a,t)=>{t.pattern??(t.pattern=ew),ge.init(a,t),a._zod.onattach.push(e=>{const i=e._zod.bag;i.format="ipv6"}),a._zod.check=e=>{try{new URL(`http://[${e.value}]`)}catch{e.issues.push({code:"invalid_format",format:"ipv6",input:e.value,inst:a,continue:!t.abort})}}}),Hw=tt("$ZodCIDRv4",(a,t)=>{t.pattern??(t.pattern=nw),ge.init(a,t)}),Vw=tt("$ZodCIDRv6",(a,t)=>{t.pattern??(t.pattern=iw),ge.init(a,t),a._zod.check=e=>{const i=e.value.split("/");try{if(i.length!==2)throw new Error;const[r,l]=i;if(!l)throw new Error;const c=Number(l);if(`${c}`!==l)throw new Error;if(c<0||c>128)throw new Error;new URL(`http://[${r}]`)}catch{e.issues.push({code:"invalid_format",format:"cidrv6",input:e.value,inst:a,continue:!t.abort})}}});function rv(a){if(a==="")return!0;if(a.length%4!==0)return!1;try{return atob(a),!0}catch{return!1}}const Gw=tt("$ZodBase64",(a,t)=>{t.pattern??(t.pattern=sw),ge.init(a,t),a._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),a._zod.check=e=>{rv(e.value)||e.issues.push({code:"invalid_format",format:"base64",input:e.value,inst:a,continue:!t.abort})}});function qw(a){if(!iv.test(a))return!1;const t=a.replace(/[-_]/g,i=>i==="-"?"+":"/"),e=t.padEnd(Math.ceil(t.length/4)*4,"=");return rv(e)}const $w=tt("$ZodBase64URL",(a,t)=>{t.pattern??(t.pattern=iv),ge.init(a,t),a._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),a._zod.check=e=>{qw(e.value)||e.issues.push({code:"invalid_format",format:"base64url",input:e.value,inst:a,continue:!t.abort})}}),Xw=tt("$ZodE164",(a,t)=>{t.pattern??(t.pattern=rw),ge.init(a,t)});function Yw(a,t=null){try{const e=a.split(".");if(e.length!==3)return!1;const[i]=e;if(!i)return!1;const r=JSON.parse(atob(i));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||t&&(!("alg"in r)||r.alg!==t))}catch{return!1}}const Zw=tt("$ZodJWT",(a,t)=>{ge.init(a,t),a._zod.check=e=>{Yw(e.value,t.alg)||e.issues.push({code:"invalid_format",format:"jwt",input:e.value,inst:a,continue:!t.abort})}}),Kw=tt("$ZodUnknown",(a,t)=>{Be.init(a,t),a._zod.parse=e=>e}),Ww=tt("$ZodNever",(a,t)=>{Be.init(a,t),a._zod.parse=(e,i)=>(e.issues.push({expected:"never",code:"invalid_type",input:e.value,inst:a}),e)});function Gy(a,t,e){a.issues.length&&t.issues.push(...ev(e,a.issues)),t.value[e]=a.value}const Qw=tt("$ZodArray",(a,t)=>{Be.init(a,t),a._zod.parse=(e,i)=>{const r=e.value;if(!Array.isArray(r))return e.issues.push({expected:"array",code:"invalid_type",input:r,inst:a}),e;e.value=Array(r.length);const l=[];for(let c=0;c<r.length;c++){const h=r[c],d=t.element._zod.run({value:h,issues:[]},i);d instanceof Promise?l.push(d.then(p=>Gy(p,e,c))):Gy(d,e,c)}return l.length?Promise.all(l).then(()=>e):e}});function dc(a,t,e,i){a.issues.length&&t.issues.push(...ev(e,a.issues)),a.value===void 0?e in i&&(t.value[e]=void 0):t.value[e]=a.value}function ov(a){const t=Object.keys(a.shape);for(const i of t)if(!a.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const e=_S(a.shape);return{...a,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(e)}}function lv(a,t,e,i,r,l){const c=[],h=r.keySet,d=r.catchall._zod,p=d.def.type;for(const m of Object.keys(t)){if(h.has(m))continue;if(p==="never"){c.push(m);continue}const y=d.run({value:t[m],issues:[]},i);y instanceof Promise?a.push(y.then(b=>dc(b,e,m,t))):dc(y,e,m,t)}return c.length&&e.issues.push({code:"unrecognized_keys",keys:c,input:t,inst:l}),a.length?Promise.all(a).then(()=>e):e}const Jw=tt("$ZodObject",(a,t)=>{if(Be.init(a,t),!Object.getOwnPropertyDescriptor(t,"shape")?.get){const h=t.shape;Object.defineProperty(t,"shape",{get:()=>{const d={...h};return Object.defineProperty(t,"shape",{value:d}),d}})}const i=Vd(()=>ov(t));le(a._zod,"propValues",()=>{const h=t.shape,d={};for(const p in h){const m=h[p]._zod;if(m.values){d[p]??(d[p]=new Set);for(const y of m.values)d[p].add(y)}}return d});const r=hc,l=t.catchall;let c;a._zod.parse=(h,d)=>{c??(c=i.value);const p=h.value;if(!r(p))return h.issues.push({expected:"object",code:"invalid_type",input:p,inst:a}),h;h.value={};const m=[],y=c.shape;for(const b of c.keys){const S=y[b]._zod.run({value:p[b],issues:[]},d);S instanceof Promise?m.push(S.then(_=>dc(_,h,b,p))):dc(S,h,b,p)}return l?lv(m,p,h,d,i.value,a):m.length?Promise.all(m).then(()=>h):h}}),t1=tt("$ZodObjectJIT",(a,t)=>{Jw.init(a,t);const e=a._zod.parse,i=Vd(()=>ov(t)),r=b=>{const A=new ww(["shape","payload","ctx"]),S=i.value,_=C=>{const L=Hy(C);return`shape[${L}]._zod.run({ value: input[${L}], issues: [] }, ctx)`};A.write("const input = payload.value;");const T=Object.create(null);let E=0;for(const C of S.keys)T[C]=`key_${E++}`;A.write("const newResult = {};");for(const C of S.keys){const L=T[C],O=Hy(C);A.write(`const ${L} = ${_(C)};`),A.write(`
        if (${L}.issues.length) {
          payload.issues = payload.issues.concat(${L}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${O}, ...iss.path] : [${O}]
          })));
        }
        
        
        if (${L}.value === undefined) {
          if (${O} in input) {
            newResult[${O}] = undefined;
          }
        } else {
          newResult[${O}] = ${L}.value;
        }
        
      `)}A.write("payload.value = newResult;"),A.write("return payload;");const x=A.compile();return(C,L)=>x(b,C,L)};let l;const c=hc,h=!Qb.jitless,p=h&&vS.value,m=t.catchall;let y;a._zod.parse=(b,A)=>{y??(y=i.value);const S=b.value;return c(S)?h&&p&&A?.async===!1&&A.jitless!==!0?(l||(l=r(t.shape)),b=l(b,A),m?lv([],S,b,A,y,a):b):e(b,A):(b.issues.push({expected:"object",code:"invalid_type",input:S,inst:a}),b)}});function qy(a,t,e,i){for(const l of a)if(l.issues.length===0)return t.value=l.value,t;const r=a.filter(l=>!Va(l));return r.length===1?(t.value=r[0].value,r[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:e,errors:a.map(l=>l.issues.map(c=>$s(c,i,qs())))}),t)}const e1=tt("$ZodUnion",(a,t)=>{Be.init(a,t),le(a._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),le(a._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),le(a._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),le(a._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(l=>l._zod.pattern);return new RegExp(`^(${r.map(l=>qd(l.source)).join("|")})$`)}});const e=t.options.length===1,i=t.options[0]._zod.run;a._zod.parse=(r,l)=>{if(e)return i(r,l);let c=!1;const h=[];for(const d of t.options){const p=d._zod.run({value:r.value,issues:[]},l);if(p instanceof Promise)h.push(p),c=!0;else{if(p.issues.length===0)return p;h.push(p)}}return c?Promise.all(h).then(d=>qy(d,r,a,l)):qy(h,r,a,l)}}),n1=tt("$ZodIntersection",(a,t)=>{Be.init(a,t),a._zod.parse=(e,i)=>{const r=e.value,l=t.left._zod.run({value:r,issues:[]},i),c=t.right._zod.run({value:r,issues:[]},i);return l instanceof Promise||c instanceof Promise?Promise.all([l,c]).then(([d,p])=>$y(e,d,p)):$y(e,l,c)}});function _d(a,t){if(a===t)return{valid:!0,data:a};if(a instanceof Date&&t instanceof Date&&+a==+t)return{valid:!0,data:a};if(co(a)&&co(t)){const e=Object.keys(t),i=Object.keys(a).filter(l=>e.indexOf(l)!==-1),r={...a,...t};for(const l of i){const c=_d(a[l],t[l]);if(!c.valid)return{valid:!1,mergeErrorPath:[l,...c.mergeErrorPath]};r[l]=c.data}return{valid:!0,data:r}}if(Array.isArray(a)&&Array.isArray(t)){if(a.length!==t.length)return{valid:!1,mergeErrorPath:[]};const e=[];for(let i=0;i<a.length;i++){const r=a[i],l=t[i],c=_d(r,l);if(!c.valid)return{valid:!1,mergeErrorPath:[i,...c.mergeErrorPath]};e.push(c.data)}return{valid:!0,data:e}}return{valid:!1,mergeErrorPath:[]}}function $y(a,t,e){if(t.issues.length&&a.issues.push(...t.issues),e.issues.length&&a.issues.push(...e.issues),Va(a))return a;const i=_d(t.value,e.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return a.value=i.data,a}const i1=tt("$ZodEnum",(a,t)=>{Be.init(a,t);const e=bS(t.entries),i=new Set(e);a._zod.values=i,a._zod.pattern=new RegExp(`^(${e.filter(r=>AS.has(typeof r)).map(r=>typeof r=="string"?Ac(r):r.toString()).join("|")})$`),a._zod.parse=(r,l)=>{const c=r.value;return i.has(c)||r.issues.push({code:"invalid_value",values:e,input:c,inst:a}),r}}),s1=tt("$ZodTransform",(a,t)=>{Be.init(a,t),a._zod.parse=(e,i)=>{if(i.direction==="backward")throw new Wb(a.constructor.name);const r=t.transform(e.value,e);if(i.async)return(r instanceof Promise?r:Promise.resolve(r)).then(c=>(e.value=c,e));if(r instanceof Promise)throw new $a;return e.value=r,e}});function Xy(a,t){return a.issues.length&&t===void 0?{issues:[],value:void 0}:a}const a1=tt("$ZodOptional",(a,t)=>{Be.init(a,t),a._zod.optin="optional",a._zod.optout="optional",le(a._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),le(a._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${qd(e.source)})?$`):void 0}),a._zod.parse=(e,i)=>{if(t.innerType._zod.optin==="optional"){const r=t.innerType._zod.run(e,i);return r instanceof Promise?r.then(l=>Xy(l,e.value)):Xy(r,e.value)}return e.value===void 0?e:t.innerType._zod.run(e,i)}}),r1=tt("$ZodNullable",(a,t)=>{Be.init(a,t),le(a._zod,"optin",()=>t.innerType._zod.optin),le(a._zod,"optout",()=>t.innerType._zod.optout),le(a._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${qd(e.source)}|null)$`):void 0}),le(a._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),a._zod.parse=(e,i)=>e.value===null?e:t.innerType._zod.run(e,i)}),o1=tt("$ZodDefault",(a,t)=>{Be.init(a,t),a._zod.optin="optional",le(a._zod,"values",()=>t.innerType._zod.values),a._zod.parse=(e,i)=>{if(i.direction==="backward")return t.innerType._zod.run(e,i);if(e.value===void 0)return e.value=t.defaultValue,e;const r=t.innerType._zod.run(e,i);return r instanceof Promise?r.then(l=>Yy(l,t)):Yy(r,t)}});function Yy(a,t){return a.value===void 0&&(a.value=t.defaultValue),a}const l1=tt("$ZodPrefault",(a,t)=>{Be.init(a,t),a._zod.optin="optional",le(a._zod,"values",()=>t.innerType._zod.values),a._zod.parse=(e,i)=>(i.direction==="backward"||e.value===void 0&&(e.value=t.defaultValue),t.innerType._zod.run(e,i))}),c1=tt("$ZodNonOptional",(a,t)=>{Be.init(a,t),le(a._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(i=>i!==void 0)):void 0}),a._zod.parse=(e,i)=>{const r=t.innerType._zod.run(e,i);return r instanceof Promise?r.then(l=>Zy(l,a)):Zy(r,a)}});function Zy(a,t){return!a.issues.length&&a.value===void 0&&a.issues.push({code:"invalid_type",expected:"nonoptional",input:a.value,inst:t}),a}const u1=tt("$ZodCatch",(a,t)=>{Be.init(a,t),le(a._zod,"optin",()=>t.innerType._zod.optin),le(a._zod,"optout",()=>t.innerType._zod.optout),le(a._zod,"values",()=>t.innerType._zod.values),a._zod.parse=(e,i)=>{if(i.direction==="backward")return t.innerType._zod.run(e,i);const r=t.innerType._zod.run(e,i);return r instanceof Promise?r.then(l=>(e.value=l.value,l.issues.length&&(e.value=t.catchValue({...e,error:{issues:l.issues.map(c=>$s(c,i,qs()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(l=>$s(l,i,qs()))},input:e.value}),e.issues=[]),e)}}),h1=tt("$ZodPipe",(a,t)=>{Be.init(a,t),le(a._zod,"values",()=>t.in._zod.values),le(a._zod,"optin",()=>t.in._zod.optin),le(a._zod,"optout",()=>t.out._zod.optout),le(a._zod,"propValues",()=>t.in._zod.propValues),a._zod.parse=(e,i)=>{if(i.direction==="backward"){const l=t.out._zod.run(e,i);return l instanceof Promise?l.then(c=>Yl(c,t.in,i)):Yl(l,t.in,i)}const r=t.in._zod.run(e,i);return r instanceof Promise?r.then(l=>Yl(l,t.out,i)):Yl(r,t.out,i)}});function Yl(a,t,e){return a.issues.length?(a.aborted=!0,a):t._zod.run({value:a.value,issues:a.issues},e)}const d1=tt("$ZodReadonly",(a,t)=>{Be.init(a,t),le(a._zod,"propValues",()=>t.innerType._zod.propValues),le(a._zod,"values",()=>t.innerType._zod.values),le(a._zod,"optin",()=>t.innerType._zod.optin),le(a._zod,"optout",()=>t.innerType._zod.optout),a._zod.parse=(e,i)=>{if(i.direction==="backward")return t.innerType._zod.run(e,i);const r=t.innerType._zod.run(e,i);return r instanceof Promise?r.then(Ky):Ky(r)}});function Ky(a){return a.value=Object.freeze(a.value),a}const f1=tt("$ZodCustom",(a,t)=>{vi.init(a,t),Be.init(a,t),a._zod.parse=(e,i)=>e,a._zod.check=e=>{const i=e.value,r=t.fn(i);if(r instanceof Promise)return r.then(l=>Wy(l,e,i,a));Wy(r,e,i,a)}});function Wy(a,t,e,i){if(!a){const r={code:"custom",input:e,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(r.params=i._zod.def.params),t.issues.push(uo(r))}}class p1{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...e){const i=e[0];if(this._map.set(t,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const e=this._map.get(t);return e&&typeof e=="object"&&"id"in e&&this._idmap.delete(e.id),this._map.delete(t),this}get(t){const e=t._zod.parent;if(e){const i={...this.get(e)??{}};delete i.id;const r={...i,...this._map.get(t)};return Object.keys(r).length?r:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function g1(){return new p1}const Zl=g1();function m1(a,t){return new a({type:"string",...Ct(t)})}function y1(a,t){return new a({type:"string",format:"email",check:"string_format",abort:!1,...Ct(t)})}function Qy(a,t){return new a({type:"string",format:"guid",check:"string_format",abort:!1,...Ct(t)})}function b1(a,t){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,...Ct(t)})}function v1(a,t){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Ct(t)})}function A1(a,t){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Ct(t)})}function _1(a,t){return new a({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Ct(t)})}function S1(a,t){return new a({type:"string",format:"url",check:"string_format",abort:!1,...Ct(t)})}function w1(a,t){return new a({type:"string",format:"emoji",check:"string_format",abort:!1,...Ct(t)})}function E1(a,t){return new a({type:"string",format:"nanoid",check:"string_format",abort:!1,...Ct(t)})}function T1(a,t){return new a({type:"string",format:"cuid",check:"string_format",abort:!1,...Ct(t)})}function x1(a,t){return new a({type:"string",format:"cuid2",check:"string_format",abort:!1,...Ct(t)})}function C1(a,t){return new a({type:"string",format:"ulid",check:"string_format",abort:!1,...Ct(t)})}function D1(a,t){return new a({type:"string",format:"xid",check:"string_format",abort:!1,...Ct(t)})}function M1(a,t){return new a({type:"string",format:"ksuid",check:"string_format",abort:!1,...Ct(t)})}function R1(a,t){return new a({type:"string",format:"ipv4",check:"string_format",abort:!1,...Ct(t)})}function k1(a,t){return new a({type:"string",format:"ipv6",check:"string_format",abort:!1,...Ct(t)})}function O1(a,t){return new a({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Ct(t)})}function L1(a,t){return new a({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Ct(t)})}function N1(a,t){return new a({type:"string",format:"base64",check:"string_format",abort:!1,...Ct(t)})}function z1(a,t){return new a({type:"string",format:"base64url",check:"string_format",abort:!1,...Ct(t)})}function B1(a,t){return new a({type:"string",format:"e164",check:"string_format",abort:!1,...Ct(t)})}function P1(a,t){return new a({type:"string",format:"jwt",check:"string_format",abort:!1,...Ct(t)})}function F1(a,t){return new a({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Ct(t)})}function U1(a,t){return new a({type:"string",format:"date",check:"string_format",...Ct(t)})}function I1(a,t){return new a({type:"string",format:"time",check:"string_format",precision:null,...Ct(t)})}function j1(a,t){return new a({type:"string",format:"duration",check:"string_format",...Ct(t)})}function H1(a){return new a({type:"unknown"})}function V1(a,t){return new a({type:"never",...Ct(t)})}function cv(a,t){return new fw({check:"max_length",...Ct(t),maximum:a})}function fc(a,t){return new pw({check:"min_length",...Ct(t),minimum:a})}function uv(a,t){return new gw({check:"length_equals",...Ct(t),length:a})}function G1(a,t){return new mw({check:"string_format",format:"regex",...Ct(t),pattern:a})}function q1(a){return new yw({check:"string_format",format:"lowercase",...Ct(a)})}function $1(a){return new bw({check:"string_format",format:"uppercase",...Ct(a)})}function X1(a,t){return new vw({check:"string_format",format:"includes",...Ct(t),includes:a})}function Y1(a,t){return new Aw({check:"string_format",format:"starts_with",...Ct(t),prefix:a})}function Z1(a,t){return new _w({check:"string_format",format:"ends_with",...Ct(t),suffix:a})}function vo(a){return new Sw({check:"overwrite",tx:a})}function K1(a){return vo(t=>t.normalize(a))}function W1(){return vo(a=>a.trim())}function Q1(){return vo(a=>a.toLowerCase())}function J1(){return vo(a=>a.toUpperCase())}function tE(a,t,e){return new a({type:"array",element:t,...Ct(e)})}function eE(a,t,e){return new a({type:"custom",check:"custom",fn:t,...Ct(e)})}function nE(a){const t=iE(e=>(e.addIssue=i=>{if(typeof i=="string")e.issues.push(uo(i,e.value,t._zod.def));else{const r=i;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=e.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),e.issues.push(uo(r))}},a(e.value,e)));return t}function iE(a,t){const e=new vi({check:"custom",...Ct(t)});return e._zod.check=a,e}function Jy(a,t){try{var e=a()}catch(i){return t(i)}return e&&e.then?e.then(void 0,t):e}function sE(a,t){for(var e={};a.length;){var i=a[0],r=i.code,l=i.message,c=i.path.join(".");if(!e[c])if("unionErrors"in i){var h=i.unionErrors[0].errors[0];e[c]={message:h.message,type:h.code}}else e[c]={message:l,type:r};if("unionErrors"in i&&i.unionErrors.forEach(function(m){return m.errors.forEach(function(y){return a.push(y)})}),t){var d=e[c].types,p=d&&d[i.code];e[c]=Id(c,t,e,r,p?[].concat(p,i.message):i.message)}a.shift()}return e}function aE(a,t){for(var e={};a.length;){var i=a[0],r=i.code,l=i.message,c=i.path.join(".");if(!e[c])if(i.code==="invalid_union"&&i.errors.length>0){var h=i.errors[0][0];e[c]={message:h.message,type:h.code}}else e[c]={message:l,type:r};if(i.code==="invalid_union"&&i.errors.forEach(function(m){return m.forEach(function(y){return a.push(y)})}),t){var d=e[c].types,p=d&&d[i.code];e[c]=Id(c,t,e,r,p?[].concat(p,i.message):i.message)}a.shift()}return e}function rE(a,t,e){if(e===void 0&&(e={}),(function(i){return"_def"in i&&typeof i._def=="object"&&"typeName"in i._def})(a))return function(i,r,l){try{return Promise.resolve(Jy(function(){return Promise.resolve(a[e.mode==="sync"?"parse":"parseAsync"](i,t)).then(function(c){return l.shouldUseNativeValidation&&vd({},l),{errors:{},values:e.raw?Object.assign({},i):c}})},function(c){if((function(h){return Array.isArray(h?.issues)})(c))return{values:{},errors:Uy(sE(c.errors,!l.shouldUseNativeValidation&&l.criteriaMode==="all"),l)};throw c}))}catch(c){return Promise.reject(c)}};if((function(i){return"_zod"in i&&typeof i._zod=="object"})(a))return function(i,r,l){try{return Promise.resolve(Jy(function(){return Promise.resolve((e.mode==="sync"?kS:OS)(a,i,t)).then(function(c){return l.shouldUseNativeValidation&&vd({},l),{errors:{},values:e.raw?Object.assign({},i):c}})},function(c){if((function(h){return h instanceof Xd})(c))return{values:{},errors:Uy(aE(c.issues,!l.shouldUseNativeValidation&&l.criteriaMode==="all"),l)};throw c}))}catch(c){return Promise.reject(c)}};throw new Error("Invalid input: not a Zod schema")}const oE=tt("ZodISODateTime",(a,t)=>{Bw.init(a,t),Ae.init(a,t)});function lE(a){return F1(oE,a)}const cE=tt("ZodISODate",(a,t)=>{Pw.init(a,t),Ae.init(a,t)});function uE(a){return U1(cE,a)}const hE=tt("ZodISOTime",(a,t)=>{Fw.init(a,t),Ae.init(a,t)});function dE(a){return I1(hE,a)}const fE=tt("ZodISODuration",(a,t)=>{Uw.init(a,t),Ae.init(a,t)});function pE(a){return j1(fE,a)}const gE=(a,t)=>{Xd.init(a,t),a.name="ZodError",Object.defineProperties(a,{format:{value:e=>RS(a,e)},flatten:{value:e=>MS(a,e)},addIssue:{value:e=>{a.issues.push(e),a.message=JSON.stringify(a.issues,Ad,2)}},addIssues:{value:e=>{a.issues.push(...e),a.message=JSON.stringify(a.issues,Ad,2)}},isEmpty:{get(){return a.issues.length===0}}})},Xn=tt("ZodError",gE,{Parent:Error}),mE=Sc(Xn),yE=wc(Xn),bE=Ec(Xn),vE=Tc(Xn),AE=zS(Xn),_E=BS(Xn),SE=PS(Xn),wE=FS(Xn),EE=US(Xn),TE=IS(Xn),xE=jS(Xn),CE=HS(Xn),Ve=tt("ZodType",(a,t)=>(Be.init(a,t),a.def=t,a.type=t.type,Object.defineProperty(a,"_def",{value:t}),a.check=(...e)=>a.clone(Ws(t,{checks:[...t.checks??[],...e.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),a.clone=(e,i)=>vs(a,e,i),a.brand=()=>a,a.register=((e,i)=>(e.add(a,i),a)),a.parse=(e,i)=>mE(a,e,i,{callee:a.parse}),a.safeParse=(e,i)=>bE(a,e,i),a.parseAsync=async(e,i)=>yE(a,e,i,{callee:a.parseAsync}),a.safeParseAsync=async(e,i)=>vE(a,e,i),a.spa=a.safeParseAsync,a.encode=(e,i)=>AE(a,e,i),a.decode=(e,i)=>_E(a,e,i),a.encodeAsync=async(e,i)=>SE(a,e,i),a.decodeAsync=async(e,i)=>wE(a,e,i),a.safeEncode=(e,i)=>EE(a,e,i),a.safeDecode=(e,i)=>TE(a,e,i),a.safeEncodeAsync=async(e,i)=>xE(a,e,i),a.safeDecodeAsync=async(e,i)=>CE(a,e,i),a.refine=(e,i)=>a.check(bT(e,i)),a.superRefine=e=>a.check(vT(e)),a.overwrite=e=>a.check(vo(e)),a.optional=()=>nb(a),a.nullable=()=>ib(a),a.nullish=()=>nb(ib(a)),a.nonoptional=e=>hT(a,e),a.array=()=>KE(a),a.or=e=>tT([a,e]),a.and=e=>nT(a,e),a.transform=e=>sb(a,aT(e)),a.default=e=>lT(a,e),a.prefault=e=>uT(a,e),a.catch=e=>fT(a,e),a.pipe=e=>sb(a,e),a.readonly=()=>mT(a),a.describe=e=>{const i=a.clone();return Zl.add(i,{description:e}),i},Object.defineProperty(a,"description",{get(){return Zl.get(a)?.description},configurable:!0}),a.meta=(...e)=>{if(e.length===0)return Zl.get(a);const i=a.clone();return Zl.add(i,e[0]),i},a.isOptional=()=>a.safeParse(void 0).success,a.isNullable=()=>a.safeParse(null).success,a)),hv=tt("_ZodString",(a,t)=>{Yd.init(a,t),Ve.init(a,t);const e=a._zod.bag;a.format=e.format??null,a.minLength=e.minimum??null,a.maxLength=e.maximum??null,a.regex=(...i)=>a.check(G1(...i)),a.includes=(...i)=>a.check(X1(...i)),a.startsWith=(...i)=>a.check(Y1(...i)),a.endsWith=(...i)=>a.check(Z1(...i)),a.min=(...i)=>a.check(fc(...i)),a.max=(...i)=>a.check(cv(...i)),a.length=(...i)=>a.check(uv(...i)),a.nonempty=(...i)=>a.check(fc(1,...i)),a.lowercase=i=>a.check(q1(i)),a.uppercase=i=>a.check($1(i)),a.trim=()=>a.check(W1()),a.normalize=(...i)=>a.check(K1(...i)),a.toLowerCase=()=>a.check(Q1()),a.toUpperCase=()=>a.check(J1())}),DE=tt("ZodString",(a,t)=>{Yd.init(a,t),hv.init(a,t),a.email=e=>a.check(y1(ME,e)),a.url=e=>a.check(S1(RE,e)),a.jwt=e=>a.check(P1(qE,e)),a.emoji=e=>a.check(w1(kE,e)),a.guid=e=>a.check(Qy(tb,e)),a.uuid=e=>a.check(b1(Kl,e)),a.uuidv4=e=>a.check(v1(Kl,e)),a.uuidv6=e=>a.check(A1(Kl,e)),a.uuidv7=e=>a.check(_1(Kl,e)),a.nanoid=e=>a.check(E1(OE,e)),a.guid=e=>a.check(Qy(tb,e)),a.cuid=e=>a.check(T1(LE,e)),a.cuid2=e=>a.check(x1(NE,e)),a.ulid=e=>a.check(C1(zE,e)),a.base64=e=>a.check(N1(HE,e)),a.base64url=e=>a.check(z1(VE,e)),a.xid=e=>a.check(D1(BE,e)),a.ksuid=e=>a.check(M1(PE,e)),a.ipv4=e=>a.check(R1(FE,e)),a.ipv6=e=>a.check(k1(UE,e)),a.cidrv4=e=>a.check(O1(IE,e)),a.cidrv6=e=>a.check(L1(jE,e)),a.e164=e=>a.check(B1(GE,e)),a.datetime=e=>a.check(lE(e)),a.date=e=>a.check(uE(e)),a.time=e=>a.check(dE(e)),a.duration=e=>a.check(pE(e))});function ad(a){return m1(DE,a)}const Ae=tt("ZodStringFormat",(a,t)=>{ge.init(a,t),hv.init(a,t)}),ME=tt("ZodEmail",(a,t)=>{Cw.init(a,t),Ae.init(a,t)}),tb=tt("ZodGUID",(a,t)=>{Tw.init(a,t),Ae.init(a,t)}),Kl=tt("ZodUUID",(a,t)=>{xw.init(a,t),Ae.init(a,t)}),RE=tt("ZodURL",(a,t)=>{Dw.init(a,t),Ae.init(a,t)}),kE=tt("ZodEmoji",(a,t)=>{Mw.init(a,t),Ae.init(a,t)}),OE=tt("ZodNanoID",(a,t)=>{Rw.init(a,t),Ae.init(a,t)}),LE=tt("ZodCUID",(a,t)=>{kw.init(a,t),Ae.init(a,t)}),NE=tt("ZodCUID2",(a,t)=>{Ow.init(a,t),Ae.init(a,t)}),zE=tt("ZodULID",(a,t)=>{Lw.init(a,t),Ae.init(a,t)}),BE=tt("ZodXID",(a,t)=>{Nw.init(a,t),Ae.init(a,t)}),PE=tt("ZodKSUID",(a,t)=>{zw.init(a,t),Ae.init(a,t)}),FE=tt("ZodIPv4",(a,t)=>{Iw.init(a,t),Ae.init(a,t)}),UE=tt("ZodIPv6",(a,t)=>{jw.init(a,t),Ae.init(a,t)}),IE=tt("ZodCIDRv4",(a,t)=>{Hw.init(a,t),Ae.init(a,t)}),jE=tt("ZodCIDRv6",(a,t)=>{Vw.init(a,t),Ae.init(a,t)}),HE=tt("ZodBase64",(a,t)=>{Gw.init(a,t),Ae.init(a,t)}),VE=tt("ZodBase64URL",(a,t)=>{$w.init(a,t),Ae.init(a,t)}),GE=tt("ZodE164",(a,t)=>{Xw.init(a,t),Ae.init(a,t)}),qE=tt("ZodJWT",(a,t)=>{Zw.init(a,t),Ae.init(a,t)}),$E=tt("ZodUnknown",(a,t)=>{Kw.init(a,t),Ve.init(a,t)});function eb(){return H1($E)}const XE=tt("ZodNever",(a,t)=>{Ww.init(a,t),Ve.init(a,t)});function YE(a){return V1(XE,a)}const ZE=tt("ZodArray",(a,t)=>{Qw.init(a,t),Ve.init(a,t),a.element=t.element,a.min=(e,i)=>a.check(fc(e,i)),a.nonempty=e=>a.check(fc(1,e)),a.max=(e,i)=>a.check(cv(e,i)),a.length=(e,i)=>a.check(uv(e,i)),a.unwrap=()=>a.element});function KE(a,t){return tE(ZE,a,t)}const WE=tt("ZodObject",(a,t)=>{t1.init(a,t),Ve.init(a,t),le(a,"shape",()=>t.shape),a.keyof=()=>iT(Object.keys(a._zod.def.shape)),a.catchall=e=>a.clone({...a._zod.def,catchall:e}),a.passthrough=()=>a.clone({...a._zod.def,catchall:eb()}),a.loose=()=>a.clone({...a._zod.def,catchall:eb()}),a.strict=()=>a.clone({...a._zod.def,catchall:YE()}),a.strip=()=>a.clone({...a._zod.def,catchall:void 0}),a.extend=e=>ES(a,e),a.safeExtend=e=>TS(a,e),a.merge=e=>xS(a,e),a.pick=e=>SS(a,e),a.omit=e=>wS(a,e),a.partial=(...e)=>CS(dv,a,e[0]),a.required=(...e)=>DS(fv,a,e[0])});function QE(a,t){const e={type:"object",shape:a??{},...Ct(t)};return new WE(e)}const JE=tt("ZodUnion",(a,t)=>{e1.init(a,t),Ve.init(a,t),a.options=t.options});function tT(a,t){return new JE({type:"union",options:a,...Ct(t)})}const eT=tt("ZodIntersection",(a,t)=>{n1.init(a,t),Ve.init(a,t)});function nT(a,t){return new eT({type:"intersection",left:a,right:t})}const Sd=tt("ZodEnum",(a,t)=>{i1.init(a,t),Ve.init(a,t),a.enum=t.entries,a.options=Object.values(t.entries);const e=new Set(Object.keys(t.entries));a.extract=(i,r)=>{const l={};for(const c of i)if(e.has(c))l[c]=t.entries[c];else throw new Error(`Key ${c} not found in enum`);return new Sd({...t,checks:[],...Ct(r),entries:l})},a.exclude=(i,r)=>{const l={...t.entries};for(const c of i)if(e.has(c))delete l[c];else throw new Error(`Key ${c} not found in enum`);return new Sd({...t,checks:[],...Ct(r),entries:l})}});function iT(a,t){const e=Array.isArray(a)?Object.fromEntries(a.map(i=>[i,i])):a;return new Sd({type:"enum",entries:e,...Ct(t)})}const sT=tt("ZodTransform",(a,t)=>{s1.init(a,t),Ve.init(a,t),a._zod.parse=(e,i)=>{if(i.direction==="backward")throw new Wb(a.constructor.name);e.addIssue=l=>{if(typeof l=="string")e.issues.push(uo(l,e.value,t));else{const c=l;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=e.value),c.inst??(c.inst=a),e.issues.push(uo(c))}};const r=t.transform(e.value,e);return r instanceof Promise?r.then(l=>(e.value=l,e)):(e.value=r,e)}});function aT(a){return new sT({type:"transform",transform:a})}const dv=tt("ZodOptional",(a,t)=>{a1.init(a,t),Ve.init(a,t),a.unwrap=()=>a._zod.def.innerType});function nb(a){return new dv({type:"optional",innerType:a})}const rT=tt("ZodNullable",(a,t)=>{r1.init(a,t),Ve.init(a,t),a.unwrap=()=>a._zod.def.innerType});function ib(a){return new rT({type:"nullable",innerType:a})}const oT=tt("ZodDefault",(a,t)=>{o1.init(a,t),Ve.init(a,t),a.unwrap=()=>a._zod.def.innerType,a.removeDefault=a.unwrap});function lT(a,t){return new oT({type:"default",innerType:a,get defaultValue(){return typeof t=="function"?t():tv(t)}})}const cT=tt("ZodPrefault",(a,t)=>{l1.init(a,t),Ve.init(a,t),a.unwrap=()=>a._zod.def.innerType});function uT(a,t){return new cT({type:"prefault",innerType:a,get defaultValue(){return typeof t=="function"?t():tv(t)}})}const fv=tt("ZodNonOptional",(a,t)=>{c1.init(a,t),Ve.init(a,t),a.unwrap=()=>a._zod.def.innerType});function hT(a,t){return new fv({type:"nonoptional",innerType:a,...Ct(t)})}const dT=tt("ZodCatch",(a,t)=>{u1.init(a,t),Ve.init(a,t),a.unwrap=()=>a._zod.def.innerType,a.removeCatch=a.unwrap});function fT(a,t){return new dT({type:"catch",innerType:a,catchValue:typeof t=="function"?t:()=>t})}const pT=tt("ZodPipe",(a,t)=>{h1.init(a,t),Ve.init(a,t),a.in=t.in,a.out=t.out});function sb(a,t){return new pT({type:"pipe",in:a,out:t})}const gT=tt("ZodReadonly",(a,t)=>{d1.init(a,t),Ve.init(a,t),a.unwrap=()=>a._zod.def.innerType});function mT(a){return new gT({type:"readonly",innerType:a})}const yT=tt("ZodCustom",(a,t)=>{f1.init(a,t),Ve.init(a,t)});function bT(a,t={}){return eE(yT,a,t)}function vT(a){return nE(a)}class Ao{constructor(t=0,e="Network Error"){this.status=t,this.text=e}}const AT=()=>{if(!(typeof localStorage>"u"))return{get:a=>Promise.resolve(localStorage.getItem(a)),set:(a,t)=>Promise.resolve(localStorage.setItem(a,t)),remove:a=>Promise.resolve(localStorage.removeItem(a))}},Qe={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:AT()},Zd=a=>a?typeof a=="string"?{publicKey:a}:a.toString()==="[object Object]"?a:{}:{},_T=(a,t="https://api.emailjs.com")=>{if(!a)return;const e=Zd(a);Qe.publicKey=e.publicKey,Qe.blockHeadless=e.blockHeadless,Qe.storageProvider=e.storageProvider,Qe.blockList=e.blockList,Qe.limitRate=e.limitRate,Qe.origin=e.origin||t},pv=async(a,t,e={})=>{const i=await fetch(Qe.origin+a,{method:"POST",headers:e,body:t}),r=await i.text(),l=new Ao(i.status,r);if(i.ok)return l;throw l},gv=(a,t,e)=>{if(!a||typeof a!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!e||typeof e!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},ST=a=>{if(a&&a.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},mv=a=>a.webdriver||!a.languages||a.languages.length===0,yv=()=>new Ao(451,"Unavailable For Headless Browser"),wT=(a,t)=>{if(!Array.isArray(a))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},ET=a=>!a.list?.length||!a.watchVariable,TT=(a,t)=>a instanceof FormData?a.get(t):a[t],bv=(a,t)=>{if(ET(a))return!1;wT(a.list,a.watchVariable);const e=TT(t,a.watchVariable);return typeof e!="string"?!1:a.list.includes(e)},vv=()=>new Ao(403,"Forbidden"),xT=(a,t)=>{if(typeof a!="number"||a<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},CT=async(a,t,e)=>{const i=Number(await e.get(a)||0);return t-Date.now()+i},Av=async(a,t,e)=>{if(!t.throttle||!e)return!1;xT(t.throttle,t.id);const i=t.id||a;return await CT(i,t.throttle,e)>0?!0:(await e.set(i,Date.now().toString()),!1)},_v=()=>new Ao(429,"Too Many Requests"),DT=async(a,t,e,i)=>{const r=Zd(i),l=r.publicKey||Qe.publicKey,c=r.blockHeadless||Qe.blockHeadless,h=r.storageProvider||Qe.storageProvider,d={...Qe.blockList,...r.blockList},p={...Qe.limitRate,...r.limitRate};return c&&mv(navigator)?Promise.reject(yv()):(gv(l,a,t),ST(e),e&&bv(d,e)?Promise.reject(vv()):await Av(location.pathname,p,h)?Promise.reject(_v()):pv("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:l,service_id:a,template_id:t,template_params:e}),{"Content-type":"application/json"}))},MT=a=>{if(!a||a.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},RT=a=>typeof a=="string"?document.querySelector(a):a,kT=async(a,t,e,i)=>{const r=Zd(i),l=r.publicKey||Qe.publicKey,c=r.blockHeadless||Qe.blockHeadless,h=Qe.storageProvider||r.storageProvider,d={...Qe.blockList,...r.blockList},p={...Qe.limitRate,...r.limitRate};if(c&&mv(navigator))return Promise.reject(yv());const m=RT(e);gv(l,a,t),MT(m);const y=new FormData(m);return bv(d,y)?Promise.reject(vv()):await Av(location.pathname,p,h)?Promise.reject(_v()):(y.append("lib_version","4.4.1"),y.append("service_id",a),y.append("template_id",t),y.append("user_id",l),pv("/api/v1.0/email/send-form",y))},OT={init:_T,send:DT,sendForm:kT,EmailJSResponseStatus:Ao},LT=QE({name:ad().min(1,"Name is required").min(2,"Name must be at least 2 characters"),email:ad().min(1,"Email is required").email("Please enter a valid email address"),message:ad().min(1,"Message is required").min(10,"Message must be at least 10 characters")});function NT(){const[a,t]=ut.useState(!1),[e,i]=ut.useState({type:null,message:""}),{register:r,handleSubmit:l,formState:{errors:c},reset:h}=mS({resolver:rE(LT)}),d=async p=>{t(!0),i({type:null,message:""});try{await OT.send("service_pxv1ara","template_iyg39fn",{from_name:p.name,from_email:p.email,message:p.message,to_email:"christianlester114@gmail.com"},"x-8-ERNSq88g2Idcn"),i({type:"success",message:"Thank you! Your message has been sent successfully."}),h()}catch(m){console.error("Error sending email:",m),i({type:"error",message:"Failed to send message. Please try again later."})}finally{t(!1)}};return V.jsx("div",{className:"w-72 sm:w-96 lg:w-full h-1/2",children:V.jsxs("form",{onSubmit:l(d),className:"space-y-6",children:[V.jsxs("div",{children:[V.jsx("label",{htmlFor:"name",className:"block text-sm font-medium mb-2",style:{color:"var(--color-text)"},children:"Name"}),V.jsx("input",{id:"name",type:"text",...r("name"),className:"w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 transition-colors contact-form-input",style:{backgroundColor:"var(--color-surface)",color:"var(--color-text)",borderColor:c.name?"var(--color-error)":"var(--color-border)"},placeholder:"Your name"}),c.name&&V.jsx("p",{className:"mt-1 text-sm",style:{color:"var(--color-error)"},children:c.name.message})]}),V.jsxs("div",{children:[V.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",style:{color:"var(--color-text)"},children:"Email"}),V.jsx("input",{id:"email",type:"email",...r("email"),className:"w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 transition-colors contact-form-input",style:{backgroundColor:"var(--color-surface)",color:"var(--color-text)",borderColor:c.email?"var(--color-error)":"var(--color-border)"},placeholder:"your.email@example.com"}),c.email&&V.jsx("p",{className:"mt-1 text-sm",style:{color:"var(--color-error)"},children:c.email.message})]}),V.jsxs("div",{children:[V.jsx("label",{htmlFor:"message",className:"block text-sm font-medium mb-2",style:{color:"var(--color-text)"},children:"Message"}),V.jsx("textarea",{id:"message",...r("message"),rows:6,className:"w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 transition-colors resize-vertical contact-form-input",style:{backgroundColor:"var(--color-surface)",color:"var(--color-text)",borderColor:c.message?"var(--color-error)":"var(--color-border)"},placeholder:"Your message here..."}),c.message&&V.jsx("p",{className:"mt-1 text-sm",style:{color:"var(--color-error)"},children:c.message.message})]}),V.jsx("button",{type:"submit",disabled:a,className:"w-full mb-8 px-6 py-3 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:a?"var(--color-accent-muted)":"var(--color-accent)",color:"var(--color-text-inverted)"},onMouseEnter:p=>{a||(p.currentTarget.style.backgroundColor="var(--color-accent-hover)")},onMouseLeave:p=>{a||(p.currentTarget.style.backgroundColor="var(--color-accent)")},children:a?"Sending...":"Send Message"}),e.type&&V.jsx("div",{className:`p-4 rounded-lg ${e.type==="success"?"bg-green-900/20 border border-green-500/50":"bg-red-900/20 border border-red-500/50"}`,children:V.jsx("p",{className:`text-sm ${e.type==="success"?"text-green-400":"text-red-400"}`,children:e.message})})]})})}function zT(){return V.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 mx-auto ",children:[V.jsxs("div",{className:"lg:w-1/2 flex flex-col items-center",children:[V.jsx("h1",{className:"w-4/5 text-center text-md md:text-lg lg:text-xl",children:"You can get in touch with me through the contact info listed below or you can use the form on the right to send me an email. I will respond to all requests as quickly as possible. Thank you!"}),V.jsx("div",{className:"ml-4 mt-8 text-md md:text-lg lg:text-xl border border-(--color-border) py-4 px-8 xl:px-16 rounded-xl bg-(--color-card)",children:V.jsxs("ul",{className:"flex flex-col gap-2",children:[V.jsxs("li",{className:"flex flex-row items-center gap-2",children:[V.jsx("i",{className:"fa-solid fa-envelope"}),V.jsx("h1",{children:"christianlester114@gmail.com"})]}),V.jsxs("li",{className:"flex flex-row items-center gap-2",children:[V.jsx("i",{className:"fa-solid fa-phone"}),V.jsx("h1",{children:"+1 (724) 986-6094"})]}),V.jsxs("li",{className:"flex flex-row items-center underline text-(--color-accent) cursor-pointer gap-2",children:[V.jsx("i",{className:"fa-brands fa-linkedin"}),V.jsx("a",{href:"https://www.linkedin.com/in/christian-lester-b71412239/",target:"_blank",children:"LinkedIn"})]}),V.jsxs("li",{className:"flex flex-row items-center underline text-(--color-accent) cursor-pointer gap-2 hover:text-(--color-accent-hover) transition-all duration-150 ease-in-out",children:[V.jsx("i",{className:"fa-brands fa-instagram"}),V.jsx("a",{href:"https://www.instagram.com/the_chester14/",target:"_blank",children:"Instagram"})]})]})})]}),V.jsxs("div",{className:"flex flex-col items-center mx-auto w-1/2",children:[V.jsx("h1",{className:"flex justify-center text-xl",children:"Email Form"}),V.jsx(NT,{})]})]})}const rd={ts:{name:"TypeScript",src:"skills/typescript.png",type:"frontend"},js:{name:"JavaScript",src:"skills/js.png",type:"frontend"},java:{name:"Java",src:"skills/java.png",type:"lang"},python:{name:"python",src:"skills/python.png",type:"lang"},html:{name:"HTML",src:"skills/html-5.png",type:"frontend"},css:{name:"CSS",src:"skills/css-3.png",type:"frontend"},sass:{name:"SASS",src:"skills/sass.png",type:"frontend"},react:{name:"React",src:"skills/react.png",type:"frontend"},tailwind:{name:"Tailwind",src:"skills/tailwind.png",type:"frontend"},shadcn:{name:"ShadCN",src:"skills/shadcn.png",type:"frontend"},redux:{name:"Redux",src:"skills/redux.png",type:"frontend"},nxetjs:{name:"Next",src:"skills/nextjs.png",type:"frontend"},electron:{name:"Electron",src:"skills/electron.png",type:"frontend"},express:{name:"Express",src:"skills/express.png",type:"backend"},node:{name:"Node",src:"skills/node.png",type:"backend"},psql:{name:"Postgresql",src:"skills/psql.png",type:"backend"},innegest:{name:"Innegest",src:"skills/innegest.png",type:"backend"},Drizzle:{name:"Drizzle",src:"skills/drizzle.png",type:"backend"},claude:{name:"Claude API",src:"skills/claude.png",type:"backend"},clerk:{name:"Clerk",src:"skills/clerk.png",type:"backend"},firebase:{name:"Firebase",src:"skills/firebase.png",type:"backend"},gcp:{name:"GCP",src:"skills/gcp.png",type:"backend"},neon:{name:"Neon",src:"skills/neon.png",type:"backend"},cpp:{name:"C++",src:"skills/cpp.png",type:"lang"},csh:{name:"C#",src:"skills/csh.png",type:"lang"},c:{name:"C",src:"skills/c.png",type:"lang"},git:{name:"git",src:"skills/git.png",type:"lang"}},BT={p1:{name:"Mind Map For Future Envisioning",year:"Sep-Dec 2024",description:"Worked in a group to develop a web application where formerly incarcerated individuals can set goals and plan their paths for re-entry into society",notes:["Worked alongside Project Rebound, a non-profit organization that aims to provide formerly incarcerated individuals with skills and resources for their re-entry","Developed the frontend for the application using React.js and Tailwind"],link:"https://github.com/Clester31/PR-MindMap-React"},p2:{name:"AI-Powered Job Board",year:"Sep 2025",description:"Job listing website where users can get AI-based recommendations for job openings that match their skill set",notes:["Frontend incorporates both Tailwind and ShadCN for styling/components","Uses Drizzle and Innegest for backend/db purposes","Resend used for emailing users with new listings that would apply to their skill set"],link:"https://github.com/Clester31/AI-Powered-Job-Board"},p3:{name:"AI Color Palette Generator",year:"Oct 2025",description:"Website for generating attractive color palettes from an AI Prompt",notes:["Uses Claude API for generating palettes based off prompts","Frontend created using Tailwind and ShadCN"],link:"https://github.com/Clester31/AI-color-palette-generator"},p4:{name:"LifeLogger",year:"Aug 2025",description:"A simple web app for creating journal entries and to-do lists",notes:["Features custom-made markdown editor for creating notes","developed using React and TailwindCSS"],link:"https://github.com/Clester31/LifeLogger"},p5:{name:"My Album Catalog",year:"May 2025",description:"Website where music enthusiasts can create custom catalogs for the music they have listened to",notes:["Albums can have ratings and short reviews, along with individual track ratings","Uses last.fm api for album searching","Frontend built in React/Next.js with Auth/DB handled in Firebase"],link:"https://github.com/Clester31/my-album-catalog"},p6:{name:"SideChain",year:"Feb 2025",description:"Website where musicians can receive feedback on their music from fellow producers/artists",notes:["Created for the TartanHacks 2025 hackathon at Carnegie Mellon University","Firebase used for uploading/storing MP3 files/user profile info"],link:"https://github.com/Clester31/sidechain-project"},p7:{name:"MyPowerRankings",year:"Oct 2024",description:"Website for creating power rankings for the 4 major American sports leagues (NFL, NBA, MLB, NHL)",notes:["Users can screenshot and share their power rankings after creating them","Auth/DB handled in Firebase"],link:"https://github.com/Clester31/MyPowerRankings"}};function PT({project:a}){return V.jsx("div",{className:"flex flex-col p-4 rounded-xl bg-(--color-card) border border-(--color-border) text-md hover:border-(--color-accent) transition-all duration-150 ease-in-out cursor-pointer",children:V.jsxs("a",{href:a.link,target:"_blank",children:[V.jsxs("div",{className:"flex flex-row gap-2",children:[V.jsx("h1",{children:a.name}),V.jsx("h2",{className:"text-(--color-text-muted)",children:a.year})]}),V.jsx("div",{className:"border border-(--color-border) my-1"}),V.jsxs("div",{className:"flex flex-col",children:[V.jsx("h2",{children:a.description}),V.jsx("div",{className:"border border-(--color-border) my-1"}),V.jsx("ul",{className:"ml-4",children:a.notes.map((t,e)=>V.jsx("li",{className:"text-(--color-text-muted) text-sm",style:{listStyle:"inside"},children:t},e))})]})]})})}function FT(){return V.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mx-auto mb-8",children:Object.values(BT).map((a,t)=>V.jsx(PT,{project:a},t))})}const ln=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),wd=[.001,0,0,.001,0,0],od=1.35,Mn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},bi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ho="pdfjs_internal_editor_",Mt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ht={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Sv={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ke={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},oo={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Te={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ja={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},_o={ERRORS:0,WARNINGS:1,INFOS:5},Ja={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Wl={moveTo:0,lineTo:1,curveTo:2,closePath:3},wv={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Cc=_o.WARNINGS;function UT(a){Number.isInteger(a)&&(Cc=a)}function IT(){return Cc}function Dc(a){Cc>=_o.INFOS&&console.info(`Info: ${a}`)}function Rt(a){Cc>=_o.WARNINGS&&console.warn(`Warning: ${a}`)}function re(a){throw new Error(a)}function qt(a,t){a||re(t)}function jT(a){switch(a?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Kd(a,t=null,e=null){if(!a)return null;if(e&&typeof a=="string"&&(e.addDefaultProtocol&&a.startsWith("www.")&&a.match(/\./g)?.length>=2&&(a=`http://${a}`),e.tryConvertEncoding))try{a=$T(a)}catch{}const i=t?URL.parse(a,t):URL.parse(a);return jT(i)?i:null}function Wd(a,t,e=!1){const i=URL.parse(a);return i?(i.hash=t,i.href):e&&Kd(a,"http://example.com")?a.split("#",1)[0]+`${t?`#${t}`:""}`:""}function zt(a,t,e,i=!1){return Object.defineProperty(a,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Qs=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class ab extends Qs{constructor(t,e){super(t,"PasswordException"),this.code=e}}class ld extends Qs{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class pc extends Qs{constructor(t){super(t,"InvalidPDFException")}}class fo extends Qs{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class HT extends Qs{constructor(t){super(t,"FormatError")}}class Vi extends Qs{constructor(t){super(t,"AbortException")}}function Ev(a){(typeof a!="object"||a?.length===void 0)&&re("Invalid argument for bytesToString");const t=a.length,e=8192;if(t<e)return String.fromCharCode.apply(null,a);const i=[];for(let r=0;r<t;r+=e){const l=Math.min(r+e,t),c=a.subarray(r,l);i.push(String.fromCharCode.apply(null,c))}return i.join("")}function So(a){typeof a!="string"&&re("Invalid argument for stringToBytes");const t=a.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=a.charCodeAt(i)&255;return e}function VT(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}function GT(){const a=new Uint8Array(4);return a[0]=1,new Uint32Array(a.buffer,0,1)[0]===1}function qT(){try{return new Function(""),!0}catch{return!1}}class He{static get isLittleEndian(){return zt(this,"isLittleEndian",GT())}static get isEvalSupported(){return zt(this,"isEvalSupported",qT())}static get isOffscreenCanvasSupported(){return zt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return zt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return zt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return zt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const cd=Array.from(Array(256).keys(),a=>a.toString(16).padStart(2,"0"));class ft{static makeHexColor(t,e,i){return`#${cd[t]}${cd[e]}${cd[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const r=t[i],l=t[i+1];t[i]=r*e[0]+l*e[2]+e[4],t[i+1]=r*e[1]+l*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const r=e[0],l=e[1],c=e[2],h=e[3],d=e[4],p=e[5];for(let m=0;m<6;m+=2){const y=t[i+m],b=t[i+m+1];t[i+m]=y*r+b*c+d,t[i+m+1]=y*l+b*h+p}}static applyInverseTransform(t,e){const i=t[0],r=t[1],l=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-r*e[2]+e[2]*e[5]-e[4]*e[3])/l,t[1]=(-i*e[1]+r*e[0]+e[4]*e[1]-e[5]*e[0])/l}static axialAlignedBoundingBox(t,e,i){const r=e[0],l=e[1],c=e[2],h=e[3],d=e[4],p=e[5],m=t[0],y=t[1],b=t[2],A=t[3];let S=r*m+d,_=S,T=r*b+d,E=T,x=h*y+p,C=x,L=h*A+p,O=L;if(l!==0||c!==0){const P=l*m,z=l*b,$=c*y,Y=c*A;S+=$,E+=$,T+=Y,_+=Y,x+=P,O+=P,L+=z,C+=z}i[0]=Math.min(i[0],S,T,_,E),i[1]=Math.min(i[1],x,L,C,O),i[2]=Math.max(i[2],S,T,_,E),i[3]=Math.max(i[3],x,L,C,O)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],r=t[1],l=t[2],c=t[3],h=i**2+r**2,d=i*l+r*c,p=l**2+c**2,m=(h+p)/2,y=Math.sqrt(m**2-(h*p-d**2));e[0]=Math.sqrt(m+y||1),e[1]=Math.sqrt(m-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>r)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return l>c?null:[i,l,r,c]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,r,l){l[0]=Math.min(l[0],t,i),l[1]=Math.min(l[1],e,r),l[2]=Math.max(l[2],t,i),l[3]=Math.max(l[3],e,r)}static#t(t,e,i,r,l,c,h,d,p,m){if(p<=0||p>=1)return;const y=1-p,b=p*p,A=b*p,S=y*(y*(y*t+3*p*e)+3*b*i)+A*r,_=y*(y*(y*l+3*p*c)+3*b*h)+A*d;m[0]=Math.min(m[0],S),m[1]=Math.min(m[1],_),m[2]=Math.max(m[2],S),m[3]=Math.max(m[3],_)}static#e(t,e,i,r,l,c,h,d,p,m,y,b){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&this.#t(t,e,i,r,l,c,h,d,-y/m,b);return}const A=m**2-4*y*p;if(A<0)return;const S=Math.sqrt(A),_=2*p;this.#t(t,e,i,r,l,c,h,d,(-m+S)/_,b),this.#t(t,e,i,r,l,c,h,d,(-m-S)/_,b)}static bezierBoundingBox(t,e,i,r,l,c,h,d,p){p[0]=Math.min(p[0],t,h),p[1]=Math.min(p[1],e,d),p[2]=Math.max(p[2],t,h),p[3]=Math.max(p[3],e,d),this.#e(t,i,l,h,e,r,c,d,3*(-t+3*(i-l)+h),6*(t-2*i+l),3*(i-t),p),this.#e(t,i,l,h,e,r,c,d,3*(-e+3*(r-c)+d),6*(e-2*r+c),3*(r-e),p)}}function $T(a){return decodeURIComponent(escape(a))}let ud=null,rb=null;function Tv(a){return ud||(ud=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,rb=new Map([["","t"]])),a.replaceAll(ud,(t,e,i)=>e?e.normalize("NFKC"):rb.get(i))}function Qd(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const a=new Uint8Array(32);return crypto.getRandomValues(a),Ev(a)}const Jd="pdfjs_internal_id_";function XT(a,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,r,...l]=e;if(!a(i)&&!Number.isInteger(i)||!t(r))return!1;const c=l.length;let h=!0;switch(r.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;h=!1;break;default:return!1}for(const d of l)if(!(typeof d=="number"||h&&d===null))return!1;return!0}function sn(a,t,e){return Math.min(Math.max(a,t),e)}function xv(a){return Uint8Array.prototype.toBase64?a.toBase64():btoa(Ev(a))}function YT(a){return Uint8Array.fromBase64?Uint8Array.fromBase64(a):So(atob(a))}typeof Promise.try!="function"&&(Promise.try=function(a,...t){return new Promise(e=>{e(a(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(a){return a.reduce((t,e)=>t+e,0)});class po{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function r(l){if(!l)return;let c=null;const h=l.name;if(h==="#text")c=l.value;else if(po.shouldBuildText(h))l?.attributes?.textContent?c=l.attributes.textContent:l.value&&(c=l.value);else return;if(c!==null&&e.push({str:c}),!!l.children)for(const d of l.children)r(d)}return r(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class tf{static setupStorage(t,e,i,r,l){const c=r.getValue(e,{value:null});switch(i.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),l==="print")break;t.addEventListener("input",h=>{r.setValue(e,{value:h.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(c.value===i.attributes.xfaOn?t.setAttribute("checked",!0):c.value===i.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",h=>{r.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),l==="print")break;t.addEventListener("input",h=>{r.setValue(e,{value:h.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const h of i.children)h.attributes.value===c.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const d=h.target.options,p=d.selectedIndex===-1?"":d[d.selectedIndex].value;r.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:r,linkService:l}){const{attributes:c}=e,h=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${r}`);for(const[d,p]of Object.entries(c))if(p!=null)switch(d){case"class":p.length&&t.setAttribute(d,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!h||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,p)}h&&l.addLinkAttributes(t,c.href,c.newWindow),i&&c.dataId&&this.setupStorage(t,c.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,r=t.xfaHtml,l=t.intent||"display",c=document.createElement(r.name);r.attributes&&this.setAttributes({html:c,element:r,intent:l,linkService:i});const h=l!=="richText",d=t.div;if(d.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}h&&d.setAttribute("class","xfaLayer xfaFont");const p=[];if(r.children.length===0){if(r.value){const y=document.createTextNode(r.value);c.append(y),h&&po.shouldBuildText(r.name)&&p.push(y)}return{textDivs:p}}const m=[[r,-1,c]];for(;m.length>0;){const[y,b,A]=m.at(-1);if(b+1===y.children.length){m.pop();continue}const S=y.children[++m.at(-1)[1]];if(S===null)continue;const{name:_}=S;if(_==="#text"){const E=document.createTextNode(S.value);p.push(E),A.append(E);continue}const T=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,_):document.createElement(_);if(A.append(T),S.attributes&&this.setAttributes({html:T,element:S,storage:e,intent:l,linkService:i}),S.children?.length>0)m.push([S,-1,T]);else if(S.value){const E=document.createTextNode(S.value);h&&po.shouldBuildText(_)&&p.push(E),T.append(E)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const ji="http://www.w3.org/2000/svg";class Xs{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function nr(a,t="text"){if(no(a,document.baseURI)){const e=await fetch(a);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const r=new XMLHttpRequest;r.open("GET",a,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(r.response);return}e(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class wo{constructor({viewBox:t,userUnit:e,scale:i,rotation:r,offsetX:l=0,offsetY:c=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=r,this.offsetX=l,this.offsetY=c,i*=e;const d=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let m,y,b,A;switch(r%=360,r<0&&(r+=360),r){case 180:m=-1,y=0,b=0,A=1;break;case 90:m=0,y=1,b=1,A=0;break;case 270:m=0,y=-1,b=-1,A=0;break;case 0:m=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(b=-b,A=-A);let S,_,T,E;m===0?(S=Math.abs(p-t[1])*i+l,_=Math.abs(d-t[0])*i+c,T=(t[3]-t[1])*i,E=(t[2]-t[0])*i):(S=Math.abs(d-t[0])*i+l,_=Math.abs(p-t[1])*i+c,T=(t[2]-t[0])*i,E=(t[3]-t[1])*i),this.transform=[m*i,y*i,b*i,A*i,S-m*i*d-b*i*p,_-y*i*d-A*i*p],this.width=T,this.height=E}get rawDims(){const t=this.viewBox;return zt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:l=!1}={}){return new wo({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:l})}convertToViewportPoint(t,e){const i=[t,e];return ft.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];ft.applyTransform(e,this.transform);const i=[t[2],t[3]];return ft.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return ft.applyInverseTransform(i,this.transform),i}}class Mc extends Qs{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Eo(a){const t=a.length;let e=0;for(;e<t&&a[e].trim()==="";)e++;return a.substring(e,e+5).toLowerCase()==="data:"}function Rc(a){return typeof a=="string"&&/\.pdf$/i.test(a)}function Cv(a){return[a]=a.split(/[#?]/,1),a.substring(a.lastIndexOf("/")+1)}function Dv(a,t="document.pdf"){if(typeof a!="string")return t;if(Eo(a))return Rt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(h=>{try{return new URL(h)}catch{try{return new URL(decodeURIComponent(h))}catch{try{return new URL(h,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(h),"https://foo.bar")}catch{return null}}}}})(a);if(!i)return t;const r=h=>{try{let d=decodeURIComponent(h);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:h):d}catch{return h}},l=/\.pdf$/i,c=i.pathname.split("/").at(-1);if(l.test(c))return r(c);if(i.searchParams.size>0){const h=Array.from(i.searchParams.values()).reverse();for(const p of h)if(l.test(p))return r(p);const d=Array.from(i.searchParams.keys()).reverse();for(const p of d)if(l.test(p))return r(p)}if(i.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(d)return r(d[0])}return t}class ob{started=Object.create(null);times=[];time(t){t in this.started&&Rt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Rt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:r,end:l}of this.times)t.push(`${i.padEnd(e)} ${l-r}ms
`);return t.join("")}}function no(a,t){const e=t?URL.parse(a,t):URL.parse(a);return e?.protocol==="http:"||e?.protocol==="https:"}function Ln(a){a.preventDefault()}function be(a){a.preventDefault(),a.stopPropagation()}function ZT(a){console.log("Deprecated API usage: "+a)}class gc{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let r=parseInt(e[2],10);r=r>=1&&r<=12?r-1:0;let l=parseInt(e[3],10);l=l>=1&&l<=31?l:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const p=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,p==="-"?(c+=m,h+=y):p==="+"&&(c-=m,h-=y),new Date(Date.UTC(i,r,l,c,h,d))}}function Mv(a,{scale:t=1,rotation:e=0}){const{width:i,height:r}=a.attributes.style,l=[0,0,parseInt(i),parseInt(r)];return new wo({viewBox:l,userUnit:1,scale:t,rotation:e})}function ir(a){if(a.startsWith("#")){const t=parseInt(a.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return a.startsWith("rgb(")?a.slice(4,-1).split(",").map(t=>parseInt(t)):a.startsWith("rgba(")?a.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Rt(`Not a valid color format: "${a}"`),[0,0,0])}function KT(a){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of a.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;a.set(e,ir(i))}t.remove()}function ye(a){const{a:t,b:e,c:i,d:r,e:l,f:c}=a.getTransform();return[t,e,i,r,l,c]}function di(a){const{a:t,b:e,c:i,d:r,e:l,f:c}=a.getTransform().invertSelf();return[t,e,i,r,l,c]}function bs(a,t,e=!1,i=!0){if(t instanceof wo){const{pageWidth:r,pageHeight:l}=t.rawDims,{style:c}=a,h=He.isCSSRoundSupported,d=`var(--total-scale-factor) * ${r}px`,p=`var(--total-scale-factor) * ${l}px`,m=h?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=h?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!e||t.rotation%180===0?(c.width=m,c.height=y):(c.width=y,c.height=m)}i&&a.setAttribute("data-main-rotation",t.rotation)}class ei{constructor(){const{pixelRatio:t}=ei;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,r,l=-1){let c=1/0,h=1/0,d=1/0;i=ei.capPixels(i,l),i>0&&(c=Math.sqrt(i/(t*e))),r!==-1&&(h=r/t,d=r/e);const p=Math.min(c,h,d);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const mc=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class WT{static get isDarkMode(){return zt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Rv{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),zt(this,"commentForegroundColor",ir(i))}}function kv(a,t,e,i){i=Math.min(Math.max(i??1,0),1);const r=255*(1-i);return a=Math.round(a*i+r),t=Math.round(t*i+r),e=Math.round(e*i+r),[a,t,e]}function lb(a,t){const e=a[0]/255,i=a[1]/255,r=a[2]/255,l=Math.max(e,i,r),c=Math.min(e,i,r),h=(l+c)/2;if(l===c)t[0]=t[1]=0;else{const d=l-c;switch(t[1]=h<.5?d/(l+c):d/(2-l-c),l){case e:t[0]=((i-r)/d+(i<r?6:0))*60;break;case i:t[0]=((r-e)/d+2)*60;break;case r:t[0]=((e-i)/d+4)*60;break}}t[2]=h}function Ed(a,t){const e=a[0],i=a[1],r=a[2],l=(1-Math.abs(2*r-1))*i,c=l*(1-Math.abs(e/60%2-1)),h=r-l/2;switch(Math.floor(e/60)){case 0:t[0]=l+h,t[1]=c+h,t[2]=h;break;case 1:t[0]=c+h,t[1]=l+h,t[2]=h;break;case 2:t[0]=h,t[1]=l+h,t[2]=c+h;break;case 3:t[0]=h,t[1]=c+h,t[2]=l+h;break;case 4:t[0]=c+h,t[1]=h,t[2]=l+h;break;case 5:case 6:t[0]=l+h,t[1]=h,t[2]=c+h;break}}function cb(a){return a<=.03928?a/12.92:((a+.055)/1.055)**2.4}function ub(a,t,e){Ed(a,e),e.map(cb);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];Ed(t,e),e.map(cb);const r=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)}const hb=new Map;function Ov(a,t){const e=a[0]+a[1]*256+a[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=hb.get(e);if(i)return i;const r=new Float32Array(9),l=r.subarray(0,3),c=r.subarray(3,6);lb(a,c);const h=r.subarray(6,9);lb(t,h);const d=h[2]<.5,p=d?12:4.5;if(c[2]=d?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),ub(c,h,l)<p){let m,y;d?(m=c[2],y=1):(m=0,y=c[2]);const b=.005;for(;y-m>b;){const A=c[2]=(m+y)/2;d===ub(c,h,l)<p?m=A:y=A}c[2]=d?y:m}return Ed(c,l),i=ft.makeHexColor(Math.round(l[0]*255),Math.round(l[1]*255),Math.round(l[2]*255)),hb.set(e,i),i}function ef({html:a,dir:t,className:e},i){const r=document.createDocumentFragment();if(typeof a=="string"){const l=document.createElement("p");l.dir=t||"auto";const c=a.split(/(?:\r\n?|\n)/);for(let h=0,d=c.length;h<d;++h){const p=c[h];l.append(document.createTextNode(p)),h<d-1&&l.append(document.createElement("br"))}r.append(l)}else tf.render({xfaHtml:a,div:r,intent:"richText"});r.firstChild.classList.add("richText",e),i.append(r)}class lo{#t=null;#e=null;#i;#n=null;#r=null;#s=null;#a=null;#o=null;static#c=null;constructor(t){this.#i=t,lo.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Ln,{signal:e}),t.addEventListener("pointerdown",lo.#l,{signal:e}));const i=this.#n=document.createElement("div");i.className="buttons",t.append(i);const r=this.#i.toolbarPosition;if(r){const{style:l}=t,c=this.#i._uiManager.direction==="ltr"?1-r[0]:r[0];l.insetInlineEnd=`${100*c}%`,l.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,be(t)}#h(t){this.#i._focusEventsAllowed=!0,be(t)}#f(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ln,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",lo.#c[t]),this.#f(i)&&i.addEventListener("click",r=>{e.delete()},{signal:e._signal}),this.#n.append(i)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#m),this.#r=t}addComment(t,e=null){if(this.#s)return;const i=t.renderForToolbar();if(!i)return;this.#f(i);const r=this.#a=this.#m;e?(this.#n.insertBefore(i,e),this.#n.insertBefore(r,e)):this.#n.append(i,r),this.#s=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#m)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#m)}removeButton(t){switch(t){case"comment":this.#s?.removeToolbarCommentButton(),this.#s=null,this.#a?.remove(),this.#a=null;break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,i){const r=this.#n.querySelector(i);r&&t==="comment"&&this.addComment(e,r)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class QT{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Ln,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#i.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,e){let i=0,r=0;for(const l of t){const c=l.y+l.height;if(c<i)continue;const h=l.x+(e?l.width:0);if(c>i){r=h,i=c;continue}e?h>r&&(r=h):h<r&&(r=h)}return[e?1-r:r,i]}show(t,e,i){const[r,l]=this.#r(e,i),{style:c}=this.#e||=this.#n();t.append(this.#e),c.insetInlineEnd=`${100*r}%`,c.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(t,e,i,r){const l=document.createElement("button");l.classList.add("basic",t),l.tabIndex=0,l.setAttribute("data-l10n-id",e);const c=document.createElement("span");l.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",i);const h=this.#i._signal;h instanceof AbortSignal&&!h.aborted&&(l.addEventListener("contextmenu",Ln,{signal:h}),l.addEventListener("click",r,{signal:h})),this.#t.append(l)}}function Lv(a,t,e){for(const i of e)t.addEventListener(i,a[i].bind(a))}class JT{#t=0;get id(){return`${ho}${this.#t++}`}}class nf{#t=Qd();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const l=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return zt(this,"_isSVGFittingCanvas",l)}async#n(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof e=="string"?(i.url=e,r=await nr(e,"blob")):e instanceof File?r=i.file=e:e instanceof Blob&&(r=e),r.type==="image/svg+xml"){const l=nf._isSVGFittingCanvas,c=new FileReader,h=new Image,d=new Promise((p,m)=>{h.onload=()=>{i.bitmap=h,i.isSvg=!0,p()},c.onload=async()=>{const y=i.svgUrl=c.result;h.src=await l?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=c.onerror=m});c.readAsDataURL(r),await d}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){Rt(r),i=null}return this.#i.set(t,i),i&&this.#i.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:r,type:l}=t;return this.#n(`${e}_${i}_${r}_${l}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const i=await e;return this.#n(t,i)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i?.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(e.width,e.height);return r.getContext("2d").drawImage(e,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,i),this.#i.set(i.id,i),i}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=r.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class tx{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:i,mustExec:r,type:l=NaN,overwriteIfSameType:c=!1,keepUndo:h=!1}){if(r&&t(),this.#e)return;const d={cmd:t,undo:e,post:i,type:l};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(c&&this.#t[this.#n].type===l){h&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const p=this.#n+1;p===this.#i?this.#t.splice(0,1):(this.#n=p,p<this.#t.length&&this.#t.splice(p)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class To{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=He.platform;for(const[i,r,l={}]of t)for(const c of i){const h=c.startsWith("mac+");e&&h?(this.callbacks.set(c.slice(4),{callback:r,options:l}),this.allKeys.add(c.split("+").at(-1))):!e&&!h&&(this.callbacks.set(c,{callback:r,options:l}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:r,options:{bubbles:l=!1,args:c=[],checker:h=null}}=i;h&&!h(t,e)||(r.bind(t,...c,e)(),l||be(e))}}class sf{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return KT(t),zt(this,"_colors",t)}convert(t){const e=ir(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,r]of this._colors)if(r.every((l,c)=>l===e[c]))return sf._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?ft.makeHexColor(...e):t}}class Gi{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#s=null;#a=null;#o=null;#c=new tx;#l=null;#d=null;#h=null;#f=0;#m=new Set;#p=null;#u=null;#g=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#T=null;#w=null;#A=null;#C=null;#S=!1;#E=null;#R=new JT;#D=!1;#M=!1;#P=!1;#O=null;#N=null;#F=null;#z=null;#G=null;#x=Mt.NONE;#_=new Set;#L=null;#U=null;#j=null;#X=null;#$=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#B=null;#q=null;#Q=null;#J=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Gi.prototype,e=c=>c.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),i=(c,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},r=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return zt(this,"_keyboardManager",new To([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&c.#q.contains(h)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&c.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:e}]]))}constructor(t,e,i,r,l,c,h,d,p,m,y,b,A,S,_,T){const E=this._signal=this.#t.signal;this.#q=t,this.#Q=e,this.#J=i,this.#s=r,this.#l=l,this.#U=c,this.#$=d,this._eventBus=h,h._on("editingaction",this.onEditingAction.bind(this),{signal:E}),h._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),h._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),h._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),h._on("setpreference",this.onSetPreference.bind(this),{signal:E}),h._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:E}),this.#lt(),this.#dt(),this.#et(),this.#a=d.annotationStorage,this.#T=d.filterFactory,this.#j=p,this.#C=m||null,this.#y=y,this.#v=b,this.#b=A,this.#G=S||null,this.viewParameters={realScale:Xs.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=_||null,this._supportsPinchToZoom=T!==!1,l?.setSidebarUiManager(this)}destroy(){this.#I?.resolve(),this.#I=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#g.clear(),this.#z?.clear(),this.#e=null,this.#_.clear(),this.#c.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#E?.hide(),this.#E=null,this.#F?.destroy(),this.#F=null,this.#i=null,this.#w&&(clearTimeout(this.#w),this.#w=null),this.#B&&(clearTimeout(this.#B),this.#B=null),this._editorUndoBar?.destroy(),this.#$=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#G}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return zt(this,"hcmFilter",this.#j?this.#T.addHCMFilter(this.#j.foreground,this.#j.background):"none")}get direction(){return zt(this,"direction",getComputedStyle(this.#q).direction)}get _highlightColors(){return zt(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return zt(this,"highlightColors",null);const e=new Map,i=!!this.#j;for(const[r,l]of t){const c=r.endsWith("_HCM");if(i&&c){e.set(r.replace("_HCM",""),l);continue}!i&&!c&&e.set(r,l)}return zt(this,"highlightColors",e)}get highlightColorNames(){return zt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,e=!1){this.#s?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,i,r){this.#l?.showDialog(this,t,e,i,r)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,i=void 0){this.#l?.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),r=l=>{l.pageNumber===t&&(this._eventBus._off("editorsrendered",r),e())};this._eventBus.on("editorsrendered",r),await i}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#b=e;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#q.focus()}findParent(t,e){for(const i of this.#r.values()){const{x:r,y:l,width:c,height:h}=i.div.getBoundingClientRect();if(t>=r&&t<=r+c&&e>=l&&e<=l+h)return i}return null}disableUserSelect(t=!1){this.#Q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#g.add(t)}removeShouldRescale(t){this.#g.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Xs.PDF_TO_CSS_UNITS;for(const e of this.#g)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#W({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#r.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:r,anchorOffset:l,focusNode:c,focusOffset:h}=i,d=i.toString(),m=this.#W(i).closest(".textLayer"),y=this.getSelectionBoxes(m);if(!y)return;i.empty();const b=this.#tt(m),A=this.#x===Mt.NONE,S=()=>{const _=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:r,anchorOffset:l,focusNode:c,focusOffset:h,text:d});A&&this.showAllEditors("highlight",!0,!0),e&&_?.editComment()};if(A){this.switchToMode(Mt.HIGHLIGHT,S);return}S()}commentSelection(t=""){this.highlightSelection(t,!0)}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#W(t).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(this.#E||=new QT(this),this.#E.show(i,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const e=`${ho}${t}`,i=this.#a.getRawValue(e);return i&&this.#a.remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#L&&(this.#E?.hide(),this.#L=null,this.#k({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#L)return;const r=this.#W(t).closest(".textLayer");if(!r){this.#L&&(this.#E?.hide(),this.#L=null,this.#k({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#L=e,this.#k({hasSelectedText:!0}),!(this.#x!==Mt.HIGHLIGHT&&this.#x!==Mt.NONE)&&(this.#x===Mt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#x===Mt.HIGHLIGHT?this.#tt(r):null;if(l?.toggleDrawing(),this.#M){const c=new AbortController,h=this.combinedSignal(c),d=p=>{p.type==="pointerup"&&p.button!==0||(c.abort(),l?.toggleDrawing(!0),p.type==="pointerup"&&this.#Z("main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else l?.toggleDrawing(!0),this.#Z("main_toolbar")}}#Z(t=""){this.#x===Mt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#rt()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#Z("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#_)if(e.div.contains(t)){this.#N=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#N)return;const[t,e]=this.#N;this.#N=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#O?.abort(),this.#O=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#it(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ht(),this.#it()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#_){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const l of e.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(l.type)){c.paste(l,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(l){Rt(`paste: "${l.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const l=[];for(const d of i){const p=await r.deserialize(d);if(!p)return;l.push(p)}const c=()=>{for(const d of l)this.#st(d);this.#at(l)},h=()=>{for(const d of l)d.remove()};this.addCommands({cmd:c,undo:h,mustExec:!0})}catch(l){Rt(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#x!==Mt.NONE&&!this.isEditorHandlingKeyboard&&Gi._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#Z("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#k(t){Object.entries(t).some(([i,r])=>this.#Y[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,t)}),this.#x===Mt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#V([[Ht.HIGHLIGHT_FREE,!0]]))}#V(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#k({isEditing:this.#x!==Mt.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#it(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#V(e.defaultPropertiesToUpdate)}}getId(){return this.#R.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#D?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,r=!1,l=!1){if(this.#x!==t&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#x===Mt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#x=t,t===Mt.NONE){this.setEditingState(!1),this.#pt();for(const c of this.#n.values())c.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#I.resolve();return}for(const c of this.#n.values())c.addStandaloneCommentButton();t===Mt.SIGNATURE&&await this.#U?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const c of this.#r.values())c.updateMode(t);if(t===Mt.POPUP){this.#i||=await this.#$.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const c=new Set,h=[];for(const d of this.#n.values()){const{annotationElementId:p,hasComment:m,deleted:y}=d;p&&c.add(p),m&&!y&&h.push(d.getData())}for(const d of this.#i){const{id:p,popupRef:m,contentsObj:y}=d;m&&y?.str&&!c.has(p)&&!this.#m.has(p)&&h.push(d)}this.#l?.showSidebar(h)}if(!e){i&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(const c of this.#n.values())c.uid===e?(this.setSelected(c),l?c.editComment():r?c.enterInEditMode():c.focus()):c.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#x&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Ht.CREATE:this.currentLayer.addNewEditor(e);return;case Ht.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#_)i.updateParams(t,e);else for(const i of this.#u)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const l of this.#n.values())l.editorType===t&&l.show(e);(this.#X?.get(Ht.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#V([[Ht.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#P!==t){this.#P=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#D){this.#D=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#D){this.#D=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.focusMainContainer(),this.#w=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#z?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#st(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#V(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#_);return t}updateUI(t){this.#gt===t&&this.#V(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#V(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#_.has(t)){this.#_.delete(t),t.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#_.add(t),t.select(),this.#V(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const e of this.#_)e!==t&&e.unselect();this.#_.clear(),this.#_.add(t),t.select(),this.#V(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(t){return this.#_.has(t)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(t){t.unselect(),this.#_.delete(t),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}get isEnterHandled(){return this.#_.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#k({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#_],i=()=>{this._editorUndoBar?.show(r,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},r=()=>{for(const l of e)this.#st(l)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const e of this.#_)e.unselect();this.#_.clear();for(const e of t)e.isEmpty()||(this.#_.add(e),e.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#_)t.commit();this.#at(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#x!==Mt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#_)t.unselect();this.#_.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;const[r,l]=this.#H,c=[...this.#_],h=1e3;this.#B&&clearTimeout(this.#B),this.#B=setTimeout(()=>{this.#B=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const d of c)this.#n.has(d.id)&&(d.translateInPage(r,l),d.translationDone())},undo:()=>{for(const d of c)this.#n.has(d.id)&&(d.translateInPage(-r,-l),d.translationDone())},mustExec:!1})},h);for(const d of c)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#_)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let e=!1;for(const[{x:r,y:l,pageIndex:c},h]of t)h.newX=r,h.newY=l,h.newPageIndex=c,e||=r!==h.savedX||l!==h.savedY||c!==h.savedPageIndex;if(!e)return!1;const i=(r,l,c,h)=>{if(this.#n.has(r.id)){const d=this.#r.get(h);d?r._setParentAndPosition(d,l,c):(r.pageIndex=h,r.x=l,r.y=c)}};return this.addCommands({cmd:()=>{for(const[r,{newX:l,newY:c,newPageIndex:h}]of t)i(r,l,c,h)},undo:()=>{for(const[r,{savedX:l,savedY:c,savedPageIndex:h}]of t)i(r,l,c,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(const i of this.#p.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#_.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#x}isEditingMode(){return this.#x!==Mt.NONE}get imageManager(){return zt(this,"imageManager",new nf)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,m=e.rangeCount;p<m;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:i,y:r,width:l,height:c}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(p,m,y,b)=>({x:(m-r)/c,y:1-(p+y-i)/l,width:b/c,height:y/l});break;case"180":h=(p,m,y,b)=>({x:1-(p+y-i)/l,y:1-(m+b-r)/c,width:y/l,height:b/c});break;case"270":h=(p,m,y,b)=>({x:1-(m+b-r)/c,y:(p-i)/l,width:b/c,height:y/l});break;default:h=(p,m,y,b)=>({x:(p-i)/l,y:(m-r)/c,width:y/l,height:b/c});break}const d=[];for(let p=0,m=e.rangeCount;p<m;p++){const y=e.getRangeAt(p);if(!y.collapsed)for(const{x:b,y:A,width:S,height:_}of y.getClientRects())S===0||_===0||d.push(h(b,A,S,_))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#a.getRawValue(e);i&&(this.#x===Mt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const r=this.#z?.get(t);r&&(r.setCanvas(e,i),this.#z.delete(t))}addMissingCanvas(t,e){(this.#z||=new Map).set(t,e)}}class mi{#t=null;#e=!1;#i=null;#n=null;#r=null;#s=null;#a=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,mi.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){mi._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",mi.#f.missing),e.setAttribute("data-l10n-id",mi.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;t.addEventListener("contextmenu",Ln,{signal:i}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:i});const r=l=>{l.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#a=!0,r(l))},{signal:i}),await this.#p(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await mi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:r,cancel:l=!1}){i&&(this.#l=i,this.#d=r),!(this.#t===t&&this.#e===e)&&(l||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",mi.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",mi.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const r=100,l=this.#c._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:l}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:l})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Ql{#t=null;#e=null;#i=!1;#n=null;#r=null;#s=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const r=this.#n.commentButtonColor;r&&(i.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:i}=this.#t.getBoundingClientRect(),{x:r,y:l,width:c,height:h}=this.#n.parent.boundingClientRect;return[(t-r)/c,(e+i-l)/h]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const i=this.#n._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",Ln,{signal:i}),e&&(t.addEventListener("focusin",l=>{this.#n._focusEventsAllowed=!1,be(l)},{capture:!0,signal:i}),t.addEventListener("focusout",l=>{this.#n._focusEventsAllowed=!0,be(l)},{capture:!0,signal:i})),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:i});const r=l=>{l.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:i}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#i=!0,r(l))},{signal:i}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:i}),t}edit(t){const e=this.commentPopupPositionInLayer;let i,r;if(e)[i,r]=e;else{[i,r]=this.#n.commentButtonPosition;const{width:m,height:y,x:b,y:A}=this.#n;i=b+i*m,r=A+r*y}const l=this.#n.parent.boundingClientRect,{x:c,y:h,width:d,height:p}=l;this.#n._uiManager.editComment(this.#n,c+i*d,h+r*p,{...t,parentDimensions:l})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#s,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#s=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#s=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#s=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class xo{#t;#e=!1;#i=null;#n;#r;#s;#a;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:l=null,onPinchEnd:c=null,signal:h}){this.#t=t,this.#i=i,this.#n=e,this.#r=r,this.#s=l,this.#a=c,this.#d=new AbortController,this.#c=AbortSignal.any([h,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ei.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,l=AbortSignal.any([this.#c,r.signal]),c=this.#t,h={capture:!0,signal:l,passive:!1},d=p=>{p.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(be(p),d(p))},h),c.addEventListener("pointerup",d,h),c.addEventListener("pointercancel",d,h);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),l=this.#t,c={signal:r,capture:!1,passive:!1};l.addEventListener("touchmove",this.#m.bind(this),c);const h=this.#p.bind(this);l.addEventListener("touchend",h,c),l.addEventListener("touchcancel",h,c),c.capture=!0,l.addEventListener("pointerdown",be,c),l.addEventListener("pointermove",be,c),l.addEventListener("pointercancel",be,c),l.addEventListener("pointerup",be,c),this.#r?.()}if(be(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;be(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:r,screenY:l}=e,{screenX:c,screenY:h}=i,d=this.#l,{touch0X:p,touch0Y:m,touch1X:y,touch1Y:b}=d,A=y-p,S=b-m,_=c-r,T=h-l,E=Math.hypot(_,T)||1,x=Math.hypot(A,S)||1;if(!this.#e&&Math.abs(x-E)<=xo.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=r,d.touch0Y=l,d.touch1X=c,d.touch1Y=h,!this.#e){this.#e=!0;return}const C=[(r+c)/2,(l+h)/2];this.#s?.(C,x,E)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(be(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class wt{#t=null;#e=null;#i=null;#n=null;#r=null;#s=!1;#a=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#p=!1;#u=null;#g=!1;#y=!1;#v=!1;#b=null;#T=0;#w=0;#A=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#E=wt._zIndex++;static _borderLineWidth=-1;static _colorManager=new sf;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=wt.prototype._resizeWithKeyboard,e=Gi.TRANSLATE_SMALL,i=Gi.TRANSLATE_BIG;return zt(this,"_resizerKeyboardManager",new To([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],wt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:r,pageX:l,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[l,c];const[h,d]=this.parentDimensions;this.x=t.x/h,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return zt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new ex({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(wt._l10n??=t,wt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),wt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);wt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){re("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(t){this.#S=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#B(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,r){const[l,c]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(t+i)/l,this.y=(e+r)/c,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,r]=this.parentDimensions;this.setAt(t*i,e*r,this.width*i,this.height*r),this._onTranslated()}#R([t,e],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/t,this.y+=r/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#R(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#R(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[r,l]}=this;if(this.x+=t/r,this.y+=e/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:h}=this;const[d,p]=this.getBaseTranslation();c+=d,h+=p;const{style:m}=i;m.left=`${(100*c).toFixed(2)}%`,m.top=`${(100*h).toFixed(2)}%`,this._onTranslating(c,h),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=wt,r=i/t,l=i/e;switch(this.rotation){case 90:return[-r,l];case 180:return[r,l];case 270:return[r,-l];default:return[-r,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,r]}=this;let{x:l,y:c,width:h,height:d}=this;if(h*=i,d*=r,l*=i,c*=r,this._mustFixPosition)switch(t){case 0:l=sn(l,0,i-h),c=sn(c,0,r-d);break;case 90:l=sn(l,0,i-d),c=sn(c,h,r);break;case 180:l=sn(l,h,i),c=sn(c,d,r);break;case 270:l=sn(l,d,i),c=sn(c,0,r-h);break}this.x=l/=i,this.y=c/=r;const[p,m]=this.getBaseTranslation();l+=p,c+=m,e.left=`${(100*l).toFixed(2)}%`,e.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#D(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return wt.#D(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return wt.#D(t,e,360-this.parentRotation)}#M(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#P(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",this.#O.bind(this,i),{signal:e}),r.addEventListener("contextmenu",Ln,{signal:e}),r.tabIndex=-1}this.div.prepend(this.#c)}#O(t,e){e.preventDefault();const{isMac:i}=He.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#i?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const l=new AbortController,c=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#z.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",be,{passive:!1,signal:c}),window.addEventListener("contextmenu",Ln,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=h,this.div.style.cursor=d,this.#F()};window.addEventListener("pointerup",p,{signal:c}),window.addEventListener("blur",p,{signal:c})}#N(t,e,i,r){this.width=i,this.height=r,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:r}=this.#d;this.#d=null;const l=this.x,c=this.y,h=this.width,d=this.height;l===t&&c===e&&h===i&&d===r||this.addCommands({cmd:this.#N.bind(this,l,c,h,d),undo:this.#N.bind(this,t,e,i,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#z(t,e){const[i,r]=this.parentDimensions,l=this.x,c=this.y,h=this.width,d=this.height,p=wt.MIN_SIZE/i,m=wt.MIN_SIZE/r,y=this.#M(this.rotation),b=(k,j)=>[y[0]*k+y[2]*j,y[1]*k+y[3]*j],A=this.#M(360-this.rotation),S=(k,j)=>[A[0]*k+A[2]*j,A[1]*k+A[3]*j];let _,T,E=!1,x=!1;switch(t){case"topLeft":E=!0,_=(k,j)=>[0,0],T=(k,j)=>[k,j];break;case"topMiddle":_=(k,j)=>[k/2,0],T=(k,j)=>[k/2,j];break;case"topRight":E=!0,_=(k,j)=>[k,0],T=(k,j)=>[0,j];break;case"middleRight":x=!0,_=(k,j)=>[k,j/2],T=(k,j)=>[0,j/2];break;case"bottomRight":E=!0,_=(k,j)=>[k,j],T=(k,j)=>[0,0];break;case"bottomMiddle":_=(k,j)=>[k/2,j],T=(k,j)=>[k/2,0];break;case"bottomLeft":E=!0,_=(k,j)=>[0,j],T=(k,j)=>[k,0];break;case"middleLeft":x=!0,_=(k,j)=>[0,j/2],T=(k,j)=>[k,j/2];break}const C=_(h,d),L=T(h,d);let O=b(...L);const P=wt._round(l+O[0]),z=wt._round(c+O[1]);let $=1,Y=1,et,J;if(e.fromKeyboard)({deltaX:et,deltaY:J}=e);else{const{screenX:k,screenY:j}=e,[nt,vt]=this.#l;[et,J]=this.screenToPageTranslation(k-nt,j-vt),this.#l[0]=k,this.#l[1]=j}if([et,J]=S(et/i,J/r),E){const k=Math.hypot(h,d);$=Y=Math.max(Math.min(Math.hypot(L[0]-C[0]-et,L[1]-C[1]-J)/k,1/h,1/d),p/h,m/d)}else x?$=sn(Math.abs(L[0]-C[0]-et),p,1)/h:Y=sn(Math.abs(L[1]-C[1]-J),m,1)/d;const at=wt._round(h*$),ot=wt._round(d*Y);O=b(...T(at,ot));const rt=P-O[0],ht=z-O[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=at,this.height=ot,this.x=rt,this.y=ht,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new lo(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(mi.initialize(wt._l10n),this.#i=new mi(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Ql(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:i,deleted:r}}=this.#n;return{text:e,richText:t,date:i,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Ql(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(this.#n||=new Ql(this),this.#n.setInitialText(t,i),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Ql(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[l]=this.pageDimensions,[c]=this.pageTranslation,h=c+l+1,d=r-100,p=h+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[h,d,p,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#s?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#j();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[r,l]=this.getInitialTranslation();return this.translate(r,l),Lv(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new xo({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#G.bind(this),onPinching:this.#x.bind(this),onPinchEnd:this.#_.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#G(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#x(t,e,i){let l=.7*(i/e)+1-.7;if(l===1)return;const c=this.#M(this.rotation),h=(P,z)=>[c[0]*P+c[2]*z,c[1]*P+c[3]*z],[d,p]=this.parentDimensions,m=this.x,y=this.y,b=this.width,A=this.height,S=wt.MIN_SIZE/d,_=wt.MIN_SIZE/p;l=Math.max(Math.min(l,1/b,1/A),S/b,_/A);const T=wt._round(b*l),E=wt._round(A*l);if(T===b&&E===A)return;this.#u||=[m,y,b,A];const x=h(b/2,A/2),C=wt._round(m+x[0]),L=wt._round(y+x[1]),O=h(T/2,E/2);this.x=C-O[0],this.y=L-O[1],this.width=T,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#_(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:e}=He.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#U(t);return}this.#L(t)}#L(t){const{isMac:e}=He.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,l=this._uiManager.combinedSignal(r),c={capture:!0,passive:!1,signal:l},h=p=>{r.abort(),this.#a=null,this.#p=!1,this._uiManager.endDragSession()||this.#L(p),i&&this._onStopDragging()};e&&(this.#T=t.clientX,this.#w=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",p=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:y,pointerId:b}=p;if(b!==this.#a){be(p);return}const[A,S]=this.screenToPageTranslation(m-this.#T,y-this.#w);this.#T=m,this.#w=y,this._uiManager.dragSelectedEditors(A,S)},c),window.addEventListener("touchmove",be,c),window.addEventListener("pointerdown",p=>{p.pointerType===this.#o&&(this.#C||p.isPrimary)&&h(p),be(p)},c));const d=p=>{if(!this.#a||this.#a===p.pointerId){h(p);return}be(p)};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const r=this.parentScale,[l,c]=this.pageDimensions,[h,d]=this.pageTranslation,p=t/r,m=e/r,y=this.x*l,b=this.y*c,A=this.width*l,S=this.height*c;switch(i){case 0:return[y+p+h,c-b-m-S+d,y+p+A+h,c-b-m+d];case 90:return[y+m+h,c-b+p+d,y+m+S+h,c-b+p+A+d];case 180:return[y-p-A+h,c-b+m+d,y-p+h,c-b+m+S+d];case 270:return[y-m-S+h,c-b-p-A+d,y-m+h,c-b-p+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,r,l,c]=t,h=l-i,d=c-r;switch(this.rotation){case 0:return[i,e-c,h,d];case 90:return[i,e-r,d,h];case 180:return[l,e-r,h,d];case 270:return[l,e-c,d,h];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&wt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:r,deleted:l,richText:c},uid:h,pageIndex:d,creationDate:p,modificationDate:m}=this;return{id:h,pageIndex:d,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:p,modificationDate:i||m,popupRef:!l,color:e,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:l,innerWidth:c}=window;return e<c&&r>0&&t<l&&i>0}#j(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#j()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,i){const r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[l,c]=r.pageDimensions,[h,d,p,m]=r.getRectInCurrentCoords(t.rect,c);return r.x=h/l,r.y=d/c,r.width=p/l,r.height=m/c,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#B(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#C?.destroy(),this.#C=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#P(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,r,l,c]=this.getPDFRect();return[wt._round(i+(l-i)*t),wt._round(r+(c-r)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const c=this.#X.bind(this),h=this.#$.bind(this),d=this._uiManager._signal;for(const p of this.#e){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",c,{signal:d}),p.addEventListener("blur",h,{signal:d}),p.addEventListener("focus",this.#Y.bind(this,m),{signal:d}),p.setAttribute("data-l10n-id",wt._l10nResizer[m])}}const i=this.#e[0];let r=0;for(const c of e){if(c===i)break;r++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(l!==r){if(l<r)for(let h=0;h<r-l;h++)this.#c.append(this.#c.firstChild);else if(l>r)for(let h=0;h<l-r;h++)this.#c.firstChild.before(this.#c.lastChild);let c=0;for(const h of e){const p=this.#e[c++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",wt._l10nResizer[p])}}this.#H(0),this.#v=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#X(t){wt._resizerKeyboardManager.exec(this,t)}#$(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#B()}#Y(t){this.#m=this.#v?t:""}#H(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#z(this.#m,{deltaX:t,deltaY:e,fromKeyboard:!0})}#B(){this.#v=!1,this.#H(-1),this.#F()}_stopResizingWithKeyboard(){this.#B(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(t){this.#g=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#A||=new Map;const{action:i}=t;let r=this.#A.get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(i),this.#A.size===0&&(this.#A=null)},wt._telemetryTimeout),this.#A.set(i,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class ex extends wt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const db=3285377520,Gn=4294901760,fi=65535;class Nv{constructor(t){this.h1=t?t&4294967295:db,this.h2=t?t&4294967295:db}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let _=0,T=t.length;_<T;_++){const E=t.charCodeAt(_);E<=255?e[i++]=E:(e[i++]=E>>>8,e[i++]=E&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,l=i-r*4,c=new Uint32Array(e.buffer,0,r);let h=0,d=0,p=this.h1,m=this.h2;const y=3432918353,b=461845907,A=y&fi,S=b&fi;for(let _=0;_<r;_++)_&1?(h=c[_],h=h*y&Gn|h*A&fi,h=h<<15|h>>>17,h=h*b&Gn|h*S&fi,p^=h,p=p<<13|p>>>19,p=p*5+3864292196):(d=c[_],d=d*y&Gn|d*A&fi,d=d<<15|d>>>17,d=d*b&Gn|d*S&fi,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(h=0,l){case 3:h^=e[r*4+2]<<16;case 2:h^=e[r*4+1]<<8;case 1:h^=e[r*4],h=h*y&Gn|h*A&fi,h=h<<15|h>>>17,h=h*b&Gn|h*S&fi,r&1?p^=h:m^=h}this.h1=p,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Gn|t*36045&fi,e=e*4283543511&Gn|((e<<16|t>>>16)*2950163797&Gn)>>>16,t^=e>>>1,t=t*444984403&Gn|t*60499&fi,e=e*3301882366&Gn|((e<<16|t>>>16)*3120437893&Gn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Td=Object.freeze({map:null,hash:"",transfer:void 0});class af{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#n.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof wt&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#n.values())if(i instanceof wt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#n.get(t);let r=!1;if(i!==void 0)for(const[l,c]of Object.entries(e))i[l]!==c&&(r=!0,i[l]=c);else r=!0,this.#n.set(t,e);r&&this.#r(),e instanceof wt&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new zv(this)}get serializable(){if(this.#n.size===0)return Td;const t=new Map,e=new Nv,i=[],r=Object.create(null);let l=!1;for(const[c,h]of this.#n){const d=h instanceof wt?h.serialize(!1,r):h;d&&(t.set(c,d),e.update(`${c}:${JSON.stringify(d)}`),l||=!!d.bitmap)}if(l)for(const c of t.values())c.bitmap&&i.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Td}get editorStats(){let t=null;const e=new Map;let i=0,r=0;for(const l of this.#n.values()){if(!(l instanceof wt)){l.popup&&(l.popup.deleted?r+=1:i+=1);continue}l.isCommentDeleted?r+=1:l.hasEditedComment&&(i+=1);const c=l.telemetryFinalData;if(!c)continue;const{type:h}=c;e.has(h)||e.set(h,Object.getPrototypeOf(l).constructor),t||=Object.create(null);const d=t[h]||=new Map;for(const[p,m]of Object.entries(c)){if(p==="type")continue;let y=d.get(p);y||(y=new Map,d.set(p,y));const b=y.get(m)??0;y.set(m,b+1)}}if((r>0||i>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:i}),!t)return null;for(const[l,c]of e)t[l]=c.computeTelemetryFinalData(t[l]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const i=this.#i?.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class zv extends af{#t;constructor(t){super();const{map:e,hash:i,transfer:r}=t.serializable,l=structuredClone(e,r?{transfer:r}:null);this.#t={map:l,hash:i,transfer:r}}get print(){re("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return zt(this,"modifiedIds",{ids:new Set,hash:""})}}class nx{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(qt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:l,style:c}=t,h=new FontFace(r,l,c);this.addNativeFontFace(h);try{await h.load(),this.#t.add(r),i?.(t)}catch{Rt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}re("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw Rt(`Failed to load font '${i.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return zt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return zt(this,"isSyncFontLoadingSupported",ln||He.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(qt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const l=i.shift();setTimeout(l.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:e,callback:t};return i.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return zt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(L,O){return L.charCodeAt(O)<<24|L.charCodeAt(O+1)<<16|L.charCodeAt(O+2)<<8|L.charCodeAt(O+3)&255}function r(L,O,P,z){const $=L.substring(0,O),Y=L.substring(O+P);return $+z+Y}let l,c;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let p=0;function m(L,O){if(++p>30){Rt("Load test font never loaded."),O();return}if(d.font="30px "+L,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(m.bind(null,L,O))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=r(b,976,y.length,y);const S=16,_=1482184792;let T=i(b,S);for(l=0,c=y.length-3;l<c;l+=4)T=T-_+i(y,l)|0;l<y.length&&(T=T-_+i(y+"XXX",l)|0),b=r(b,S,4,VT(T));const E=`url(data:font/opentype;base64,${btoa(b)});`,x=`@font-face {font-family:"${y}";src:${E}}`;this.insertRule(x);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const L of[t.loadedName,y]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=L,C.append(O)}this._document.body.append(C),m(y,()=>{C.remove(),e.complete()})}}class ix{#t;constructor(t,e=null,i,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,i&&Object.assign(this,i),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${xv(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let r;try{r=t.get(i)}catch(c){Rt(`getPathGenerator - ignoring character: "${c}".`)}const l=new Path2D(r||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=l}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function sx(a){if(a instanceof URL)return a.href;if(typeof a=="string"){if(ln)return a;const t=URL.parse(a,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ax(a){if(ln&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return So(a);if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="object"&&!isNaN(a?.length))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Jl(a){if(typeof a!="string")return null;if(a.endsWith("/"))return a;throw new Error(`Invalid factory url: "${a}" must include trailing slash.`)}const xd=a=>typeof a=="object"&&Number.isInteger(a?.num)&&a.num>=0&&Number.isInteger(a?.gen)&&a.gen>=0,rx=a=>typeof a=="object"&&typeof a?.name=="string",Bv=XT.bind(null,xd,rx);class ox{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,i)})}addEventListener(t,e,i=null){let r=null;if(i?.signal instanceof AbortSignal){const{signal:l}=i;if(l.aborted){Rt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);r=()=>l.removeEventListener("abort",c),l.addEventListener("abort",c)}this.#t.set(e,r)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const tc={DATA:1,ERROR:2},Oe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function fb(){}function bn(a){if(a instanceof Vi||a instanceof pc||a instanceof ab||a instanceof fo||a instanceof ld)return a;switch(a instanceof Error||typeof a=="object"&&a!==null||re('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new Vi(a.message);case"InvalidPDFException":return new pc(a.message);case"PasswordException":return new ab(a.message,a.code);case"ResponseException":return new fo(a.message,a.status,a.missing);case"UnknownErrorException":return new ld(a.message,a.details)}return new ld(a.message,a.toString())}class io{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const i=t.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===tc.DATA)r.resolve(t.data);else if(t.callback===tc.ERROR)r.reject(bn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,r=t.sourceName,l=this.comObj;Promise.try(e,t.data).then(function(c){l.postMessage({sourceName:i,targetName:r,callback:tc.DATA,callbackId:t.callbackId,data:c})},function(c){l.postMessage({sourceName:i,targetName:r,callback:tc.ERROR,callbackId:t.callbackId,reason:bn(c)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const r=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[r]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(c){l.reject(c)}return l.promise}sendWithStream(t,e,i,r){const l=this.streamId++,c=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[l]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:h,action:t,streamId:l,data:e,desiredSize:p.desiredSize},r),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[l].pullCall=m,d.postMessage({sourceName:c,targetName:h,stream:Oe.PULL,streamId:l,desiredSize:p.desiredSize}),m.promise},cancel:p=>{qt(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[l].cancelCall=m,this.streamControllers[l].isClosed=!0,d.postMessage({sourceName:c,targetName:h,stream:Oe.CANCEL,streamId:l,reason:bn(p)}),m.promise}},i)}#i(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,l=this.comObj,c=this,h=this.actionHandler[t.action],d={enqueue(p,m=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=m,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:i,targetName:r,stream:Oe.ENQUEUE,streamId:e,chunk:p},y)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:r,stream:Oe.CLOSE,streamId:e}),delete c.streamSinks[e])},error(p){qt(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:r,stream:Oe.ERROR,streamId:e,reason:bn(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(h,t.data,d).then(function(){l.postMessage({sourceName:i,targetName:r,stream:Oe.START_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:i,targetName:r,stream:Oe.START_COMPLETE,streamId:e,reason:bn(p)})})}#n(t){const e=t.streamId,i=this.sourceName,r=t.sourceName,l=this.comObj,c=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case Oe.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(bn(t.reason));break;case Oe.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(bn(t.reason));break;case Oe.PULL:if(!h){l.postMessage({sourceName:i,targetName:r,stream:Oe.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||fb).then(function(){l.postMessage({sourceName:i,targetName:r,stream:Oe.PULL_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:i,targetName:r,stream:Oe.PULL_COMPLETE,streamId:e,reason:bn(p)})});break;case Oe.ENQUEUE:if(qt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case Oe.CLOSE:if(qt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#r(c,e);break;case Oe.ERROR:qt(c,"error should have stream controller"),c.controller.error(bn(t.reason)),this.#r(c,e);break;case Oe.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(bn(t.reason)),this.#r(c,e);break;case Oe.CANCEL:if(!h)break;const d=bn(t.reason);Promise.try(h.onCancel||fb,d).then(function(){l.postMessage({sourceName:i,targetName:r,stream:Oe.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){l.postMessage({sourceName:i,targetName:r,stream:Oe.CANCEL_COMPLETE,streamId:e,reason:bn(p)})}),h.sinkCapability.reject(d),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class Pv{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){re("Abstract method `_createCanvas` called.")}}class lx extends Pv{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class Fv{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){re("Abstract method `_fetch` called.")}}class pb extends Fv{async _fetch(t){const e=await nr(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):So(e)}}class Uv{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,r,l){return"none"}destroy(t=!1){}}class cx extends Uv{#t;#e;#i;#n;#r;#s;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#s||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#r.createElementNS(ji,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#r.createElementNS(ji,"defs"),t.append(i),i.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],p=new Array(256);for(let y=0;y<256;y++)p[y]=d[y]/255;const m=p.join(",");return[m,m,m]}const[e,i,r]=t,l=new Array(256),c=new Array(256),h=new Array(256);for(let d=0;d<256;d++)l[d]=e[d]/255,c[d]=i[d]/255,h[d]=r[d]/255;return[l.join(","),c.join(","),h.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(Eo(e)?Rt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Wd(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,r,l]=this.#d(t),c=t.length===1?i:`${i}${r}${l}`;if(e=this.#o.get(c),e)return this.#o.set(t,e),e;const h=`g_${this.#n}_transfer_map_${this.#a++}`,d=this.#h(h);this.#o.set(t,d),this.#o.set(c,d);const p=this.#p(h);return this.#g(i,r,l,p),d}addHCMFilter(t,e){const i=`${t}-${e}`,r="base";let l=this.#c.get(r);if(l?.key===i||(l?(l.filter?.remove(),l.key=i,l.url="none",l.filter=null):(l={key:i,url:"none",filter:null},this.#c.set(r,l)),!t||!e))return l.url;const c=this.#v(t);t=ft.makeHexColor(...c);const h=this.#v(e);if(e=ft.makeHexColor(...h),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return l.url;const d=new Array(256);for(let A=0;A<=255;A++){const S=A/255;d[A]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const p=d.join(","),m=`g_${this.#n}_hcm_filter`,y=l.filter=this.#p(m);this.#g(p,p,p,y),this.#m(y);const b=(A,S)=>{const _=c[A]/255,T=h[A]/255,E=new Array(S+1);for(let x=0;x<=S;x++)E[x]=_+x/S*(T-_);return E.join(",")};return this.#g(b(0,5),b(1,5),b(2,5),y),l.url=this.#h(m),l.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),r=`alpha_${i}`;if(e=this.#o.get(r),e)return this.#o.set(t,e),e;const l=`g_${this.#n}_alpha_map_${this.#a++}`,c=this.#h(l);this.#o.set(t,c),this.#o.set(r,c);const h=this.#p(l);return this.#y(i,h),c}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,r;if(t?([i]=this.#d([t]),r=`luminosity_${i}`):r="luminosity",e=this.#o.get(r),e)return this.#o.set(t,e),e;const l=`g_${this.#n}_luminosity_map_${this.#a++}`,c=this.#h(l);this.#o.set(t,c),this.#o.set(r,c);const h=this.#p(l);return this.#f(h),t&&this.#y(i,h),c}addHighlightHCMFilter(t,e,i,r,l){const c=`${e}-${i}-${r}-${l}`;let h=this.#c.get(t);if(h?.key===c||(h?(h.filter?.remove(),h.key=c,h.url="none",h.filter=null):(h={key:c,url:"none",filter:null},this.#c.set(t,h)),!e||!i))return h.url;const[d,p]=[e,i].map(this.#v.bind(this));let m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[b,A]=[r,l].map(this.#v.bind(this));y<m&&([m,y,b,A]=[y,m,A,b]),this.#l.style.color="";const S=(E,x,C)=>{const L=new Array(256),O=(y-m)/C,P=E/255,z=(x-E)/(255*C);let $=0;for(let Y=0;Y<=C;Y++){const et=Math.round(m+Y*O),J=P+Y*z;for(let at=$;at<=et;at++)L[at]=J;$=et+1}for(let Y=$;Y<256;Y++)L[Y]=L[$-1];return L.join(",")},_=`g_${this.#n}_hcm_${t}_filter`,T=h.filter=this.#p(_);return this.#m(T),this.#g(S(b[0],A[0],5),S(b[1],A[1],5),S(b[2],A[2],5),T),h.url=this.#h(_),h.url}destroy(t=!1){t&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#a=0)}#f(t){const e=this.#r.createElementNS(ji,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#m(t){const e=this.#r.createElementNS(ji,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(ji,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,i){const r=this.#r.createElementNS(ji,e);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)}#g(t,e,i,r){const l=this.#r.createElementNS(ji,"feComponentTransfer");r.append(l),this.#u(l,"feFuncR",t),this.#u(l,"feFuncG",e),this.#u(l,"feFuncB",i)}#y(t,e){const i=this.#r.createElementNS(ji,"feComponentTransfer");e.append(i),this.#u(i,"feFuncA",t)}#v(t){return this.#l.style.color=t,ir(getComputedStyle(this.#l).getPropertyValue("color"))}}class Iv{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){re("Abstract method `_fetch` called.")}}class gb extends Iv{async _fetch(t){const e=await nr(t,"arraybuffer");return new Uint8Array(e)}}class jv{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){re("Abstract method `_fetch` called.")}}class mb extends jv{async _fetch(t){const e=await nr(t,"arraybuffer");return new Uint8Array(e)}}ln&&Rt("Please use the `legacy` build in Node.js environments.");async function rf(a){const e=await process.getBuiltinModule("fs").promises.readFile(a);return new Uint8Array(e)}class ux extends Uv{}class hx extends Pv{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class dx extends Fv{async _fetch(t){return rf(t)}}class fx extends Iv{async _fetch(t){return rf(t)}}class px extends jv{async _fetch(t){return rf(t)}}const Ua="__forcedDependency",{floor:yb,ceil:bb}=Math;function ec(a,t,e,i,r,l){a[t*4+0]=Math.min(a[t*4+0],e),a[t*4+1]=Math.min(a[t*4+1],i),a[t*4+2]=Math.max(a[t*4+2],r),a[t*4+3]=Math.max(a[t*4+3],l)}const Cd=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class gx{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Cd}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const nc=(a,t)=>{if(!a)return;let e=a.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},a.set(t,e)),e};class mx{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Ua]:[]};#i=new Map;#n=[];#r=[];#s=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#p;#u;#g;constructor(t,e,i=!1){this.#f=t.width,this.#m=t.height,this.#y(e),i&&(this.#g=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const i=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),e&&e.length>0?(this.#u.set(e),this.#u.fill(Cd,e.length)):this.#u.fill(Cd)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Ua]:{__proto__:this.#e[Ua]}},this.#a={__proto__:this.#a},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const i=this.#n.pop();return i!==void 0&&(nc(this.#g,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(nc(this.#g,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(nc(this.#g,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#s.push(ft.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,i){this.#t[t]=this.#i.get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Ua,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Ua,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,i,r,l,c){const h=ft.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];ft.axialAlignedBoundingBox([i,l,r,c],h,d);const p=ft.intersect(this.#a,d);return p?(this.#a[0]=p[0],this.#a[1]=p[1],this.#a[2]=p[2],this.#a[3]=p[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,e,i,r,l,c){const h=this.#a;if(h[0]===1/0)return this;const d=ft.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform());if(h[0]===-1/0)return ft.axialAlignedBoundingBox([i,l,r,c],d,this.#o),this;const p=[1/0,1/0,-1/0,-1/0];return ft.axialAlignedBoundingBox([i,l,r,c],d,p),this.#o[0]=Math.min(this.#o[0],Math.max(p[0],h[0])),this.#o[1]=Math.min(this.#o[1],Math.max(p[1],h[1])),this.#o[2]=Math.max(this.#o[2],Math.min(p[2],h[2])),this.#o[3]=Math.max(this.#o[3],Math.min(p[3],h[3])),this}recordCharacterBBox(t,e,i,r=1,l=0,c=0,h){const d=i.bbox;let p,m;if(d&&(p=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(i),p!==!1&&(m=[0,0,0,0],ft.axialAlignedBoundingBox(d,i.fontMatrix,m),(r!==1||l!==0||c!==0)&&ft.scaleMinMax([r,0,0,-r,l,c],m),p)))return this.recordBBox(t,e,m[0],m[2],m[1],m[3]);if(!h)return this.recordFullPageBBox(t);const y=h();return d&&m&&p===void 0&&(p=m[0]<=l-y.actualBoundingBoxLeft&&m[2]>=l+y.actualBoundingBoxRight&&m[1]<=c-y.actualBoundingBoxAscent&&m[3]>=c+y.actualBoundingBoxDescent,this.#h.set(i,p),p)?this.recordBBox(t,e,m[0],m[2],m[1],m[3]):this.recordBBox(t,e,l-y.actualBoundingBoxLeft,l+y.actualBoundingBoxRight,c-y.actualBoundingBoxAscent,c+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#m,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#l,r=this.#t,l=this.#e;for(const c of e)c in this.#t?i.add(r[c]):c in l&&l[c].forEach(i.add,i);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Ua]),this.#g){const i=nc(this.#g,t),{dependencies:r}=i;this.#l.forEach(r.add,r),this.#n.forEach(r.add,r),this.#r.forEach(r.add,r),r.delete(t),i.isRenderingOperation=!0}if(this.#c===t){const i=yb(this.#o[0]*256/this.#f),r=yb(this.#o[1]*256/this.#m),l=bb(this.#o[2]*256/this.#f),c=bb(this.#o[3]*256/this.#m);ec(this.#p,t,i,r,l,c);for(const h of this.#l)h!==t&&ec(this.#p,h,i,r,l,c);for(const h of this.#n)h!==t&&ec(this.#p,h,i,r,l,c);for(const h of this.#r)h!==t&&ec(this.#p,h,i,r,l,c);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const i=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const r of i)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new gx(this.#u,this.#p)}takeDebugMetadata(){return this.#g}}class yc{#t;#e;#i;#n=0;#r=0;constructor(t,e,i){if(t instanceof yc&&t.#i===!!i)return t;this.#t=t,this.#e=e,this.#i=!!i}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,i,r,l,c){return this.#i||this.#t.recordClipBox(this.#e,e,i,r,l,c),this}recordBBox(t,e,i,r,l,c){return this.#i||this.#t.recordBBox(this.#e,e,i,r,l,c),this}recordCharacterBBox(t,e,i,r,l,c,h){return this.#i||this.#t.recordCharacterBBox(this.#e,e,i,r,l,c,h),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const qn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},We={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Dd(a,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],e,i),a.clip(r)}class of{isModifyingCurrentTransform(){return!1}getPattern(){re("Abstract method `getPattern` called.")}}class yx extends of{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,r){let l;if(r===We.STROKE||r===We.FILL){const c=e.current.getClippedPathBoundingBox(r,ye(t))||[0,0,0,0],h=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,p=e.cachedCanvases.getCanvas("pattern",h,d),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-c[0],-c[1]),i=ft.transform(i,[1,0,0,1,c[0],c[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),Dd(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),l=t.createPattern(p.canvas,"no-repeat");const y=new DOMMatrix(i);l.setTransform(y)}else Dd(t,this._bbox),l=this._createGradient(t);return l}}function hd(a,t,e,i,r,l,c,h){const d=t.coords,p=t.colors,m=a.data,y=a.width*4;let b;d[e+1]>d[i+1]&&(b=e,e=i,i=b,b=l,l=c,c=b),d[i+1]>d[r+1]&&(b=i,i=r,r=b,b=c,c=h,h=b),d[e+1]>d[i+1]&&(b=e,e=i,i=b,b=l,l=c,c=b);const A=(d[e]+t.offsetX)*t.scaleX,S=(d[e+1]+t.offsetY)*t.scaleY,_=(d[i]+t.offsetX)*t.scaleX,T=(d[i+1]+t.offsetY)*t.scaleY,E=(d[r]+t.offsetX)*t.scaleX,x=(d[r+1]+t.offsetY)*t.scaleY;if(S>=x)return;const C=p[l],L=p[l+1],O=p[l+2],P=p[c],z=p[c+1],$=p[c+2],Y=p[h],et=p[h+1],J=p[h+2],at=Math.round(S),ot=Math.round(x);let rt,ht,k,j,nt,vt,xt,R;for(let q=at;q<=ot;q++){if(q<T){const mt=q<S?0:(S-q)/(S-T);rt=A-(A-_)*mt,ht=C-(C-P)*mt,k=L-(L-z)*mt,j=O-(O-$)*mt}else{let mt;q>x?mt=1:T===x?mt=0:mt=(T-q)/(T-x),rt=_-(_-E)*mt,ht=P-(P-Y)*mt,k=z-(z-et)*mt,j=$-($-J)*mt}let Q;q<S?Q=0:q>x?Q=1:Q=(S-q)/(S-x),nt=A-(A-E)*Q,vt=C-(C-Y)*Q,xt=L-(L-et)*Q,R=O-(O-J)*Q;const lt=Math.round(Math.min(rt,nt)),bt=Math.round(Math.max(rt,nt));let _t=y*q+lt*4;for(let mt=lt;mt<=bt;mt++)Q=(rt-mt)/(rt-nt),Q<0?Q=0:Q>1&&(Q=1),m[_t++]=ht-(ht-vt)*Q|0,m[_t++]=k-(k-xt)*Q|0,m[_t++]=j-(j-R)*Q|0,m[_t++]=255}}function bx(a,t,e){const i=t.coords,r=t.colors;let l,c;switch(t.type){case"lattice":const h=t.verticesPerRow,d=Math.floor(i.length/h)-1,p=h-1;for(l=0;l<d;l++){let m=l*h;for(let y=0;y<p;y++,m++)hd(a,e,i[m],i[m+1],i[m+h],r[m],r[m+1],r[m+h]),hd(a,e,i[m+h+1],i[m+1],i[m+h],r[m+h+1],r[m+1],r[m+h])}break;case"triangles":for(l=0,c=i.length;l<c;l+=3)hd(a,e,i[l],i[l+1],i[l+2],r[l],r[l+1],r[l+2]);break;default:throw new Error("illegal figure")}}class vx extends of{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-h,m=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),A=p/y,S=m/b,_={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/A,scaleY:1/S},T=y+4,E=b+4,x=i.getCanvas("mesh",T,E),C=x.context,L=C.createImageData(y,b);if(e){const P=L.data;for(let z=0,$=P.length;z<$;z+=4)P[z]=e[0],P[z+1]=e[1],P[z+2]=e[2],P[z+3]=255}for(const P of this._figures)bx(L,P,_);return C.putImageData(L,2,2),{canvas:x.canvas,offsetX:h-2*A,offsetY:d-2*S,scaleX:A,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,r){Dd(t,this._bbox);const l=new Float32Array(2);if(r===We.SHADING)ft.singularValueDecompose2dScale(ye(t),l);else if(this.matrix){ft.singularValueDecompose2dScale(this.matrix,l);const[h,d]=l;ft.singularValueDecompose2dScale(e.baseTransform,l),l[0]*=h,l[1]*=d}else ft.singularValueDecompose2dScale(e.baseTransform,l);const c=this._createMeshCanvas(l,r===We.SHADING?null:this._background,e.cachedCanvases);return r!==We.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class Ax extends of{getPattern(){return"hotpink"}}function _x(a){switch(a[0]){case"RadialAxial":return new yx(a);case"Mesh":return new vx(a);case"Dummy":return new Ax}throw new Error(`Unknown IR type: ${a[0]}`)}const vb={COLORED:1,UNCOLORED:2};class lf{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t,e){const{bbox:i,operatorList:r,paintType:l,tilingType:c,color:h,canvasGraphicsFactory:d}=this;let{xstep:p,ystep:m}=this;p=Math.abs(p),m=Math.abs(m),Dc("TilingType: "+c);const y=i[0],b=i[1],A=i[2],S=i[3],_=A-y,T=S-b,E=new Float32Array(2);ft.singularValueDecompose2dScale(this.matrix,E);const[x,C]=E;ft.singularValueDecompose2dScale(this.baseTransform,E);const L=x*E[0],O=C*E[1];let P=_,z=T,$=!1,Y=!1;const et=Math.ceil(p*L),J=Math.ceil(m*O),at=Math.ceil(_*L),ot=Math.ceil(T*O);et>=at?P=p:$=!0,J>=ot?z=m:Y=!0;const rt=this.getSizeAndScale(P,this.ctx.canvas.width,L),ht=this.getSizeAndScale(z,this.ctx.canvas.height,O),k=t.cachedCanvases.getCanvas("pattern",rt.size,ht.size),j=k.context,nt=d.createCanvasGraphics(j,e);if(nt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(nt,l,h),j.translate(-rt.scale*y,-ht.scale*b),nt.transform(0,rt.scale,0,0,ht.scale,0,0),j.save(),nt.dependencyTracker?.save(),this.clipBbox(nt,y,b,A,S),nt.baseTransform=ye(nt.ctx),nt.executeOperatorList(r),nt.endDrawing(),nt.dependencyTracker?.restore(),j.restore(),$||Y){const vt=k.canvas;$&&(P=p),Y&&(z=m);const xt=this.getSizeAndScale(P,this.ctx.canvas.width,L),R=this.getSizeAndScale(z,this.ctx.canvas.height,O),q=xt.size,Q=R.size,lt=t.cachedCanvases.getCanvas("pattern-workaround",q,Q),bt=lt.context,_t=$?Math.floor(_/p):0,mt=Y?Math.floor(T/m):0;for(let Kt=0;Kt<=_t;Kt++)for(let Ot=0;Ot<=mt;Ot++)bt.drawImage(vt,q*Kt,Q*Ot,q,Q,0,0,q,Q);return{canvas:lt.canvas,scaleX:xt.scale,scaleY:R.scale,offsetX:y,offsetY:b}}return{canvas:k.canvas,scaleX:rt.scale,scaleY:ht.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,e,i){const r=Math.max(lf.MAX_PATTERN_SIZE,e);let l=Math.ceil(t*i);return l>=r?l=r:i=l/t,{scale:i,size:l}}clipBbox(t,e,i,r,l){const c=r-e,h=l-i;t.ctx.rect(e,i,c,h),ft.axialAlignedBoundingBox([e,i,r,l],ye(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const r=t.ctx,l=t.current;switch(e){case vb.COLORED:const{fillStyle:c,strokeStyle:h}=this.ctx;r.fillStyle=l.fillColor=c,r.strokeStyle=l.strokeColor=h;break;case vb.UNCOLORED:r.fillStyle=r.strokeStyle=i,l.fillColor=l.strokeColor=i;break;default:throw new HT(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,r,l){let c=i;r!==We.SHADING&&(c=ft.transform(c,e.baseTransform),this.matrix&&(c=ft.transform(c,this.matrix)));const h=this.createPatternCanvas(e,l);let d=new DOMMatrix(c);d=d.translate(h.offsetX,h.offsetY),d=d.scale(1/h.scaleX,1/h.scaleY);const p=t.createPattern(h.canvas,"repeat");return p.setTransform(d),p}}function Sx({src:a,srcPos:t=0,dest:e,width:i,height:r,nonBlackColor:l=4294967295,inverseDecode:c=!1}){const h=He.isLittleEndian?4278190080:255,[d,p]=c?[l,h]:[h,l],m=i>>3,y=i&7,b=a.length;e=new Uint32Array(e.buffer);let A=0;for(let S=0;S<r;S++){for(const T=t+m;t<T;t++){const E=t<b?a[t]:255;e[A++]=E&128?p:d,e[A++]=E&64?p:d,e[A++]=E&32?p:d,e[A++]=E&16?p:d,e[A++]=E&8?p:d,e[A++]=E&4?p:d,e[A++]=E&2?p:d,e[A++]=E&1?p:d}if(y===0)continue;const _=t<b?a[t++]:255;for(let T=0;T<y;T++)e[A++]=_&1<<7-T?p:d}return{srcPos:t,destPos:A}}const Ab=16,_b=100,wx=15,Sb=10,vn=16,dd=new DOMMatrix,kn=new Float32Array(2),Ga=new Float32Array([1/0,1/0,-1/0,-1/0]);function Ex(a,t){if(a._removeMirroring)throw new Error("Context is already forwarding operations.");a.__originalSave=a.save,a.__originalRestore=a.restore,a.__originalRotate=a.rotate,a.__originalScale=a.scale,a.__originalTranslate=a.translate,a.__originalTransform=a.transform,a.__originalSetTransform=a.setTransform,a.__originalResetTransform=a.resetTransform,a.__originalClip=a.clip,a.__originalMoveTo=a.moveTo,a.__originalLineTo=a.lineTo,a.__originalBezierCurveTo=a.bezierCurveTo,a.__originalRect=a.rect,a.__originalClosePath=a.closePath,a.__originalBeginPath=a.beginPath,a._removeMirroring=()=>{a.save=a.__originalSave,a.restore=a.__originalRestore,a.rotate=a.__originalRotate,a.scale=a.__originalScale,a.translate=a.__originalTranslate,a.transform=a.__originalTransform,a.setTransform=a.__originalSetTransform,a.resetTransform=a.__originalResetTransform,a.clip=a.__originalClip,a.moveTo=a.__originalMoveTo,a.lineTo=a.__originalLineTo,a.bezierCurveTo=a.__originalBezierCurveTo,a.rect=a.__originalRect,a.closePath=a.__originalClosePath,a.beginPath=a.__originalBeginPath,delete a._removeMirroring},a.save=function(){t.save(),this.__originalSave()},a.restore=function(){t.restore(),this.__originalRestore()},a.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},a.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},a.transform=function(e,i,r,l,c,h){t.transform(e,i,r,l,c,h),this.__originalTransform(e,i,r,l,c,h)},a.setTransform=function(e,i,r,l,c,h){t.setTransform(e,i,r,l,c,h),this.__originalSetTransform(e,i,r,l,c,h)},a.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},a.rotate=function(e){t.rotate(e),this.__originalRotate(e)},a.clip=function(e){t.clip(e),this.__originalClip(e)},a.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},a.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},a.bezierCurveTo=function(e,i,r,l,c,h){t.bezierCurveTo(e,i,r,l,c,h),this.__originalBezierCurveTo(e,i,r,l,c,h)},a.rect=function(e,i,r,l){t.rect(e,i,r,l),this.__originalRect(e,i,r,l)},a.closePath=function(){t.closePath(),this.__originalClosePath()},a.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Tx{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,e,i)):(r=this.canvasFactory.create(e,i),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function ic(a,t,e,i,r,l,c,h,d,p){const[m,y,b,A,S,_]=ye(a);if(y===0&&b===0){const x=c*m+S,C=Math.round(x),L=h*A+_,O=Math.round(L),P=(c+d)*m+S,z=Math.abs(Math.round(P)-C)||1,$=(h+p)*A+_,Y=Math.abs(Math.round($)-O)||1;return a.setTransform(Math.sign(m),0,0,Math.sign(A),C,O),a.drawImage(t,e,i,r,l,0,0,z,Y),a.setTransform(m,y,b,A,S,_),[z,Y]}if(m===0&&A===0){const x=h*b+S,C=Math.round(x),L=c*y+_,O=Math.round(L),P=(h+p)*b+S,z=Math.abs(Math.round(P)-C)||1,$=(c+d)*y+_,Y=Math.abs(Math.round($)-O)||1;return a.setTransform(0,Math.sign(y),Math.sign(b),0,C,O),a.drawImage(t,e,i,r,l,0,0,Y,z),a.setTransform(m,y,b,A,S,_),[Y,z]}a.drawImage(t,e,i,r,l,c,h,d,p);const T=Math.hypot(m,y),E=Math.hypot(b,A);return[T*d,E*p]}class wb{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=wd;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Ke.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Ga.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=We.FILL,e=null){const i=this.minMax.slice();if(t===We.STROKE){e||re("Stroke bounding box must include transform."),ft.singularValueDecompose2dScale(e,kn);const r=kn[0]*this.lineWidth/2,l=kn[1]*this.lineWidth/2;i[0]-=r,i[1]-=l,i[2]+=r,i[3]+=l}return i}updateClipFromPath(){const t=ft.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Ga,0)}getClippedPathBoundingBox(t=We.FILL,e=null){return ft.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Eb(a,t){if(t instanceof ImageData){a.putImageData(t,0,0);return}const e=t.height,i=t.width,r=e%vn,l=(e-r)/vn,c=r===0?l:l+1,h=a.createImageData(i,vn);let d=0,p;const m=t.data,y=h.data;let b,A,S,_;if(t.kind===oo.GRAYSCALE_1BPP){const T=m.byteLength,E=new Uint32Array(y.buffer,0,y.byteLength>>2),x=E.length,C=i+7>>3,L=4294967295,O=He.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(S=b<l?vn:r,p=0,A=0;A<S;A++){const P=T-d;let z=0;const $=P>C?i:P*8-7,Y=$&-8;let et=0,J=0;for(;z<Y;z+=8)J=m[d++],E[p++]=J&128?L:O,E[p++]=J&64?L:O,E[p++]=J&32?L:O,E[p++]=J&16?L:O,E[p++]=J&8?L:O,E[p++]=J&4?L:O,E[p++]=J&2?L:O,E[p++]=J&1?L:O;for(;z<$;z++)et===0&&(J=m[d++],et=128),E[p++]=J&et?L:O,et>>=1}for(;p<x;)E[p++]=0;a.putImageData(h,0,b*vn)}}else if(t.kind===oo.RGBA_32BPP){for(A=0,_=i*vn*4,b=0;b<l;b++)y.set(m.subarray(d,d+_)),d+=_,a.putImageData(h,0,A),A+=vn;b<c&&(_=i*r*4,y.set(m.subarray(d,d+_)),a.putImageData(h,0,A))}else if(t.kind===oo.RGB_24BPP)for(S=vn,_=i*S,b=0;b<c;b++){for(b>=l&&(S=r,_=i*S),p=0,A=_;A--;)y[p++]=m[d++],y[p++]=m[d++],y[p++]=m[d++],y[p++]=255;a.putImageData(h,0,b*vn)}else throw new Error(`bad image kind: ${t.kind}`)}function Tb(a,t){if(t.bitmap){a.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,r=e%vn,l=(e-r)/vn,c=r===0?l:l+1,h=a.createImageData(i,vn);let d=0;const p=t.data,m=h.data;for(let y=0;y<c;y++){const b=y<l?vn:r;({srcPos:d}=Sx({src:p,srcPos:d,dest:m,width:i,height:b,nonBlackColor:0})),a.putImageData(h,0,y*vn)}}function Qr(a,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)a[i]!==void 0&&(t[i]=a[i]);a.setLineDash!==void 0&&(t.setLineDash(a.getLineDash()),t.lineDashOffset=a.lineDashOffset)}function sc(a){a.strokeStyle=a.fillStyle="#000000",a.fillRule="nonzero",a.globalAlpha=1,a.lineWidth=1,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=10,a.globalCompositeOperation="source-over",a.font="10px sans-serif",a.setLineDash!==void 0&&(a.setLineDash([]),a.lineDashOffset=0);const{filter:t}=a;t!=="none"&&t!==""&&(a.filter="none")}function xb(a,t){if(t)return!0;ft.singularValueDecompose2dScale(a,kn);const e=Math.fround(ei.pixelRatio*Xs.PDF_TO_CSS_UNITS);return kn[0]<=e&&kn[1]<=e}const xx=["butt","round","square"],Cx=["miter","round","bevel"],Dx={},Cb={};class Xa{constructor(t,e,i,r,l,{optionalContentConfig:c,markedContentStack:h=null},d,p,m){this.ctx=t,this.current=new wb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=r,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=c,this.cachedCanvases=new Tx(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:r=null}){const l=this.ctx.canvas.width,c=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,l,c),this.ctx.fillStyle=h,i){const d=this.cachedCanvases.getCanvas("transparent",l,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ye(this.compositeCtx))}this.ctx.save(),sc(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ye(this.ctx)}executeOperatorList(t,e,i,r,l){const c=t.argsArray,h=t.fnArray;let d=e||0;const p=c.length;if(p===d)return d;const m=p-d>Sb&&typeof i=="function",y=m?Date.now()+wx:0;let b=0;const A=this.commonObjs,S=this.objs;let _,T;for(;;){if(r!==void 0&&d===r.nextBreakPoint)return r.breakIt(d,i),d;if(!l||l(d))if(_=h[d],T=c[d]??null,_!==Ja.dependency)T===null?this[_](d):this[_](d,...T);else for(const E of T){this.dependencyTracker?.recordNamedData(E,d);const x=E.startsWith("g_")?A:S;if(!x.has(E))return x.get(E,i),d}if(d++,d===p)return d;if(m&&++b>Sb){if(Date.now()>y)return i(),d;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,r=t.height??t.displayHeight;let l=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),h=i,d=r,p="prescale1",m,y;for(;l>2&&h>1||c>2&&d>1;){let b=h,A=d;l>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),l/=h/b),c>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/A),m=this.cachedCanvases.getCanvas(p,b,A),y=m.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,h,d,0,0,b,A),t=m.canvas,h=b,d=A,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:d}}_createMaskCanvas(t,e){const i=this.ctx,{width:r,height:l}=e,c=this.current.fillColor,h=this.current.patternFill,d=ye(i);let p,m,y,b;if((e.bitmap||e.data)&&e.count>1){const et=e.bitmap||e.data.buffer;m=JSON.stringify(h?d:[d.slice(0,4),c]),p=this._cachedBitmapsMap.get(et),p||(p=new Map,this._cachedBitmapsMap.set(et,p));const J=p.get(m);if(J&&!h){const at=Math.round(Math.min(d[0],d[2])+d[4]),ot=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,qn.transformAndFill),{canvas:J,offsetX:at,offsetY:ot}}y=J}y||(b=this.cachedCanvases.getCanvas("maskCanvas",r,l),Tb(b.context,e));let A=ft.transform(d,[1/r,0,0,-1/l,0,0]);A=ft.transform(A,[1,0,0,1,0,-l]);const S=Ga.slice();ft.axialAlignedBoundingBox([0,0,r,l],A,S);const[_,T,E,x]=S,C=Math.round(E-_)||1,L=Math.round(x-T)||1,O=this.cachedCanvases.getCanvas("fillCanvas",C,L),P=O.context,z=_,$=T;P.translate(-z,-$),P.transform(...A),y||(y=this._scaleImage(b.canvas,di(P)),y=y.img,p&&h&&p.set(m,y)),P.imageSmoothingEnabled=xb(ye(P),e.interpolate),ic(P,y,0,0,y.width,y.height,0,0,r,l),P.globalCompositeOperation="source-in";const Y=ft.transform(di(P),[1,0,0,1,-z,-$]);return P.fillStyle=h?c.getPattern(i,this,Y,We.FILL,t):c,P.fillRect(0,0,r,l),p&&!h&&(this.cachedCanvases.delete("fillCanvas"),p.set(m,O.canvas)),this.dependencyTracker?.recordDependencies(t,qn.transformAndFill),{canvas:O.canvas,offsetX:Math.round(z),offsetY:Math.round($)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=xx[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=Cx[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,r]of e)switch(i){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(r,e,i);this.suspendedCtx=this.ctx;const c=this.ctx=l.context;c.setTransform(this.suspendedCtx.getTransform()),Qr(this.suspendedCtx,c),Ex(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Qr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,r){const l=r[0],c=r[1],h=r[2]-l,d=r[3]-c;h===0||d===0||(this.genericComposeSMask(e.context,i,h,d,e.subtype,e.backdrop,e.transferMap,l,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,r,l,c,h,d,p,m,y){let b=t.canvas,A=d-m,S=p-y;if(c)if(A<0||S<0||A+i>b.width||S+r>b.height){const T=this.cachedCanvases.getCanvas("maskExtension",i,r),E=T.context;E.drawImage(b,-A,-S),E.globalCompositeOperation="destination-atop",E.fillStyle=c,E.fillRect(0,0,i,r),E.globalCompositeOperation="source-over",b=T.canvas,A=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(A,S,i,r),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(A,S,i,r),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),l==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):l==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const _=new Path2D;_.rect(d,p,i,r),e.clip(_),e.globalCompositeOperation="destination-in",e.drawImage(b,A,S,i,r,d,p,i,r),e.restore()}save(t){this.inSMaskMode&&Qr(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Qr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,r,l,c,h){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,r,l,c,h),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,r){let[l]=i;if(!r){l||=i[0]=new Path2D,this[e](t,l);return}if(this.dependencyTracker!==null){const c=e===Ja.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-c,r[2]+c,r[1]-c,r[3]+c).recordDependencies(t,["transform"])}if(!(l instanceof Path2D)){const c=i[0]=new Path2D;for(let h=0,d=l.length;h<d;)switch(l[h++]){case Wl.moveTo:c.moveTo(l[h++],l[h++]);break;case Wl.lineTo:c.lineTo(l[h++],l[h++]);break;case Wl.curveTo:c.bezierCurveTo(l[h++],l[h++],l[h++],l[h++],l[h++],l[h++]);break;case Wl.closePath:c.closePath();break;default:Rt(`Unrecognized drawing path operator: ${l[h-1]}`);break}l=c}ft.axialAlignedBoundingBox(r,ye(this.ctx),this.current.minMax),this[e](t,l),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const r=this.ctx,l=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof l=="object"&&l?.getPattern){const c=l.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=l.getPattern(r,this,di(r),We.STROKE,t),c){const h=new Path2D;h.addPath(e,r.getTransform().invertSelf().multiplySelf(c)),e=h}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,qn.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(We.STROKE,ye(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const r=this.ctx,l=this.current.fillColor,c=this.current.patternFill;let h=!1;if(c){const p=l.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=l.getPattern(r,this,di(r),We.FILL,t),p){const m=new Path2D;m.addPath(e,r.getTransform().invertSelf().multiplySelf(p)),e=m}h=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),this.dependencyTracker?.recordDependencies(t,qn.fill),h&&(r.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,qn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Dx}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Cb}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;e!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(e!==void 0){const r=new Path2D,l=i.getTransform().invertSelf();for(const{transform:c,x:h,y:d,fontSize:p,path:m}of e)m&&r.addPath(m,new DOMMatrix(c).preMultiplySelf(l).translate(h,d).scale(p,-p));i.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const r=this.commonObjs.get(e),l=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(l.fontMatrix=r.fontMatrix||wd,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&Rt("Invalid font matrix for font "+e),i<0?(i=-i,l.fontDirection=-1):l.fontDirection=1,this.current.font=r,this.current.fontSize=i,r.isType3Font)return;const c=r.loadedName||"sans-serif",h=r.systemFontInfo?.css||`"${c}", ${r.fallbackName}`;let d="normal";r.black?d="900":r.bold&&(d="bold");const p=r.italic?"italic":"normal";let m=i;i<Ab?m=Ab:i>_b&&(m=_b),this.current.fontSizeScale=i/m,this.ctx.font=`${p} ${d} ${m}px ${h}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,i){const r=new Path2D;return r.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),r}paintChar(t,e,i,r,l,c){const h=this.ctx,d=this.current,p=d.font,m=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,b=m&Ke.FILL_STROKE_MASK,A=!!(m&Ke.ADD_TO_PATH_FLAG),S=d.patternFill&&!p.missingFile,_=d.patternStroke&&!p.missingFile;let T;if((p.disableFontFace||A||S||_)&&!p.missingFile&&(T=p.getPathGenerator(this.commonObjs,e)),T&&(p.disableFontFace||S||_)){h.save(),h.translate(i,r),h.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,h,p);let E;if(b===Ke.FILL||b===Ke.FILL_STROKE)if(l){E=h.getTransform(),h.setTransform(...l);const x=this.#i(T,E,l);h.fill(x)}else h.fill(T);if(b===Ke.STROKE||b===Ke.FILL_STROKE)if(c){E||=h.getTransform(),h.setTransform(...c);const{a:x,b:C,c:L,d:O}=E,P=ft.inverseTransform(c),z=ft.transform([x,C,L,O,0,0],P);ft.singularValueDecompose2dScale(z,kn),h.lineWidth*=Math.max(kn[0],kn[1])/y,h.stroke(this.#i(T,E,c))}else h.lineWidth/=y,h.stroke(T);h.restore()}else(b===Ke.FILL||b===Ke.FILL_STROKE)&&(h.fillText(e,i,r),this.dependencyTracker?.recordCharacterBBox(t,h,p,y,i,r,()=>h.measureText(e))),(b===Ke.STROKE||b===Ke.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,h,p,y,i,r,()=>h.measureText(e)).recordDependencies(t,qn.stroke),h.strokeText(e,i,r));A&&((this.pendingTextPaths||=[]).push({transform:ye(h),x:i,y:r,fontSize:y,path:T}),this.dependencyTracker?.recordCharacterBBox(t,h,p,y,i,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<e.length;r+=4)if(e[r]>0&&e[r]<255){i=!0;break}return zt(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,qn.showText).resetBBox(t),this.current.textRenderingMode&Ke.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,r=i.font;if(r.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const l=i.fontSize;if(l===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,h=i.fontSizeScale,d=i.charSpacing,p=i.wordSpacing,m=i.fontDirection,y=i.textHScale*m,b=e.length,A=r.vertical,S=A?1:-1,_=r.defaultVMetrics,T=l*i.fontMatrix[0],E=i.textRenderingMode===Ke.FILL&&!r.disableFontFace&&!i.patternFill;c.save(),i.textMatrix&&c.transform(...i.textMatrix),c.translate(i.x,i.y+i.textRise),m>0?c.scale(y,-1):c.scale(y,1);let x,C;if(i.patternFill){c.save();const $=i.fillColor.getPattern(c,this,di(c),We.FILL,t);x=ye(c),c.restore(),c.fillStyle=$}if(i.patternStroke){c.save();const $=i.strokeColor.getPattern(c,this,di(c),We.STROKE,t);C=ye(c),c.restore(),c.strokeStyle=$}let L=i.lineWidth;const O=i.textMatrixScale;if(O===0||L===0){const $=i.textRenderingMode&Ke.FILL_STROKE_MASK;($===Ke.STROKE||$===Ke.FILL_STROKE)&&(L=this.getSinglePixelWidth())}else L/=O;if(h!==1&&(c.scale(h,h),L/=h),c.lineWidth=L,r.isInvalidPDFjsFont){const $=[];let Y=0;for(const J of e)$.push(J.unicode),Y+=J.width;const et=$.join("");if(c.fillText(et,0,0),this.dependencyTracker!==null){const J=c.measureText(et);this.dependencyTracker.recordBBox(t,this.ctx,-J.actualBoundingBoxLeft,J.actualBoundingBoxRight,-J.actualBoundingBoxAscent,J.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=Y*T*y,c.restore(),this.compose();return}let P=0,z;for(z=0;z<b;++z){const $=e[z];if(typeof $=="number"){P+=S*$*l/1e3;continue}let Y=!1;const et=($.isSpace?p:0)+d,J=$.fontChar,at=$.accent;let ot,rt,ht=$.width;if(A){const nt=$.vmetric||_,vt=-($.vmetric?nt[1]:ht*.5)*T,xt=nt[2]*T;ht=nt?-nt[0]:ht,ot=vt/h,rt=(P+xt)/h}else ot=P/h,rt=0;let k;if(r.remeasure&&ht>0){k=c.measureText(J);const nt=k.width*1e3/l*h;if(ht<nt&&this.isFontSubpixelAAEnabled){const vt=ht/nt;Y=!0,c.save(),c.scale(vt,1),ot/=vt}else ht!==nt&&(ot+=(ht-nt)/2e3*l/h)}if(this.contentVisible&&($.isInFont||r.missingFile)){if(E&&!at)c.fillText(J,ot,rt),this.dependencyTracker?.recordCharacterBBox(t,c,k?{bbox:null}:r,l/h,ot,rt,()=>k??c.measureText(J));else if(this.paintChar(t,J,ot,rt,x,C),at){const nt=ot+l*at.offset.x/h,vt=rt-l*at.offset.y/h;this.paintChar(t,at.fontChar,nt,vt,x,C)}}const j=A?ht*T-et*m:ht*T+et*m;P+=j,Y&&c.restore()}A?i.y-=P:i.x+=P*y,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,r=this.current,l=r.font,c=r.fontSize,h=r.fontDirection,d=l.vertical?1:-1,p=r.charSpacing,m=r.wordSpacing,y=r.textHScale*h,b=r.fontMatrix||wd,A=e.length,S=r.textRenderingMode===Ke.INVISIBLE;let _,T,E,x;if(S||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),r.textMatrix&&i.transform(...r.textMatrix),i.translate(r.x,r.y+r.textRise),i.scale(y,h);const C=this.dependencyTracker;for(this.dependencyTracker=C?new yc(C,t):null,_=0;_<A;++_){if(T=e[_],typeof T=="number"){x=d*T*c/1e3,this.ctx.translate(x,0),r.x+=x*y;continue}const L=(T.isSpace?m:0)+p,O=l.charProcOperatorList[T.operatorListId];O?this.contentVisible&&(this.save(),i.scale(c,c),i.transform(...b),this.executeOperatorList(O),this.restore()):Rt(`Type3 character "${T.operatorListId}" is not available.`);const P=[T.width,0];ft.applyTransform(P,b),E=P[0]*c+L,i.translate(E,0),r.x+=E*y}i.restore(),C&&(this.dependencyTracker=C)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,r,l,c,h){const d=new Path2D;d.rect(r,l,c-r,h-l),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,r,c,l,h).recordClipBox(t,this.ctx,r,c,l,h),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const r=this.baseTransform||ye(this.ctx),l={createCanvasGraphics:(c,h)=>new Xa(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new yc(this.dependencyTracker,h,!0):null)};i=new lf(e,this.ctx,l,r)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=_x(this.getObject(t,e)),this.cachedPatterns.set(e,r)),i&&(r.matrix=i),r}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const r=this._getPattern(t,e);i.fillStyle=r.getPattern(i,this,di(i),We.SHADING,t);const l=di(i);if(l){const{width:c,height:h}=i.canvas,d=Ga.slice();ft.axialAlignedBoundingBox([0,0,c,h],l,d);const[p,m,y,b]=d;this.ctx.fillRect(p,m,y-p,b-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,qn.transform).recordDependencies(t,qn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){re("Should not call beginInlineImage")}beginImageData(){re("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=ye(this.ctx),i)){ft.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[r,l,c,h]=i,d=new Path2D;d.rect(r,l,c-r,h-l),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,r,c,l,h),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||Dc("TODO: Support non-isolated groups."),e.knockout&&Rt("Knockout groups not supported.");const r=ye(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let l=Ga.slice();ft.axialAlignedBoundingBox(e.bbox,ye(i),l);const c=[0,0,i.canvas.width,i.canvas.height];l=ft.intersect(l,c)||[0,0,0,0];const h=Math.floor(l[0]),d=Math.floor(l[1]),p=Math.max(Math.ceil(l[2])-h,1),m=Math.max(Math.ceil(l[3])-d,1);this.current.startNewPathAndClipBox([0,0,p,m]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,p,m),A=b.context;A.translate(-h,-d),A.transform(...r);let S=new Path2D;const[_,T,E,x]=e.bbox;if(S.rect(_,T,E-_,x-T),e.matrix){const C=new Path2D;C.addPath(S,new DOMMatrix(e.matrix)),S=C}A.clip(S),e.smask&&this.smaskStack.push({canvas:b.canvas,context:A,offsetX:h,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(h,d),i.save()),Qr(i,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=ye(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...l);const c=Ga.slice();ft.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],l,c),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,e,i,r,l,c){if(this.#t(),sc(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const h=i[2]-i[0],d=i[3]-i[1];if(c&&this.annotationCanvasMap){r=r.slice(),r[4]-=i[0],r[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=h,i[3]=d,ft.singularValueDecompose2dScale(ye(this.ctx),kn);const{viewportScale:p}=this,m=Math.ceil(h*this.outputScaleX*p),y=Math.ceil(d*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(m,y);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(kn[0],0,0,-kn[1],0,d*kn[1]),sc(this.ctx)}else{sc(this.ctx),this.endPath(t);const p=new Path2D;p.rect(i[0],i[1],h,d),this.ctx.clip(p)}}this.current=new wb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...l)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const r=this.ctx,l=this._createMaskCanvas(t,e),c=l.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(c,l.offsetX,l.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,l.offsetX,l.offsetX+c.width,l.offsetY,l.offsetY+c.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,r=0,l=0,c,h){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const p=ye(d);d.transform(i,r,l,c,0,0);const m=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,m.offsetX-p[4],m.offsetY-p[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=h.length;y<b;y+=2){const A=ft.transform(p,[i,r,l,c,h[y],h[y+1]]);d.drawImage(m.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+m.canvas.width,A[5],A[5]+m.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,r=this.current.fillColor,l=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,qn.transformAndFill);for(const c of e){const{data:h,width:d,height:p,transform:m}=c,y=this.cachedCanvases.getCanvas("maskCanvas",d,p),b=y.context;b.save();const A=this.getObject(t,h,c);Tb(b,A),b.globalCompositeOperation="source-in",b.fillStyle=l?r.getPattern(b,this,di(i),We.FILL,t):r,b.fillRect(0,0,d,p),b.restore(),i.save(),i.transform(...m),i.scale(1,-1),ic(i,y.canvas,0,0,d,p,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,d,0,p),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){Rt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,r,l){if(!this.contentVisible)return;const c=this.getObject(t,e);if(!c){Rt("Dependent image isn't ready yet");return}const h=c.width,d=c.height,p=[];for(let m=0,y=l.length;m<y;m+=2)p.push({transform:[i,0,0,r,l[m],l[m+1]],x:0,y:0,w:h,h:d});this.paintInlineImageXObjectGroup(t,c,p)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:r}=t,l=this.cachedCanvases.getCanvas("inlineImage",i,r),c=l.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",l.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,r=e.height,l=this.ctx;this.save(t);const{filter:c}=l;c!=="none"&&c!==""&&(l.filter="none"),l.scale(1/i,-1/r);let h;if(e.bitmap)h=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)h=e;else{const m=this.cachedCanvases.getCanvas("inlineImage",i,r).context;Eb(m,e),h=this.applyTransferMapsToCanvas(m)}const d=this._scaleImage(h,di(l));l.imageSmoothingEnabled=xb(ye(l),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,l,0,i,-r,0).recordDependencies(t,qn.imageXObject).recordOperation(t),ic(l,d.img,0,0,d.paintWidth,d.paintHeight,0,-r,i,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const r=this.ctx;let l;if(e.bitmap)l=e.bitmap;else{const c=e.width,h=e.height,p=this.cachedCanvases.getCanvas("inlineImage",c,h).context;Eb(p,e),l=this.applyTransferMapsToCanvas(p)}this.dependencyTracker?.resetBBox(t);for(const c of i)r.save(),r.transform(...c.transform),r.scale(1,-1),ic(r,l,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,qn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const l=this.ctx;this.pendingClip?(r||(this.pendingClip===Cb?l.clip(e,"evenodd"):l.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ye(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:r,d:l}=this.ctx.getTransform();let c,h;if(i===0&&r===0){const d=Math.abs(e),p=Math.abs(l);if(d===p)if(t===0)c=h=1/d;else{const m=d*t;c=h=m<1?1/m:1}else if(t===0)c=1/d,h=1/p;else{const m=d*t,y=p*t;c=m<1?1/m:1,h=y<1?1/y:1}}else{const d=Math.abs(e*l-i*r),p=Math.hypot(e,i),m=Math.hypot(r,l);if(t===0)c=m/d,h=p/d;else{const y=t*d;c=m>y?m/y:1,h=p>y?p/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:r}}=this,[l,c]=this.getScaleForStroking();if(l===c){i.lineWidth=(r||1)*l,i.stroke(t);return}const h=i.getLineDash();e&&i.save(),i.scale(l,c),dd.a=1/l,dd.d=1/c;const d=new Path2D;if(d.addPath(t,dd),h.length>0){const p=Math.max(l,c);i.setLineDash(h.map(m=>m/p)),i.lineDashOffset/=p}i.lineWidth=r||1,i.stroke(d),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const a in Ja)Xa.prototype[a]!==void 0&&(Xa.prototype[Ja[a]]=Xa.prototype[a]);class Ya{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,i={};let r=0;for(const p of Ya.strings){const m=e.encode(t[p]);i[p]=m,r+=4+m.length}const l=new ArrayBuffer(r),c=new Uint8Array(l),h=new DataView(l);let d=0;for(const p of Ya.strings){const m=i[p],y=m.length;h.setUint32(d,y),c.set(m,d+4),d+=4+y}return qt(d===l.byteLength,"CssFontInfo.write: Buffer overflow"),l}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){qt(t<Ya.strings.length,"Invalid string index");let e=0;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Za{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,i={};let r=0;for(const b of Za.strings){const A=e.encode(t[b]);i[b]=A,r+=4+A.length}r+=4;let l,c,h=1+r;t.style&&(l=e.encode(t.style.style),c=e.encode(t.style.weight),h+=4+l.length+4+c.length);const d=new ArrayBuffer(h),p=new Uint8Array(d),m=new DataView(d);let y=0;m.setUint8(y++,t.guessFallback?1:0),m.setUint32(y,0),y+=4,r=0;for(const b of Za.strings){const A=i[b],S=A.length;r+=4+S,m.setUint32(y,S),p.set(A,y+4),y+=4+S}return m.setUint32(y-r-4,r),t.style&&(m.setUint32(y,l.length),p.set(l,y+4),y+=4+l.length,m.setUint32(y,c.length),p.set(c,y+4),y+=4+c.length),qt(y<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){qt(t<Za.strings.length,"Invalid string index");let e=5;for(let r=0;r<t;r++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),i=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const r=this.#e.getUint32(t),l=this.#i.decode(new Uint8Array(this.#t,t+4,r));return{style:i,weight:l}}}class ne{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#s;#a;#o;constructor({data:t,extra:e}){this.#s=t,this.#a=new TextDecoder,this.#o=new DataView(this.#s),e&&Object.assign(this,e)}#c(t){qt(t<ne.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,r=this.#o.getUint8(e)>>i&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return qt(t<ne.numbers.length,"Invalid number index"),this.#o.getFloat64(ne.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=ne.#e;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let r=0;r<4;r++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=ne.#i;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let r=0;r<6;r++)i.push(this.#o.getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=ne.#n;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let r=0;r<3;r++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}#d(t){qt(t<ne.strings.length,"Invalid string index");let e=ne.#r+4;for(let l=0;l<t;l++)e+=this.#o.getUint32(e)+4;const i=this.#o.getUint32(e),r=new Uint8Array(i);return r.set(new Uint8Array(this.#s,e+4,i)),this.#a.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=ne.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const r=this.#o.getUint32(t);t+=4+r;const l=this.#o.getUint32(t);if(l!==0)return new Uint8Array(this.#s,t+4,l)}clearData(){let t=ne.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const r=this.#o.getUint32(t);t+=4+r;const l=this.#o.getUint32(t);new Uint8Array(this.#s,t+4,l).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=ne.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const r=this.#o.getUint32(t);if(r===0)return null;const l=new Uint8Array(r);return l.set(new Uint8Array(this.#s,t+4,r)),new Ya(l.buffer)}get systemFontInfo(){let t=ne.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(this.#s,t+4,i)),new Za(r.buffer)}static write(t){const e=t.systemFontInfo?Za.write(t.systemFontInfo):null,i=t.cssFontInfo?Ya.write(t.cssFontInfo):null,r=new TextEncoder,l={};let c=0;for(const _ of ne.strings)l[_]=r.encode(t[_]),c+=4+l[_].length;const h=ne.#r+4+c+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(h),p=new Uint8Array(d),m=new DataView(d);let y=0;const b=ne.bools.length;let A=0,S=0;for(let _=0;_<b;_++){const T=t[ne.bools[_]];A|=(T===void 0?0:T?2:1)<<S,S+=2,(S===8||_===b-1)&&(m.setUint8(y++,A),A=0,S=0)}qt(y===ne.#t,"FontInfo.write: Boolean properties offset mismatch");for(const _ of ne.numbers)m.setFloat64(y,t[_]),y+=8;if(qt(y===ne.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){m.setUint8(y++,4);for(const _ of t.bbox)m.setInt16(y,_,!0),y+=2}else m.setUint8(y++,0),y+=8;if(qt(y===ne.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){m.setUint8(y++,6);for(const _ of t.fontMatrix)m.setFloat64(y,_,!0),y+=8}else m.setUint8(y++,0),y+=48;if(qt(y===ne.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){m.setUint8(y++,1);for(const _ of t.defaultVMetrics)m.setInt16(y,_,!0),y+=2}else m.setUint8(y++,0),y+=6;qt(y===ne.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(ne.#r,0),y+=4;for(const _ of ne.strings){const T=l[_],E=T.length;m.setUint32(y,E),p.set(T,y+4),y+=4+E}if(m.setUint32(ne.#r,y-ne.#r-4),!e)m.setUint32(y,0),y+=4;else{const _=e.byteLength;m.setUint32(y,_),qt(y+4+_<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),p.set(new Uint8Array(e),y+4),y+=4+_}if(!i)m.setUint32(y,0),y+=4;else{const _=i.byteLength;m.setUint32(y,_),qt(y+4+_<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),p.set(new Uint8Array(i),y+4),y+=4+_}return t.data===void 0?(m.setUint32(y,0),y+=4):(m.setUint32(y,t.data.length),p.set(t.data,y+4),y+=4+t.data.length),qt(y<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(y)}}class ys{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class Mx{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Ha=Symbol("INTERNAL");class Rx{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:i,usage:r,rbGroups:l}){this.#t=!!(t&Mn.DISPLAY),this.#e=!!(t&Mn.PRINT),this.name=e,this.intent=i,this.usage=r,this.rbGroups=l}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==Ha&&re("Internal method `_setVisible` called."),this.#i=i,this.#n=e}}class kx{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=Mn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const i of t.groups)this.#e.set(i.id,new Rx(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(Ha,!1);for(const i of t.on)this.#e.get(i)._setVisible(Ha,!0);for(const i of t.off)this.#e.get(i)._setVisible(Ha,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let r=1;r<e;r++){const l=t[r];let c;if(Array.isArray(l))c=this.#r(l);else if(this.#e.has(l))c=this.#e.get(l).visible;else return Rt(`Optional content group not found: ${l}`),!0;switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Dc("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Rt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return Rt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return Rt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return Rt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return Rt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return Rt(`Unknown optional content policy ${t.policy}.`),!0}return Rt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const r=this.#e.get(t);if(!r){Rt(`Optional content group not found: ${t}`);return}if(i&&e&&r.rbGroups.length)for(const l of r.rbGroups)for(const c of l)c!==t&&this.#e.get(c)?._setVisible(Ha,!1,!0);r._setVisible(Ha,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const l=this.#e.get(r);if(l)switch(i){case"ON":this.setVisibility(r,!0,e);break;case"OFF":this.setVisibility(r,!1,e);break;case"Toggle":this.setVisibility(r,!l.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Nv;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class Ox{constructor(t,{disableRange:e=!1,disableStream:i=!1}){qt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:l,progressiveDone:c,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=h,l?.length>0){const d=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,p)=>{this._onReceiveData({begin:d,chunk:p})}),t.addProgressListener((d,p)=>{this._onProgress({loaded:d,total:p})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(i),!0)});qt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){qt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Lx(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Nx(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class Lx{constructor(t,e,i=!1,r=null){this._stream=t,this._done=i||!1,this._filename=Rc(r)?r:null,this._queuedChunks=e||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Nx{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function zx(a){let t=!0,e=i("filename\\*","i").exec(a);if(e){e=e[1];let m=h(e);return m=unescape(m),m=d(m),m=p(m),l(m)}if(e=c(a),e){const m=p(e);return l(m)}if(e=i("filename","i").exec(a),e){e=e[1];let m=h(e);return m=p(m),l(m)}function i(m,y){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function r(m,y){if(m){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(m,{fatal:!0}),A=So(y);y=b.decode(A),t=!1}catch{}}return y}function l(m){return t&&/[\x80-\xff]/.test(m)&&(m=r("utf-8",m),t&&(m=r("iso-8859-1",m))),m}function c(m){const y=[];let b;const A=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(m))!==null;){let[,_,T,E]=b;if(_=parseInt(_,10),_ in y){if(_===0)break;continue}y[_]=[T,E]}const S=[];for(let _=0;_<y.length&&_ in y;++_){let[T,E]=y[_];E=h(E),T&&(E=unescape(E),_===0&&(E=d(E))),S.push(E)}return S.join("")}function h(m){if(m.startsWith('"')){const y=m.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}m=y.join('"')}return m}function d(m){const y=m.indexOf("'");if(y===-1)return m;const b=m.slice(0,y),S=m.slice(y+1).replace(/^[^']*'/,"");return r(b,S)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,S){if(A==="q"||A==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,T){return String.fromCharCode(parseInt(T,16))}),r(b,S);try{S=atob(S)}catch{}return r(b,S)})}return""}function Hv(a,t){const e=new Headers;if(!a||!t||typeof t!="object")return e;for(const i in t){const r=t[i];r!==void 0&&e.append(i,r)}return e}function kc(a){return URL.parse(a)?.origin??null}function Vv({responseHeaders:a,isHttp:t,rangeChunkSize:e,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(a.get("Content-Length"),10);return!Number.isInteger(l)||(r.suggestedLength=l,l<=2*e)||i||!t||a.get("Accept-Ranges")!=="bytes"||(a.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Gv(a){const t=a.get("Content-Disposition");if(t){let e=zx(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Rc(e))return e}return null}function Co(a,t){return new fo(`Unexpected server response (${a}) while retrieving PDF "${t}".`,a,a===404||a===0&&t.startsWith("file:"))}function qv(a){return a===200||a===206}function $v(a,t,e){return{method:"GET",headers:a,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Xv(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(Rt(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class Bx{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Hv(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return qt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Px(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Fx(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Px{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),r=e.url;fetch(r,$v(i,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=kc(l.url),!qv(l.status))throw Co(l.status,r);this._reader=l.body.getReader(),this._headersCapability.resolve();const c=l.headers,{allowRangeRequests:h,suggestedLength:d}=Vv({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=Gv(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Vi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Xv(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Fx{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${e}-${i-1}`);const c=r.url;fetch(c,$v(l,this._withCredentials,this._abortController)).then(h=>{const d=kc(h.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!qv(h.status))throw Co(h.status,c);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Xv(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const fd=200,pd=206;function Ux(a){const t=a.response;return typeof t!="string"?t:So(t).buffer}class Ix{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Hv(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[l,c]of this.headers)e.setRequestHeader(l,c);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=pd):r.expectedStatus=fd,e.responseType="arraybuffer",qt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){i.onError(r.status);return}const l=r.status||fd;if(!(l===fd&&i.expectedStatus===pd)&&l!==i.expectedStatus){i.onError(r.status);return}const h=Ux(r);if(l===pd){const d=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);p?i.onDone({begin:parseInt(p[1],10),chunk:h}):(Rt('Missing or invalid "Content-Range" header.'),i.onError(0))}else h?i.onDone({begin:0,chunk:h}):i.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class jx{constructor(t){this._source=t,this._manager=new Ix(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return qt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Hx(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new Vx(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Hx{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=kc(e.responseURL);const i=e.getAllResponseHeaders(),r=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[d,...p]=h.split(": ");return[d,p.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:c}=Vv({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=Gv(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Co(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Vx{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=kc(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Co(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Gx=/^[a-z][a-z0-9\-+.]+:/i;function qx(a){if(Gx.test(a))return new URL(a);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(a))}class $x{constructor(t){this.source=t,this.url=qx(t.url),qt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return qt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Xx(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Yx(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class Xx{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Co(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Vi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Yx{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Jr=Symbol("INITIAL_DATA");class Yv{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Jr}}get(t,e=null){if(e){const r=this.#e(t);return r.promise.then(()=>e(r.data)),null}const i=this.#t[t];if(!i||i.data===Jr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==Jr}delete(t){const e=this.#t[t];return!e||e.data===Jr?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Jr&&(yield[t,e])}}}const Zx=1e5,Db=30;let go=class $n{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#p=null;#u=[];#g=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#T=new WeakMap;static#w=null;static#A=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=i.scale*ei.pixelRatio,this.#d=i.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:l,pageX:c,pageY:h}=i.rawDims;this.#y=[1,0,0,-1,-c,h+l],this.#o=r,this.#a=l,$n.#M(),bs(e,i),this.#t.promise.finally(()=>{$n.#A.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=He.platform;return zt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#C(e.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),$n.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*ei.pixelRatio,r=t.rotation;if(r!==this.#d&&(e?.(),this.#d=r,bs(this.#l,{rotation:r})),i!==this.#h){e?.(),this.#h=i;const l={div:null,properties:null,ctx:$n.#R(this.#r)};for(const c of this.#u)l.properties=this.#g.get(c),l.div=c,this.#E(l)}}cancel(){const t=new Vi("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#C(t){if(this.#i)return;this.#s.ctx??=$n.#R(this.#r);const e=this.#u,i=this.#m;for(const r of t){if(e.length>Zx){Rt("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const l=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),l.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(r.str),this.#S(r)}}#S(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const r=ft.transform(this.#y,t.transform);let l=Math.atan2(r[1],r[0]);const c=this.#f[t.fontName];c.vertical&&(l+=Math.PI/2);let h=this.#n&&c.fontSubstitution||c.fontFamily;h=$n.fontFamilyMap.get(h)||h;const d=Math.hypot(r[2],r[3]),p=d*$n.#P(h,c,this.#r);let m,y;l===0?(m=r[4],y=r[5]-p):(m=r[4]+p*Math.sin(l),y=r[5]-p*Math.cos(l));const b="calc(var(--total-scale-factor) *",A=e.style;this.#e===this.#l?(A.left=`${(100*m/this.#o).toFixed(2)}%`,A.top=`${(100*y/this.#a).toFixed(2)}%`):(A.left=`${b}${m.toFixed(2)}px)`,A.top=`${b}${y.toFixed(2)}px)`),A.fontSize=`${b}${($n.#w*d).toFixed(2)}px)`,A.fontFamily=h,i.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),l!==0&&(i.angle=l*(180/Math.PI));let S=!1;if(t.str.length>1)S=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const _=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);_!==T&&Math.max(_,T)/Math.min(_,T)>1.5&&(S=!0)}if(S&&(i.canvasWidth=c.vertical?t.height:t.width),this.#g.set(e,i),this.#s.div=e,this.#s.properties=i,this.#E(this.#s),i.hasText&&this.#e.append(e),i.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),this.#e.append(_)}}#E(t){const{div:e,properties:i,ctx:r}=t,{style:l}=e;let c="";if($n.#w>1&&(c=`scale(${1/$n.#w})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:h}=l,{canvasWidth:d,fontSize:p}=i;$n.#D(r,p*this.#h,h);const{width:m}=r.measureText(e.textContent);m>0&&(c=`scaleX(${d*this.#h/m}) ${c}`)}i.angle!==0&&(c=`rotate(${i.angle}deg) ${c}`),c.length>0&&(l.transform=c)}static cleanup(){if(!(this.#A.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#R(t=null){let e=this.#b.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#T.set(e,{size:0,family:""})}return e}static#D(t,e,i){const r=this.#T.get(t);e===r.size&&i===r.family||(t.font=`${e}px ${i}`,r.size=e,r.family=i)}static#M(){if(this.#w!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#P(t,e,i){const r=this.#v.get(t);if(r)return r;const l=this.#R(i);l.canvas.width=l.canvas.height=Db,this.#D(l,Db,t);const c=l.measureText(""),h=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let p=.8;return h?p=h/(h+d):(He.platform.isFirefox&&Rt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?p=e.ascent:e.descent&&(p=1+e.descent)),this.#v.set(t,p),p}};const Kx=100;function cf(a={}){typeof a=="string"||a instanceof URL?a={url:a}:(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a={data:a});const t=new uf,{docId:e}=t,i=a.url?sx(a.url):null,r=a.data?ax(a.data):null,l=a.httpHeaders||null,c=a.withCredentials===!0,h=a.password??null,d=a.range instanceof hf?a.range:null,p=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:2**16;let m=a.worker instanceof tr?a.worker:null;const y=a.verbosity,b=typeof a.docBaseUrl=="string"&&!Eo(a.docBaseUrl)?a.docBaseUrl:null,A=Jl(a.cMapUrl),S=a.cMapPacked!==!1,_=a.CMapReaderFactory||(ln?dx:pb),T=Jl(a.iccUrl),E=Jl(a.standardFontDataUrl),x=a.StandardFontDataFactory||(ln?fx:gb),C=Jl(a.wasmUrl),L=a.WasmFactory||(ln?px:mb),O=a.stopAtErrors!==!0,P=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,z=a.isEvalSupported!==!1,$=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!ln,Y=typeof a.isImageDecoderSupported=="boolean"?a.isImageDecoderSupported:!ln&&(He.platform.isFirefox||!globalThis.chrome),et=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,J=typeof a.disableFontFace=="boolean"?a.disableFontFace:ln,at=a.fontExtraProperties===!0,ot=a.enableXfa===!0,rt=a.ownerDocument||globalThis.document,ht=a.disableRange===!0,k=a.disableStream===!0,j=a.disableAutoFetch===!0,nt=a.pdfBug===!0,vt=a.CanvasFactory||(ln?hx:lx),xt=a.FilterFactory||(ln?ux:cx),R=a.enableHWA===!0,q=a.useWasm!==!1,Q=d?d.length:a.length??NaN,lt=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!ln&&!J,bt=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:!!(_===pb&&x===gb&&L===mb&&A&&E&&C&&no(A,document.baseURI)&&no(E,document.baseURI)&&no(C,document.baseURI)),_t=null;UT(y);const mt={canvasFactory:new vt({ownerDocument:rt,enableHWA:R}),filterFactory:new xt({docId:e,ownerDocument:rt}),cMapReaderFactory:bt?null:new _({baseUrl:A,isCompressed:S}),standardFontDataFactory:bt?null:new x({baseUrl:E}),wasmFactory:bt?null:new L({baseUrl:C})};m||(m=tr.create({verbosity:y,port:ys.workerPort}),t._worker=m);const Kt={docId:e,apiVersion:"5.4.296",data:r,password:h,disableAutoFetch:j,rangeChunkSize:p,length:Q,docBaseUrl:b,enableXfa:ot,evaluatorOptions:{maxImageSize:P,disableFontFace:J,ignoreErrors:O,isEvalSupported:z,isOffscreenCanvasSupported:$,isImageDecoderSupported:Y,canvasMaxAreaInBytes:et,fontExtraProperties:at,useSystemFonts:lt,useWasm:q,useWorkerFetch:bt,cMapUrl:A,iccUrl:T,standardFontDataUrl:E,wasmUrl:C}},Ot={ownerDocument:rt,pdfBug:nt,styleElement:_t,loadingParams:{disableAutoFetch:j,enableXfa:ot}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const $t=m.messageHandler.sendWithPromise("GetDocRequest",Kt,r?[r.buffer]:null);let Je;if(d)Je=new Ox(d,{disableRange:ht,disableStream:k});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");const tn=no(i)?Bx:ln?$x:jx;Je=new tn({url:i,length:Q,httpHeaders:l,withCredentials:c,rangeChunkSize:p,disableRange:ht,disableStream:k})}return $t.then(tn=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Ut=new io(e,tn,m.port),Vt=new Jx(Ut,t,Je,Ot,mt,R);t._transport=Vt,Ut.send("Ready",null)})}).catch(t._capability.reject),t}class uf{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${uf.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let hf=class{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,e,i=!1,r=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=r}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#r)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#n)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){re("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class Wx{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return zt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Qx{#t=!1;constructor(t,e,i,r=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=r?new ob:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new Yv,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:l=!1}={}){return new wo({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return zt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:r="display",annotationMode:l=bi.ENABLE,transform:c=null,background:h=null,optionalContentConfigPromise:d=null,annotationCanvasMap:p=null,pageColors:m=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:A=!1,operationsFilter:S=null}){this._stats?.time("Overall");const _=this._transport.getRenderingIntent(r,l,y,b),{renderingIntent:T,cacheKey:E}=_;this.#t=!1,d||=this._transport.getOptionalContentConfig(T);let x=this._intentStates.get(E);x||(x=Object.create(null),this._intentStates.set(E,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const C=!!(T&Mn.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(_));const L=!!(this._pdfBug&&globalThis.StepperManager?.enabled),O=!this.recordedBBoxes&&(A||L),P=Y=>{if(x.renderTasks.delete(z),O){const et=z.gfx?.dependencyTracker.take();et&&(z.stepper&&z.stepper.setOperatorBBoxes(et,z.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=et))}C&&(this.#t=!0),this.#e(),Y?(z.capability.reject(Y),this._abortOperatorList({intentState:x,reason:Y instanceof Error?Y:new Error(Y)})):z.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},z=new qa({callback:P,params:{canvas:e,canvasContext:t,dependencyTracker:O?new mx(e,x.operatorList.length,L):null,viewport:i,transform:c,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!C,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:S});(x.renderTasks||=new Set).add(z);const $=z.task;return Promise.all([x.displayReadyCapability.promise,d]).then(([Y,et])=>{if(this.destroyed){P();return}if(this._stats?.time("Rendering"),!(et.renderingIntent&T))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");z.initializeGraphics({transparency:Y,optionalContentConfig:et}),z.operatorListChanged()}).catch(P),$}getOperatorList({intent:t="display",annotationMode:e=bi.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){function l(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,e,i,r,!0);let h=this._intentStates.get(c.cacheKey);h||(h=Object.create(null),this._intentStates.set(c.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=l,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||=new Set).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>po.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,r){function l(){c.read().then(function({value:d,done:p}){if(p){i(h);return}h.lang??=d.lang,Object.assign(h.styles,d.styles),h.items.push(...d.items),l()},r)}const c=e.getReader(),h={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new ob),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,r=t.length;i<r;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:r}){const{map:l,transfer:c}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:l,modifiedIds:r},c).getReader(),p=this._intentStates.get(e);p.streamReader=d;const m=()=>{d.read().then(({value:y,done:b})=>{if(b){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,p),m())},y=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const b of p.renderTasks)b.operatorListChanged();this.#e()}if(p.displayReadyCapability)p.displayReadyCapability.reject(y);else if(p.opListReadCapability)p.opListReadCapability.reject(y);else throw y}})};m()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Mc){let r=Kx;e.extraDelay>0&&e.extraDelay<1e3&&(r+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},r);return}}if(t.streamReader.cancel(new Vi(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,l]of this._intentStates)if(l===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var ms,Qn,Hi,Hs,bc,Vs,Gs,cn,oc,Zv,Kv,so,Qa,lc;const pe=class pe{constructor({name:t=null,port:e=null,verbosity:i=IT()}={}){ui(this,cn);ui(this,ms,Promise.withResolvers());ui(this,Qn,null);ui(this,Hi,null);ui(this,Hs,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(fe(pe,Gs).has(e))throw new Error("Cannot use more than one PDFWorker per port.");fe(pe,Gs).set(e,this),hi(this,cn,Zv).call(this,e)}else hi(this,cn,Kv).call(this)}get promise(){return fe(this,ms).promise}get port(){return fe(this,Hi)}get messageHandler(){return fe(this,Qn)}destroy(){this.destroyed=!0,fe(this,Hs)?.terminate(),yn(this,Hs,null),fe(pe,Gs).delete(fe(this,Hi)),yn(this,Hi,null),fe(this,Qn)?.destroy(),yn(this,Qn,null)}static create(t){const e=fe(this,Gs).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new pe(t)}static get workerSrc(){if(ys.workerSrc)return ys.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return zt(this,"_setupFakeWorkerGlobal",(async()=>fe(this,Qa,lc)?fe(this,Qa,lc):(await import(this.workerSrc)).WorkerMessageHandler)())}};ms=new WeakMap,Qn=new WeakMap,Hi=new WeakMap,Hs=new WeakMap,bc=new WeakMap,Vs=new WeakMap,Gs=new WeakMap,cn=new WeakSet,oc=function(){fe(this,ms).resolve(),fe(this,Qn).send("configure",{verbosity:this.verbosity})},Zv=function(t){yn(this,Hi,t),yn(this,Qn,new io("main","worker",t)),fe(this,Qn).on("ready",()=>{}),hi(this,cn,oc).call(this)},Kv=function(){if(fe(pe,Vs)||fe(pe,Qa,lc)){hi(this,cn,so).call(this);return}let{workerSrc:t}=pe;try{pe._isSameOrigin(window.location,t)||(t=pe._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new io("main","worker",e),r=()=>{l.abort(),i.destroy(),e.terminate(),this.destroyed?fe(this,ms).reject(new Error("Worker was destroyed")):hi(this,cn,so).call(this)},l=new AbortController;e.addEventListener("error",()=>{fe(this,Hs)||r()},{signal:l.signal}),i.on("test",h=>{if(l.abort(),this.destroyed||!h){r();return}yn(this,Qn,i),yn(this,Hi,e),yn(this,Hs,e),hi(this,cn,oc).call(this)}),i.on("ready",h=>{if(l.abort(),this.destroyed){r();return}try{c()}catch{hi(this,cn,so).call(this)}});const c=()=>{const h=new Uint8Array;i.send("test",h,[h.buffer])};c();return}catch{Dc("The worker has been disabled.")}hi(this,cn,so).call(this)},so=function(){fe(pe,Vs)||(Rt("Setting up fake worker."),yn(pe,Vs,!0)),pe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){fe(this,ms).reject(new Error("Worker was destroyed"));return}const e=new ox;yn(this,Hi,e);const i=`fake${gy(pe,bc)._++}`,r=new io(i+"_worker",i,e);t.setup(r,e),yn(this,Qn,new io(i,i+"_worker",e)),hi(this,cn,oc).call(this)}).catch(t=>{fe(this,ms).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Qa=new WeakSet,lc=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},ui(pe,Qa),ui(pe,bc,0),ui(pe,Vs,!1),ui(pe,Gs,new WeakMap),ln&&(yn(pe,Vs,!0),ys.workerSrc||="./pdf.worker.mjs"),pe._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const r=new URL(e,i);return i.origin===r.origin},pe._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},pe.fromPort=t=>{if(ZT("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pe.create(t)};let tr=pe;class Jx{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,e,i,r,l,c){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Yv,this.fontLoader=new nx({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#s(t,e=null){const i=this.#t.get(t);if(i)return i;const r=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,r),r}get annotationStorage(){return zt(this,"annotationStorage",new af)}getRenderingIntent(t,e=bi.ENABLE,i=null,r=!1,l=!1){let c=Mn.DISPLAY,h=Td;switch(t){case"any":c=Mn.ANY;break;case"display":break;case"print":c=Mn.PRINT;break;default:Rt(`getRenderingIntent - invalid intent: ${t}`)}const d=c&Mn.PRINT&&i instanceof zv?i:this.annotationStorage;switch(e){case bi.DISABLE:c+=Mn.ANNOTATIONS_DISABLE;break;case bi.ENABLE:break;case bi.ENABLE_FORMS:c+=Mn.ANNOTATIONS_FORMS;break;case bi.ENABLE_STORAGE:c+=Mn.ANNOTATIONS_STORAGE,h=d.serializable;break;default:Rt(`getRenderingIntent - invalid annotationMode: ${e}`)}r&&(c+=Mn.IS_EDITING),l&&(c+=Mn.OPLIST);const{ids:p,hash:m}=d.modifiedIds,y=[c,h.hash,m];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:p}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),go.cleanup(),this._networkStream?.cancelAllRequests(new Vi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,r)=>{qt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},r.onPull=()=>{this._fullReader.read().then(function({value:l,done:c}){if(c){r.close();return}qt(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{this._fullReader.cancel(l),r.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:l,contentLength:c}=this._fullReader;return(!r||!l)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=h=>{e.onProgress?.({loaded:h.loaded,total:h.total})}),{isStreamingSupported:r,isRangeSupported:l,contentLength:c}}),t.on("GetRangeReader",(i,r)=>{qt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(i.begin,i.end);if(!l){r.close();return}r.onPull=()=>{l.read().then(function({value:c,done:h}){if(h){r.close();return}qt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{r.error(c)})},r.onCancel=c=>{l.cancel(c),r.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new Wx(i,this))}),t.on("DocException",i=>{e._capability.reject(bn(i))}),t.on("PasswordRequest",i=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw bn(i);const r=l=>{l instanceof Error?this.#r.reject(l):this.#r.resolve({password:l})};e.onPassword(r,i.code)}catch(r){this.#r.reject(r)}return this.#r.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,r,l])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in l){const m=l.error;Rt(`Error during font loading: ${m}`),this.commonObjs.resolve(i,m);break}const c=new ne(l),h=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,y)=>globalThis.FontInspector.fontAdded(m,y):null,d=new ix(c,h,l.extra,l.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:p}=l;qt(p,"The imageRef must be defined.");for(const m of this.#e.values())for(const[,y]of m.objs)if(y?.ref===p)return y.dataLen?(this.commonObjs.resolve(i,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,l);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([i,r,l,c])=>{if(this.destroyed)return;const h=this.#e.get(r);if(!h.objs.has(i)){if(h._intentStates.size===0){c?.bitmap?.close();return}switch(l){case"Image":case"Pattern":h.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[i.type];if(!r)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Rt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#i.get(e);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#n.set(l.refStr,t);const c=new Qx(e,l,this,this._params.pdfBug);return this.#e.set(e,c),c});return this.#i.set(e,r),r}getPageIndex(t){return xd(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new kx(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new Mx(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),go.cleanup()}}cachedPageNumber(t){if(!xd(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class tC{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class qa{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:r,annotationCanvasMap:l,operatorList:c,pageIndex:h,canvasFactory:d,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:A=!1,operationsFilter:S=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=p,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new tC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=A,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=S}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(qa.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");qa.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:r,background:l,dependencyTracker:c}=this.params,h=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Xa(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),qa.#e.delete(this._canvas),t||=new Mc(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),qa.#e.delete(this._canvas),this.callback())))}}const Wv="5.4.296",Qv="f56dc8601";class Rn{#t=null;#e=null;#i;#n=null;#r=!1;#s=!1;#a=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return zt(this,"_keyboardManager",new To([[["Escape","mac+Escape"],Rn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Rn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Rn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Rn.prototype._moveToPrevious],[["Home","mac+Home"],Rn.prototype._moveToBeginning],[["End","mac+End"],Rn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#a=t):this.#s=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Rn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,t.append(i),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",Ln,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[i,r]of this.#l.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",r),l.title=i,l.setAttribute("data-l10n-id",Rn.#d[i]);const c=document.createElement("span");l.append(c),c.className="swatch",c.style.backgroundColor=r,l.ariaSelected=r===this.#i,l.addEventListener("click",this.#f.bind(this,r),{signal:e}),t.append(l)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Ht.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#g){this.#p(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#g){this.#p(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#g){this.#p(t);return}this.#n.lastChild?.focus()}#m(t){Rn._keyboardManager.exec(this,t)}#p(t){if(this.#g){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#g){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class mo{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,mo.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:i}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=i||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",mo.#n[t]),r.addEventListener("input",()=>{this.#i.updateParams(e,r.value)},{signal:this.#i._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function Mb(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}function to(a){return Math.max(0,Math.min(255,255*a))}class Rb{static CMYK_G([t,e,i,r]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=to(t),[t,t,t]}static G_HTML([t]){const e=Mb(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(to)}static RGB_HTML(t){return`#${t.map(Mb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,e+r)]}static CMYK_rgb([t,e,i,r]){return[to(1-Math.min(1,t+r)),to(1-Math.min(1,i+r)),to(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const r=1-t,l=1-e,c=1-i,h=Math.min(r,l,c);return["CMYK",r,l,c,h]}}class eC{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){re("Abstract method `_createSVG` called.")}}class yo extends eC{_createSVG(t){return document.createElementNS(ji,t)}}const nC=9,Ys=new WeakSet,iC=new Date().getTimezoneOffset()*60*1e3;class kb{static create(t){switch(t.data.annotationType){case Te.LINK:return new df(t);case Te.TEXT:return new aC(t);case Te.WIDGET:switch(t.data.fieldType){case"Tx":return new rC(t);case"Btn":return t.data.radioButton?new Jv(t):t.data.checkBox?new lC(t):new cC(t);case"Ch":return new uC(t);case"Sig":return new oC(t)}return new Js(t);case Te.POPUP:return new Md(t);case Te.FREETEXT:return new t0(t);case Te.LINE:return new dC(t);case Te.SQUARE:return new fC(t);case Te.CIRCLE:return new pC(t);case Te.POLYLINE:return new e0(t);case Te.CARET:return new mC(t);case Te.INK:return new ff(t);case Te.POLYGON:return new gC(t);case Te.HIGHLIGHT:return new n0(t);case Te.UNDERLINE:return new yC(t);case Te.SQUIGGLY:return new bC(t);case Te.STRIKEOUT:return new vC(t);case Te.STAMP:return new i0(t);case Te.FILEATTACHMENT:return new AC(t);default:return new ve(t)}}}class ve{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ve._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:r}=this.data;let l=-1/0,c=-1/0;if(e?.length>=8){for(let h=0;h<e.length;h+=8)e[h+1]>c?(c=e[h+1],l=e[h+2]):e[h+1]===c&&(l=Math.max(l,e[h+2]));return[l,c]}if(i?.length>=1){for(const h of i)for(let d=0,p=h.length;d<p;d+=2)h[d+1]>c?(c=h[d+1],l=h[d]):h[d+1]===c&&(l=Math.max(l,h[d]));if(l!==1/0)return[l,c]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:r,pageX:l,pageY:c}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-l)/i,t[1]=100*(t[1]-c)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${ho}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${ho}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#n(e);let r=this.#i?.popup||this.popup;!r&&i?.text&&(this._createPopup(i),r=this.#i.popup),r&&(r.updateEdited(t),i?.deleted&&(r.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:c,pageX:h,pageY:d}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-h)/l}%`,e.top=`${100*(c-t[3]+d)/c}%`,r===0?(e.width=`${100*(t[2]-t[0])/l}%`,e.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(r)}_createContainer(t){const{data:e,parent:{page:i,viewport:r}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",e.id),!(this instanceof Js)&&!(this instanceof df)&&(l.tabIndex=0);const{style:c}=l;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(l.title=e.alternativeText),e.noRotate&&l.classList.add("norotate"),!e.rect||this instanceof Md){const{rotation:_}=e;return!e.hasOwnCanvas&&_!==0&&this.setRotation(_,l),l}const{width:h,height:d}=this;if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const _=e.borderStyle.horizontalCornerRadius,T=e.borderStyle.verticalCornerRadius;if(_>0||T>0){const x=`calc(${_}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;c.borderRadius=x}else if(this instanceof Jv){const x=`calc(${h}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;c.borderRadius=x}switch(e.borderStyle.style){case ja.SOLID:c.borderStyle="solid";break;case ja.DASHED:c.borderStyle="dashed";break;case ja.BEVELED:Rt("Unimplemented border style: beveled");break;case ja.INSET:Rt("Unimplemented border style: inset");break;case ja.UNDERLINE:c.borderBottomStyle="solid";break}const E=e.borderColor||null;E?(this.#e=!0,c.borderColor=ft.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):c.borderWidth=0}const p=ft.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:m,pageHeight:y,pageX:b,pageY:A}=r.rawDims;c.left=`${100*(p[0]-b)/m}%`,c.top=`${100*(p[1]-A)/y}%`;const{rotation:S}=e;return e.hasOwnCanvas||S===0?(c.width=`${100*h/m}%`,c.height=`${100*d/y}%`):this.setRotation(S,l),l}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims;let{width:l,height:c}=this;t%180!==0&&([l,c]=[c,l]),e.style.width=`${100*l/i}%`,e.style.height=`${100*c/r}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,r)=>{const l=r.detail[e],c=l[0],h=l.slice(1);r.target.style[i]=Rb[`${c}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[i]:Rb[`${c}_rgb`](h)})};return zt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const r of Object.keys(e.detail))(t[r]||i[r])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[r,l]of Object.entries(e)){const c=i[r];if(c){const h={detail:{[r]:l},target:t};c(h),delete e[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,r,l]=this.data.rect.map(_=>Math.fround(_));if(t.length===8){const[_,T,E,x]=t.subarray(2,6);if(r===_&&l===T&&e===E&&i===x)return}const{style:c}=this.container;let h;if(this.#e){const{borderColor:_,borderWidth:T}=c;c.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const d=r-e,p=l-i,{svgFactory:m}=this,y=m.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=m.createElement("defs");y.append(b);const A=m.createElement("clipPath"),S=`clippath_${this.data.id}`;A.setAttribute("id",S),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let _=2,T=t.length;_<T;_+=8){const E=t[_],x=t[_+1],C=t[_+2],L=t[_+3],O=m.createElement("rect"),P=(C-e)/d,z=(l-x)/p,$=(E-C)/d,Y=(x-L)/p;O.setAttribute("x",P),O.setAttribute("y",z),O.setAttribute("width",$),O.setAttribute("height",Y),A.append(O),h?.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${z}" width="${$}" height="${Y}"/>`)}this.#e&&(h.push("</g></svg>')"),c.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${S})`}_createPopup(t=null){const{data:e}=this;let i,r;t?(i={str:t.text},r=t.date):(i=e.contentsObj,r=e.modificationDate);const l=this.#i=new Md({data:{color:e.color,titleObj:e.titleObj,modificationDate:r,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(l.render())}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){re("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:l,id:c,exportValues:h}of r){if(l===-1||c===e)continue;const d=typeof h=="string"?h:null,p=document.querySelector(`[data-element-id="${c}"]`);if(p&&!Ys.has(p)){Rt(`_getElementsByName - element not allowed: ${c}`);continue}i.push({id:c,exportValue:d,domElement:p})}return i}for(const r of document.getElementsByName(t)){const{exportValue:l}=r,c=r.getAttribute("data-element-id");c!==e&&Ys.has(r)&&i.push({id:c,exportValue:l,domElement:r})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class sC extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class df extends ve{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#i(i,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",r=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,r),!1),this.#t()}#i(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(e.actions)){const l=i.get(r);l&&(t[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Rt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:r,refs:l,include:c}=e,h=[];if(r.length!==0||l.length!==0){const m=new Set(l);for(const y of r){const b=this._fieldObjects[y]||[];for(const{id:A}of b)m.add(A)}for(const y of Object.values(this._fieldObjects))for(const b of y)m.has(b.id)===c&&h.push(b)}else for(const m of Object.values(this._fieldObjects))h.push(...m);const d=this.annotationStorage,p=[];for(const m of h){const{id:y}=m;switch(p.push(y),m.type){case"text":{const A=m.defaultValue||"";d.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=m.defaultValue===m.exportValues;d.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=m.defaultValue||"";d.setValue(y,{value:A});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!Ys.has(b)){Rt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}}),!1}}}class aC extends ve{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Js extends ve{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return He.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,r,l){i.includes("mouse")?t.addEventListener(i,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(i,c=>{if(i==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(c)}})})}_setEventListeners(t,e,i,r){for(const[l,c]of i)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,l,c,r),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ft.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||nC,l=t.style;let c;const h=2,d=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h),m=Math.round(p/(od*r))||1,y=p/m;c=Math.min(r,d(y/od))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-h);c=Math.min(r,d(p/od))}l.fontSize=`calc(${c}px * var(--total-scale-factor))`,l.color=ft.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(l.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class rC extends Js{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,r){const l=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=i),l.setValue(c.id,{[r]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue});let l=r.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let h=r.formattedValue||this.data.textContent?.join(`
`)||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=h??l,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",h??l),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Ys.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:p,datetimeType:m,timeStep:y}=this.data,b=!!m&&this.enableScripting;p&&(i.title=p),this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",S=>{t.setValue(e,{value:S.target.value}),this.setPropertyOnSiblings(i,"value",S.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",S=>{const _=this.data.defaultFieldValue??"";i.value=d.userValue=_,d.formattedValue=null});let A=S=>{const{formattedValue:_}=d;_!=null&&(S.target.value=_),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",_=>{if(d.focused)return;const{target:T}=_;if(b&&(T.type=m,y&&(T.step=y)),d.userValue){const E=d.userValue;if(b)if(m==="time"){const x=new Date(E),C=[x.getHours(),x.getMinutes(),x.getSeconds()];T.value=C.map(L=>L.toString().padStart(2,"0")).join(":")}else T.value=new Date(E-iC).toISOString().split(m==="date"?"T":".",1)[0];else T.value=E}d.lastCommittedValue=T.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const T={value(E){d.userValue=E.detail.value??"",b||t.setValue(e,{value:d.userValue.toString()}),E.target.value=d.userValue},formattedValue(E){const{formattedValue:x}=E.detail;d.formattedValue=x,x!=null&&E.target!==document.activeElement&&(E.target.value=x);const C={formattedValue:x};b&&(C.value=x),t.setValue(e,C)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:x}=E.detail,{target:C}=E;if(x===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",x);let L=d.userValue;!L||L.length<=x||(L=L.slice(0,x),C.value=d.userValue=L,t.setValue(e,{value:L}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:L,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(T,_)}),i.addEventListener("keydown",_=>{d.commitKey=1;let T=-1;if(_.key==="Escape"?T=0:_.key==="Enter"&&!this.data.multiLine?T=2:_.key==="Tab"&&(d.commitKey=3),T===-1)return;const{value:E}=_.target;d.lastCommittedValue!==E&&(d.lastCommittedValue=E,d.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:T,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const S=A;A=null,i.addEventListener("blur",_=>{if(!d.focused||!_.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:T}=_;let{value:E}=T;if(b){if(E&&m==="time"){const x=E.split(":").map(C=>parseInt(C,10));E=new Date(2e3,0,1,x[0],x[1],x[2]||0).valueOf(),T.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();T.type="text"}d.userValue=E,d.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:d.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}),S(_)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",_=>{d.lastCommittedValue=null;const{data:T,target:E}=_,{value:x,selectionStart:C,selectionEnd:L}=E;let O=C,P=L;switch(_.inputType){case"deleteWordBackward":{const z=x.substring(0,C).match(/\w*[^\w]*$/);z&&(O-=z[0].length);break}case"deleteWordForward":{const z=x.substring(C).match(/^[^\w]*\w*/);z&&(P+=z[0].length);break}case"deleteContentBackward":C===L&&(O-=1);break;case"deleteContentForward":C===L&&(P+=1);break}_.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,change:T||"",willCommit:!1,selStart:O,selEnd:P}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(A&&i.addEventListener("blur",A),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${_}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class oC extends Js{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class lC extends Js{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return Ys.add(l),l.setAttribute("data-element-id",i),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=e.fieldName,r&&l.setAttribute("checked",!0),l.setAttribute("exportValue",e.exportValue),l.tabIndex=0,l.addEventListener("change",c=>{const{name:h,checked:d}=c.target;for(const p of this._getElementsByName(h,i)){const m=d&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}t.setValue(i,{value:d})}),l.addEventListener("resetform",c=>{const h=e.defaultFieldValue||"Off";c.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",c=>{const h={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class Jv extends Js{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let r=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof r=="string"&&(r=r!==e.buttonValue,t.setValue(i,{value:r})),r)for(const c of this._getElementsByName(e.fieldName,i))t.setValue(c.id,{value:!1});const l=document.createElement("input");if(Ys.add(l),l.setAttribute("data-element-id",i),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=e.fieldName,r&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",c=>{const{name:h,checked:d}=c.target;for(const p of this._getElementsByName(h,i))t.setValue(p.id,{value:!1});t.setValue(i,{value:d})}),l.addEventListener("resetform",c=>{const h=e.defaultFieldValue;c.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;l.addEventListener("updatefromsandbox",h=>{const d={value:p=>{const m=c===p.detail.value;for(const y of this._getElementsByName(p.target.name)){const b=m&&y.id===i;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class cC extends df{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class uC extends Js{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");Ys.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue;for(const b of r.options)b.selected=b.value===y});for(const m of this.data.options){const y=document.createElement("option");y.textContent=m.displayValue,y.value=m.exportValue,i.value.includes(m.exportValue)&&(y.setAttribute("selected",!0),l=!1),r.append(y)}let c=null;if(l){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),r.prepend(m),c=()=>{m.remove(),r.removeEventListener("input",c),c=null},r.addEventListener("input",c)}const h=m=>{const y=m?"value":"textContent",{options:b,multiple:A}=r;return A?Array.prototype.filter.call(b,S=>S.selected).map(S=>S[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=h(!1);const p=m=>{const y=m.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",m=>{const y={value(b){c?.();const A=b.detail.value,S=new Set(Array.isArray(A)?A:[A]);for(const _ of r.options)_.selected=S.has(_.value);t.setValue(e,{value:h(!0)}),d=h(!1)},multipleSelection(b){r.multiple=!0},remove(b){const A=r.options,S=b.detail.remove;A[S].selected=!1,r.remove(S),A.length>0&&Array.prototype.findIndex.call(A,T=>T.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:h(!0),items:p(b)}),d=h(!1)},clear(b){for(;r.length!==0;)r.remove(0);t.setValue(e,{value:null,items:[]}),d=h(!1)},insert(b){const{index:A,displayValue:S,exportValue:_}=b.detail.insert,T=r.children[A],E=document.createElement("option");E.textContent=S,E.value=_,T?T.before(E):r.append(E),t.setValue(e,{value:h(!0),items:p(b)}),d=h(!1)},items(b){const{items:A}=b.detail;for(;r.length!==0;)r.remove(0);for(const S of A){const{displayValue:_,exportValue:T}=S,E=document.createElement("option");E.textContent=_,E.value=T,r.append(E)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:h(!0),items:p(b)}),d=h(!1)},indices(b){const A=new Set(b.detail.indices);for(const S of b.target.options)S.selected=A.has(S.index);t.setValue(e,{value:h(!0)}),d=h(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,m)}),r.addEventListener("input",m=>{const y=h(!0),b=h(!1);t.setValue(e,{value:y}),m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):r.addEventListener("input",function(m){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Md extends ve{constructor(t){const{data:e,elements:i,parent:r}=t,l=!!r._commentManager;if(super(t,{isRenderable:!l&&ve._hasPopupData(e)}),this.elements=i,l&&ve._hasPopupData(e)){const c=this.popup=this.#t();for(const h of i)h.popup=c}else this.popup=null}#t(){return new hC({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),i=[];for(const r of this.elements)r.popup=e,r.container.ariaHasPopup="dialog",i.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(r=>`${Jd}${r}`).join(",")),this.container}}class hC{#t=null;#e=this.#G.bind(this);#i=this.#U.bind(this);#n=this.#L.bind(this);#r=this.#_.bind(this);#s=null;#a=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#p=null;#u=null;#g=null;#y=null;#v=null;#b=null;#T=null;#w=null;#A=null;#C=!1;#S=null;#E=null;constructor({container:t,color:e,elements:i,titleObj:r,modificationDate:l,contentsObj:c,richText:h,parent:d,rect:p,parentRect:m,open:y,commentManager:b=null}){this.#a=t,this.#w=r,this.#o=c,this.#T=h,this.#d=d,this.#s=e,this.#b=p,this.#h=m,this.#l=i,this.#t=b,this.#S=i[0],this.#c=gc.toDateObject(l),this.trigger=i.flatMap(A=>A.getElementsToTriggerPopup()),b?this.renderCommentButton():(this.#R(),this.#a.hidden=!0,y&&this.#_())}#R(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#D(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#g||(this.#y||this.#D(),!this.#y))return;const{signal:t}=this.#p=new AbortController,e=!!this.#S.extraPopupElement,i=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},l=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#g=this.#S.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",i,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=this.#g=document.createElement("button");c.className="annotationCommentButton";const h=this.#S.container;c.style.zIndex=h.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#P(),this.#M(),c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",i,{signal:t}),c.addEventListener("pointerenter",r,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),h.after(c)}}#M(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[t,e]=this.#y,{style:i}=this.#g;i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`}#P(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#S.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:r,modificationDate:l}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:r,modificationDate:l}}get elementBeforePopup(){return this.#g}get comment(){return this.#E||=this.#S.commentText,this.#E}set comment(t){t!==this.comment&&(this.#S.commentText=this.#E=t)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#g&&(this.#g.classList.toggle("selected",t),this.#g.ariaExpanded=e)}setSelectedCommentButton(t){this.#g.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:i}=this.#g.getBoundingClientRect(),{x:r,y:l,width:c,height:h}=this.#S.layer.getBoundingClientRect();return[(t-r)/c,(e+i-l)/h]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=this.#v||this.commentButtonPosition.map(p=>p/100),r=this.parentBoundingClientRect,{x:l,y:c,width:h,height:d}=r;this.#t.showDialog(null,this,l+e*h,c+i*d,{...t,parentDimensions:r})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#s){const i=t.style.outlineColor=ft.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#w?.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#w}if(t.append(e),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),e.append(i)}ef({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#O(){const t=this.#T,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#T.html||null}get#N(){return this.#O?.attributes?.style?.fontSize||0}get#F(){return this.#O?.attributes?.style?.color||null}#z(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},r={style:{color:this.#F,fontSize:this.#N?`calc(${this.#N}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))e.push({name:"span",value:l,attributes:r});return i}#G(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#_()}updateEdited({rect:t,popup:e,deleted:i}){if(this.#t){i?(this.remove(),this.#E=null):e&&(e.deleted?this.remove():(this.#P(),this.#E=e.text)),t&&(this.#y=null,this.#D(),this.#M());return}if(i||e?.deleted){this.remove();return}this.#R(),this.#A||={contentsObj:this.#o,richText:this.#T},t&&(this.#u=null),e&&e.text&&(this.#T=this.#z(e.text),this.#c=gc.toDateObject(e.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#T}=this.#A,this.#A=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#C=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#x(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:r,pageY:l}}}=this.#d;let c=!!this.#h,h=c?this.#h:this.#b;for(const S of this.#l)if(!h||ft.intersect(S.data.rect,h)!==null){h=S.data.rect,c=!0;break}const d=ft.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),m=c?h[2]-h[0]+5:0,y=d[0]+m,b=d[1];this.#u=[100*(y-r)/e,100*(b-l)/i];const{style:A}=this.#a;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#_(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#L(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#e)):(this.#U(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#e))}#L(){this.#m||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#x(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#U(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#R(),this.#C&&(this.#m||this.#L(),this.#C=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class t0 extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Mt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class dC extends ve{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,r=this.svgFactory.create(e,i,!0),l=this.#t=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class fC extends ve{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,r=this.svgFactory.create(e,i,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",l/2),c.setAttribute("y",l/2),c.setAttribute("width",e-l),c.setAttribute("height",i-l),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class pC extends ve{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,r=this.svgFactory.create(e,i,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",e/2),c.setAttribute("cy",i/2),c.setAttribute("rx",e/2-l/2),c.setAttribute("ry",i/2-l/2),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),r.append(c),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class e0 extends ve{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:r},width:l,height:c}=this;if(!e)return this.container;const h=this.svgFactory.create(l,c,!0);let d=[];for(let m=0,y=e.length;m<y;m+=2){const b=e[m]-t[0],A=t[3]-e[m+1];d.push(`${b},${A}`)}d=d.join(" ");const p=this.#t=this.svgFactory.createElement(this.svgElementName);return p.setAttribute("points",d),p.setAttribute("stroke-width",i.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),h.append(p),this.container.append(h),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class gC extends e0{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class mC extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ff extends ve{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Mt.HIGHLIGHT:Mt.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:r,popupRef:l}}=this,{transform:c,width:h,height:d}=this.#i(e,t),p=this.svgFactory.create(h,d,!0),m=this.#t=this.svgFactory.createElement("svg:g");p.append(m),m.setAttribute("stroke-width",r.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",c);for(let y=0,b=i.length;y<b;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",i[y].join(",")),m.append(A)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:r}=t,l=this.#t;if(e>=0&&l.setAttribute("stroke-width",e||1),i)for(let c=0,h=this.#e.length;c<h;c++)this.#e[c].setAttribute("points",i[c].join(","));if(r){const{transform:c,width:h,height:d}=this.#i(this.data.rotation,r);l.parentElement.setAttribute("viewBox",`0 0 ${h} ${d}`),l.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class n0 extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Mt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class yC extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class bC extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class vC extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class i0 extends ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Mt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class AC extends ve{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:r}=He.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(r?l.metaKey:l.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let pf=class s0{#t=null;#e=null;#i=null;#n=new Map;#r=null;#s=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:r,page:l,viewport:c,structTreeLayer:h,commentManager:d,linkService:p,annotationStorage:m}){this.div=t,this.#t=e,this.#e=i,this.#r=h||null,this.#s=p||null,this.#i=m||new af,this.page=l,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async#a(t,e,i){const r=t.firstChild||t,l=r.id=`${Jd}${e}`,c=await this.#r?.getAriaAttributes(l);if(c)for(const[h,d]of c)r.setAttribute(h,d);i?i.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,r,!1))}async render(t){const{annotations:e}=t,i=this.div;bs(i,this.viewport);const r=new Map,l={data:null,layer:i,linkService:this.#s,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new yo,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const c of e){if(c.noHTML)continue;const h=c.annotationType===Te.POPUP;if(h){const m=r.get(c.id);if(!m)continue;l.elements=m}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;l.data=c;const d=kb.create(l);if(!d.isRenderable)continue;if(!h&&c.popupRef){const m=r.get(c.popupRef);m?m.push(d):r.set(c.popupRef,[d])}const p=d.render();c.hidden&&(p.style.visibility="hidden"),await this.#a(p,c.id,l.elements),d.extraPopupElement?.popup?.renderCommentButton(),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#o()}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#s,svgFactory:new yo,parent:this};for(const i of t){i.borderStyle||=s0._defaultBorderStyle,e.data=i;const r=kb.create(e);if(!r.isRenderable)continue;const l=r.render();await this.#a(l,i.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,bs(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const r=t.querySelector(`[data-annotation-id="${e}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:l}=r;l?l.nodeName==="CANVAS"?l.replaceWith(i):l.classList.contains("annotationContent")?l.after(i):l.before(i):r.append(i);const c=this.#n.get(e);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,r.id,i),c._hasNoCanvas=!1):c.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:i,rotation:r}=t,l=new sC({data:{id:i,rect:t.getPDFRect(),rotation:r},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#i}),c=l.render();return e.append(c),this.#t?.moveElementInDOM(e,c,c,!1),l.createOrUpdatePopup(),l}static get _defaultBorderStyle(){return zt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ja.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const ac=/\r\n?|\n/g;class Ie extends wt{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Ie.prototype,e=l=>l.isEmpty(),i=Gi.TRANSLATE_SMALL,r=Gi.TRANSLATE_BIG;return zt(this,"_keyboardManager",new To([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}]]))}static _type="freetext";static _editorType=Mt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Ie._defaultColor||wt._defaultLineColor,this.#n=t.fontSize||Ie._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){wt.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Ht.FREETEXT_SIZE:Ie._defaultFontSize=e;break;case Ht.FREETEXT_COLOR:Ie._defaultColor=e;break}}updateParams(t,e){switch(t){case Ht.FREETEXT_SIZE:this.#r(e);break;case Ht.FREETEXT_COLOR:this.#s(e);break}}static get defaultPropertiesToUpdate(){return[[Ht.FREETEXT_SIZE,Ie._defaultFontSize],[Ht.FREETEXT_COLOR,Ie._defaultColor||wt._defaultLineColor]]}get propertiesToUpdate(){return[[Ht.FREETEXT_SIZE,this.#n],[Ht.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new mo(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ht.FREETEXT_COLOR}#r(t){const e=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#n)*this.parentScale),this.#n=r,this.#o()},i=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ht.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(t){const e=r=>{this.color=r,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ht.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ie._internalPadding*t,-(Ie._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(Ie.#c(i)),e=i);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:l}=this,c=l.style.display,h=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",r.div.append(this.div),i=l.getBoundingClientRect(),l.remove(),l.style.display=c,l.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#a().trimEnd();if(t===e)return;const i=r=>{if(this.#t=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ie._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,l]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[h,d]=this.getInitialTranslation();[h,d]=this.pageTranslationToScreen(h,d);const[p,m]=this.pageDimensions,[y,b]=this.pageTranslation;let A,S;switch(this.rotation){case 0:A=t+(c[0]-y)/p,S=e+this.height-(c[1]-b)/m;break;case 90:A=t+(c[0]-y)/p,S=e-(c[1]-b)/m,[h,d]=[d,-h];break;case 180:A=t-this.width+(c[0]-y)/p,S=e-(c[1]-b)/m,[h,d]=[-h,-d];break;case 270:A=t+(c[0]-y-this.height*m)/p,S=e+(c[1]-b-this.width*p)/m,[h,d]=[-d,h];break}this.setAt(A*r,S*l,h,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(ac,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const r=Ie.#h(e.getData("text")||"").replaceAll(ac,`
`);if(!r)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!r.includes(`
`)){c.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:h,startOffset:d}=c,p=[],m=[];if(h.nodeType===Node.TEXT_NODE){const A=h.parentElement;if(m.push(h.nodeValue.slice(d).replaceAll(ac,"")),A!==this.editorDiv){let S=p;for(const _ of this.editorDiv.childNodes){if(_===A){S=m;continue}S.push(Ie.#c(_))}}p.push(h.nodeValue.slice(0,d).replaceAll(ac,""))}else if(h===this.editorDiv){let A=p,S=0;for(const _ of this.editorDiv.childNodes)S++===d&&(A=m),A.push(Ie.#c(_))}this.#t=`${p.join(`
`)}${r}${m.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(p.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const S=A.nodeValue.length;if(b<=S){y.setStart(A,b),y.setEnd(A,b);break}b-=S}l.removeAllRanges(),l.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ie._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let r=null;if(t instanceof t0){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:d,rotation:p,id:m,popupRef:y,richText:b,contentsObj:A,creationDate:S,modificationDate:_},textContent:T,textPosition:E,parent:{page:{pageNumber:x}}}=t;if(!T||T.length===0)return null;r=t={annotationType:Mt.FREETEXT,color:Array.from(h),fontSize:c,value:T.join(`
`),position:E,pageIndex:x-1,rect:d.slice(0),rotation:p,annotationElementId:m,id:m,deleted:!1,popupRef:y,comment:A?.str||null,richText:b,creationDate:S,modificationDate:_}}const l=await super.deserialize(t,e,i);return l.#n=t.fontSize,l.color=ft.makeHexColor(...t.color),l.#t=Ie.#h(t.value),l._initialData=r,t.comment&&l.setCommentData(t),l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=wt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(t){const{value:e,fontSize:i,color:r,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((c,h)=>c!==r[h])||t.pageIndex!==l}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,e.replaceChildren();for(const r of this.#t.split(`
`)){const l=document.createElement("div");l.append(r?document.createTextNode(r):document.createElement("br")),e.append(l)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class dt{static PRECISION=1e-4;toSVGPath(){re("Abstract method `toSVGPath` must be implemented.")}get box(){re("Abstract getter `box` must be implemented.")}serialize(t,e){re("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,r,l,c){c||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)c[h]=e+t[h]*r,c[h+1]=i+t[h+1]*l;return c}static _rescaleAndSwap(t,e,i,r,l,c){c||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)c[h]=e+t[h+1]*r,c[h+1]=i+t[h]*l;return c}static _translate(t,e,i,r){r||=new Float32Array(t.length);for(let l=0,c=t.length;l<c;l+=2)r[l]=e+t[l],r[l+1]=i+t[l+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,r,l){switch(l){case 90:return[1-e/i,t/r];case 180:return[1-t/i,1-e/r];case 270:return[e/i,1-t/r];default:return[t/i,e/r]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,r,l,c){return[(t+5*i)/6,(e+5*r)/6,(5*i+l)/6,(5*r+c)/6,(i+l)/2,(r+c)/2]}}class js{#t;#e=[];#i;#n;#r=[];#s=new Float32Array(18);#a;#o;#c;#l;#d;#h;#f=[];static#m=8;static#p=2;static#u=js.#m+js.#p;constructor({x:t,y:e},i,r,l,c,h=0){this.#t=i,this.#h=l*r,this.#n=c,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=h,this.#l=js.#m*r,this.#c=js.#u*r,this.#d=r,this.#f.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#g(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[i,r,l,c]=this.#t;return[(this.#a+(t[0]-e[0])/2-i)/l,(this.#o+(t[1]-e[1])/2-r)/c,(this.#a+(e[0]-t[0])/2-i)/l,(this.#o+(e[1]-t[1])/2-r)/c]}add({x:t,y:e}){this.#a=t,this.#o=e;const[i,r,l,c]=this.#t;let[h,d,p,m]=this.#s.subarray(8,12);const y=t-p,b=e-m,A=Math.hypot(y,b);if(A<this.#c)return!1;const S=A-this.#l,_=S/A,T=_*y,E=_*b;let x=h,C=d;h=p,d=m,p+=T,m+=E,this.#f?.push(t,e);const L=-E/S,O=T/S,P=L*this.#h,z=O*this.#h;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([p+P,m+z],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([p-P,m-z],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([h+P,d+z],2),this.#r.push(NaN,NaN,NaN,NaN,(h+P-i)/l,(d+z-r)/c),this.#s.set([h-P,d-z],14),this.#e.push(NaN,NaN,NaN,NaN,(h-P-i)/l,(d-z-r)/c)),this.#s.set([x,C,h,d,p,m],6),!this.isEmpty()):(this.#s.set([x,C,h,d,p,m],6),Math.abs(Math.atan2(C-d,x-h)-Math.atan2(E,T))<Math.PI/2?([h,d,p,m]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((h+p)/2-i)/l,((d+m)/2-r)/c),[h,d,x,C]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((x+h)/2-i)/l,((C+d)/2-r)/c),!0):([x,C,h,d,p,m]=this.#s.subarray(0,6),this.#r.push(((x+5*h)/6-i)/l,((C+5*d)/6-r)/c,((5*h+p)/6-i)/l,((5*d+m)/6-r)/c,((h+p)/2-i)/l,((d+m)/2-r)/c),[p,m,h,d,x,C]=this.#s.subarray(12,18),this.#e.push(((x+5*h)/6-i)/l,((C+5*d)/6-r)/c,((5*h+p)/6-i)/l,((5*d+m)/6-r)/c,((h+p)/2-i)/l,((d+m)/2-r)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#b(i);for(let r=e.length-6;r>=6;r-=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);return this.#v(i),i.join(" ")}#y(){const[t,e,i,r]=this.#t,[l,c,h,d]=this.#g();return`M${(this.#s[2]-t)/i} ${(this.#s[3]-e)/r} L${(this.#s[4]-t)/i} ${(this.#s[5]-e)/r} L${l} ${c} L${h} ${d} L${(this.#s[16]-t)/i} ${(this.#s[17]-e)/r} L${(this.#s[14]-t)/i} ${(this.#s[15]-e)/r} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){const[e,i,r,l]=this.#t,c=this.#s.subarray(4,6),h=this.#s.subarray(16,18),[d,p,m,y]=this.#g();t.push(`L${(c[0]-e)/r} ${(c[1]-i)/l} L${d} ${p} L${m} ${y} L${(h[0]-e)/r} ${(h[1]-i)/l}`)}newFreeDrawOutline(t,e,i,r,l,c){return new a0(t,e,i,r,l,c)}getOutlines(){const t=this.#r,e=this.#e,i=this.#s,[r,l,c,h]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=d.length-2;y<b;y+=2)d[y]=(this.#f[y]-r)/c,d[y+1]=(this.#f[y+1]-l)/h;if(d[d.length-2]=(this.#a-r)/c,d[d.length-1]=(this.#o-l)/h,isNaN(i[6])&&!this.isEmpty())return this.#T(d);const p=new Float32Array(this.#r.length+24+this.#e.length);let m=t.length;for(let y=0;y<m;y+=2){if(isNaN(t[y])){p[y]=p[y+1]=NaN;continue}p[y]=t[y],p[y+1]=t[y+1]}m=this.#A(p,m);for(let y=e.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(e[y+b])){p[m]=p[m+1]=NaN,m+=2;continue}p[m]=e[y+b],p[m+1]=e[y+b+1],m+=2}return this.#w(p,m),this.newFreeDrawOutline(p,d,this.#t,this.#d,this.#i,this.#n)}#T(t){const e=this.#s,[i,r,l,c]=this.#t,[h,d,p,m]=this.#g(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-i)/l,(e[3]-r)/c,NaN,NaN,NaN,NaN,(e[4]-i)/l,(e[5]-r)/c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(e[16]-i)/l,(e[17]-r)/c,NaN,NaN,NaN,NaN,(e[14]-i)/l,(e[15]-r)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#i,this.#n)}#w(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#A(t,e){const i=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[l,c,h,d]=this.#t,[p,m,y,b]=this.#g();return t.set([NaN,NaN,NaN,NaN,(i[0]-l)/h,(i[1]-c)/d,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(r[0]-l)/h,(r[1]-c)/d],e),e+=24}}class a0 extends dt{#t;#e=new Float32Array(4);#i;#n;#r;#s;#a;constructor(t,e,i,r,l,c){super(),this.#a=t,this.#r=e,this.#t=i,this.#s=r,this.#i=l,this.#n=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[h,d,p,m]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-h)/p,t[y+1]=(t[y+1]-d)/m;for(let y=0,b=e.length;y<b;y+=2)e[y]=(e[y]-h)/p,e[y+1]=(e[y+1]-d)/m}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,i=this.#a.length;e<i;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,r],l){const c=i-t,h=r-e;let d,p;switch(l){case 0:d=dt._rescale(this.#a,t,r,c,-h),p=dt._rescale(this.#r,t,r,c,-h);break;case 90:d=dt._rescaleAndSwap(this.#a,t,e,c,h),p=dt._rescaleAndSwap(this.#r,t,e,c,h);break;case 180:d=dt._rescale(this.#a,i,e,-c,h),p=dt._rescale(this.#r,i,e,-c,h);break;case 270:d=dt._rescaleAndSwap(this.#a,i,r,-c,-h),p=dt._rescaleAndSwap(this.#r,i,r,-c,-h);break}return{outline:Array.from(d),points:[Array.from(p)]}}#o(t){const e=this.#a;let i=e[4],r=e[5];const l=[i,r,i,r];let c=i,h=r,d=i,p=r;const m=t?Math.max:Math.min,y=new Float32Array(4);for(let A=6,S=e.length;A<S;A+=6){const _=e[A+4],T=e[A+5];isNaN(e[A])?(ft.pointBoundingBox(_,T,l),h>T?(c=_,h=T):h===T&&(c=m(c,_)),p<T?(d=_,p=T):p===T&&(d=m(d,_))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,ft.bezierBoundingBox(i,r,...e.slice(A,A+6),y),ft.rectBoundingBox(y[0],y[1],y[2],y[3],l),h>y[1]?(c=y[0],h=y[1]):h===y[1]&&(c=m(c,y[0])),p<y[3]?(d=y[2],p=y[3]):p===y[3]&&(d=m(d,y[2]))),i=_,r=T}const b=this.#e;b[0]=l[0]-this.#i,b[1]=l[1]-this.#i,b[2]=l[2]-l[0]+2*this.#i,b[3]=l[3]-l[1]+2*this.#i,this.firstPoint=[c,h],this.lastPoint=[d,p]}get box(){return this.#e}newOutliner(t,e,i,r,l,c=0){return new js(t,e,i,r,l,c)}getNewOutline(t,e){const[i,r,l,c]=this.#e,[h,d,p,m]=this.#t,y=l*p,b=c*m,A=i*p+h,S=r*m+d,_=this.newOutliner({x:this.#r[0]*y+A,y:this.#r[1]*b+S},this.#t,this.#s,t,this.#n,e??this.#i);for(let T=2;T<this.#r.length;T+=2)_.add({x:this.#r[T]*y+A,y:this.#r[T+1]*b+S});return _.getOutlines()}}class Rd{#t;#e;#i;#n=[];#r=[];constructor(t,e=0,i=0,r=!0){const l=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:_,y:T,width:E,height:x}of t){const C=Math.floor((_-e)/c)*c,L=Math.ceil((_+E+e)/c)*c,O=Math.floor((T-e)/c)*c,P=Math.ceil((T+x+e)/c)*c,z=[C,O,P,!0],$=[L,O,P,!1];this.#n.push(z,$),ft.rectBoundingBox(C,O,L,P,l)}const h=l[2]-l[0]+2*i,d=l[3]-l[1]+2*i,p=l[0]-i,m=l[1]-i;let y=r?-1/0:1/0,b=1/0;const A=this.#n.at(r?-1:-2),S=[A[0],A[2]];for(const _ of this.#n){const[T,E,x,C]=_;!C&&r?E<b?(b=E,y=T):E===b&&(y=Math.max(y,T)):C&&!r&&(E<b?(b=E,y=T):E===b&&(y=Math.min(y,T))),_[0]=(T-p)/h,_[1]=(E-m)/d,_[2]=(x-m)/d}this.#t=new Float32Array([p,m,h,d]),this.#e=[y,b],this.#i=S}getOutlines(){this.#n.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#s(t)}#s(t){const e=[],i=new Set;for(const c of t){const[h,d,p]=c;e.push([h,d,c],[h,p,c])}e.sort((c,h)=>c[1]-h[1]||c[0]-h[0]);for(let c=0,h=e.length;c<h;c+=2){const d=e[c][2],p=e[c+1][2];d.push(p),p.push(d),i.add(d),i.add(p)}const r=[];let l;for(;i.size>0;){const c=i.values().next().value;let[h,d,p,m,y]=c;i.delete(c);let b=h,A=d;for(l=[h,p],r.push(l);;){let S;if(i.has(m))S=m;else if(i.has(y))S=y;else break;i.delete(S),[h,d,p,m,y]=S,b!==h&&(l.push(b,A,h,A===d?d:p),b=h),A=A===d?p:d}l.push(b,A)}return new _C(r,this.#t,this.#e,this.#i)}#a(t){const e=this.#r;let i=0,r=e.length-1;for(;i<=r;){const l=i+r>>1,c=e[l][0];if(c===t)return l;c<t?i=l+1:r=l-1}return r+1}#o([,t,e]){const i=this.#a(t);this.#r.splice(i,0,[t,e])}#c([,t,e]){const i=this.#a(t);for(let r=i;r<this.#r.length;r++){const[l,c]=this.#r[r];if(l!==t)break;if(l===t&&c===e){this.#r.splice(r,1);return}}for(let r=i-1;r>=0;r--){const[l,c]=this.#r[r];if(l!==t)break;if(l===t&&c===e){this.#r.splice(r,1);return}}}#l(t){const[e,i,r]=t,l=[[e,i,r]],c=this.#a(r);for(let h=0;h<c;h++){const[d,p]=this.#r[h];for(let m=0,y=l.length;m<y;m++){const[,b,A]=l[m];if(!(p<=b||A<=d)){if(b>=d){if(A>p)l[m][1]=p;else{if(y===1)return[];l.splice(m,1),m--,y--}continue}l[m][2]=d,A>p&&l.push([e,p,A])}}}return l}}class _C extends dt{#t;#e;constructor(t,e,i,r){super(),this.#e=t,this.#t=e,this.firstPoint=i,this.lastPoint=r}toSVGPath(){const t=[];for(const e of this.#e){let[i,r]=e;t.push(`M${i} ${r}`);for(let l=2;l<e.length;l+=2){const c=e[l],h=e[l+1];c===i?(t.push(`V${h}`),r=h):h===r&&(t.push(`H${c}`),i=c)}t.push("Z")}return t.join(" ")}serialize([t,e,i,r],l){const c=[],h=i-t,d=r-e;for(const p of this.#e){const m=new Array(p.length);for(let y=0;y<p.length;y+=2)m[y]=t+p[y]*h,m[y+1]=r-p[y+1]*d;c.push(m)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class kd extends js{newFreeDrawOutline(t,e,i,r,l,c){return new SC(t,e,i,r,l,c)}}class SC extends a0{newOutliner(t,e,i,r,l,c=0){return new kd(t,e,i,r,l,c)}}class xe extends wt{#t=null;#e=0;#i;#n=null;#r=null;#s=null;#a=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#p=null;#u="";#g;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Mt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=xe.prototype;return zt(this,"_keyboardManager",new To([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||xe._defaultColor,this.#g=t.thickness||xe._defaultThickness,this.opacity=t.opacity||xe._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#S()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Rd(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new Rd(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:r}=this.#s;this.#m=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;const r=1.5;if(this.#s=t.getNewOutline(this.#g/2+r,.0025),e>=0)this.#d=e,this.#n=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:xe.#E(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:xe.#E(this.#s.box,y),path:{d:this.#s.toSVGPath()}})}const[l,c,h,d]=t.box;switch(this.rotation){case 0:this.x=l,this.y=c,this.width=h,this.height=d;break;case 90:{const[y,b]=this.parentDimensions;this.x=c,this.y=1-l,this.width=h*b/y,this.height=d*y/b;break}case 180:this.x=1-l,this.y=1-c,this.width=h,this.height=d;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-c,this.y=l,this.width=h*b/y,this.height=d*y/b;break}}const{firstPoint:p}=t;this.#f=[(p[0]-l)/h,(p[1]-c)/d];const{lastPoint:m}=this.#s;this.#m=[(m[0]-l)/h,(m[1]-c)/d]}static initialize(t,e){wt.initialize(t,e),xe._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Ht.HIGHLIGHT_COLOR:xe._defaultColor=e;break;case Ht.HIGHLIGHT_THICKNESS:xe._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Ht.HIGHLIGHT_COLOR:this.#T(e);break;case Ht.HIGHLIGHT_THICKNESS:this.#w(e);break}}static get defaultPropertiesToUpdate(){return[[Ht.HIGHLIGHT_COLOR,xe._defaultColor],[Ht.HIGHLIGHT_THICKNESS,xe._defaultThickness]]}get propertiesToUpdate(){return[[Ht.HIGHLIGHT_COLOR,this.color||xe._defaultColor],[Ht.HIGHLIGHT_THICKNESS,this.#g||xe._defaultThickness],[Ht.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#T(t){const e=(l,c)=>{this.color=l,this.opacity=c,this.onUpdatedColor()},i=this.color,r=this.opacity;this.addCommands({cmd:e.bind(this,t,xe._defaultOpacity),undo:e.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ht.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#w(t){const e=this.#g,i=r=>{this.#g=r,this.#A(r)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ht.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new Rn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#C():t&&(this.#S(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#A(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#S(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#E([t,e,i,r],l){switch(l){case 90:return[1-e-r,t,r,i];case 180:return[1-t-i,1-e-r,i,r];case 270:return[e,1-t-i,r,i]}return[t,e,i,r]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#h?(t=(t-this.rotation+360)%360,i=xe.#E(this.#l.box,t)):i=xe.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:xe.#E(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#R.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(this.width,this.height),Lv(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#R(t){xe._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#D(!0);break;case 1:case 3:this.#D(!1);break}}#D(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#D(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#P(){if(this.#h)return null;const[t,e]=this.pageDimensions,[i,r]=this.pageTranslation,l=this.#i,c=new Float32Array(l.length*8);let h=0;for(const{x:d,y:p,width:m,height:y}of l){const b=d*t+i,A=(1-p)*e+r;c[h]=c[h+4]=b,c[h+1]=c[h+3]=A,c[h+2]=c[h+6]=b+m*t,c[h+5]=c[h+7]=A-y*e,h+=8}return c}#O(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,e,{target:i,x:r,y:l}){const{x:c,y:h,width:d,height:p}=i.getBoundingClientRect(),m=new AbortController,y=t.combinedSignal(m),b=A=>{m.abort(),this.#F(t,A)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",be,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",Ln,{signal:y}),i.addEventListener("pointermove",this.#N.bind(this,t),{signal:y}),this._freeHighlight=new kd({x:r,y:l},[c,h,d,p],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#N(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let r=null;if(t instanceof n0){const{data:{quadPoints:S,rect:_,rotation:T,id:E,color:x,opacity:C,popupRef:L,richText:O,contentsObj:P,creationDate:z,modificationDate:$},parent:{page:{pageNumber:Y}}}=t;r=t={annotationType:Mt.HIGHLIGHT,color:Array.from(x),opacity:C,quadPoints:S,boxes:null,pageIndex:Y-1,rect:_.slice(0),rotation:T,annotationElementId:E,id:E,deleted:!1,popupRef:L,richText:O,comment:P?.str||null,creationDate:z,modificationDate:$}}else if(t instanceof ff){const{data:{inkLists:S,rect:_,rotation:T,id:E,color:x,borderStyle:{rawWidth:C},popupRef:L,richText:O,contentsObj:P,creationDate:z,modificationDate:$},parent:{page:{pageNumber:Y}}}=t;r=t={annotationType:Mt.HIGHLIGHT,color:Array.from(x),thickness:C,inkLists:S,boxes:null,pageIndex:Y-1,rect:_.slice(0),rotation:T,annotationElementId:E,id:E,deleted:!1,popupRef:L,richText:O,comment:P?.str||null,creationDate:z,modificationDate:$}}const{color:l,quadPoints:c,inkLists:h,opacity:d}=t,p=await super.deserialize(t,e,i);p.color=ft.makeHexColor(...l),p.opacity=d||1,h&&(p.#g=t.thickness),p._initialData=r,t.comment&&p.setCommentData(t);const[m,y]=p.pageDimensions,[b,A]=p.pageTranslation;if(c){const S=p.#i=[];for(let _=0;_<c.length;_+=8)S.push({x:(c[_]-b)/m,y:1-(c[_+1]-A)/y,width:(c[_+2]-c[_])/m,height:(c[_+1]-c[_+5])/y});p.#v(),p.#S(),p.rotate(p.rotation)}else if(h){p.#h=!0;const S=h[0],_={x:S[0]-b,y:y-(S[1]-A)},T=new kd(_,[0,0,m,y],1,p.#g/2,!0,.001);for(let C=0,L=S.length;C<L;C+=2)_.x=S[C]-b,_.y=y-(S[C+1]-A),T.add(_);const{id:E,clipPathId:x}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);p.#b({highlightOutlines:T.getOutlines(),highlightId:E,clipPathId:x}),p.#S(),p.rotate(p.parentRotation)}return p}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=wt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:e,opacity:this.opacity,thickness:this.#g,quadPoints:this.#P(),outlines:this.#O(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#z(i)?null:(i.id=this.annotationElementId,i)}#z(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,r)=>i!==e[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class r0{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){re("Not implemented")}}class Tt extends wt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static#s=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,e){const{id:i}=e.drawLayer.draw(Tt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[r,l]of Object.entries(e))i.has(r)?Object.assign(t[r],l):t[r]=l;return t}static getDefaultDrawingOptions(t){re("Not implemented")}static get typesMap(){re("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(Tt.#i.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)t.push([i,e[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,r]of this.constructor.typesMap)t.push([i,e[r]]);return t}_updateProperty(t,e,i){const r=this._drawingOptions,l=r[e],c=h=>{r.updateProperty(e,h);const d=this.#t.updateProperty(e,h);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,i),undo:c.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Tt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#g()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Tt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#g()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#g()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Tt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#g()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#m([t,e,i,r]){const{parentDimensions:[l,c],rotation:h}=this;switch(h){case 90:return[e,1-t,i*(c/l),r*(l/c)];case 180:return[1-t,1-e,i,r];case 270:return[1-e,t,i*(c/l),r*(l/c)];default:return[t,e,i,r]}}#p(){const{x:t,y:e,width:i,height:r,parentDimensions:[l,c],rotation:h}=this;switch(h){case 90:return[1-e,t,i*(l/c),r*(c/l)];case 180:return[1-t,1-e,i,r];case 270:return[e,1-t,i*(l/c),r*(c/l)];default:return[t,e,i,r]}}#u(t){[this.x,this.y,this.width,this.height]=this.#m(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#g(){const{x:t,y:e,width:i,height:r,rotation:l,parentRotation:c,parentDimensions:[h,d]}=this;switch((l*4+c)/90){case 1:return[1-e-r,t,r,i];case 2:return[1-t-i,1-e-r,i,r];case 3:return[e,1-t-i,r,i];case 4:return[t,e-i*(h/d),r*(d/h),i*(h/d)];case 5:return[1-e,t,i*(h/d),r*(d/h)];case 6:return[1-t-r*(d/h),1-e,r*(d/h),i*(h/d)];case 7:return[e-i*(h/d),1-t-r*(d/h),i*(h/d),r*(d/h)];case 8:return[t-i,e-r,i,r];case 9:return[1-e,t-i,r,i];case 10:return[1-t,1-e,i,r];case 11:return[e-r,1-t,r,i];case 12:return[t-r*(d/h),e,r*(d/h),i*(h/d)];case 13:return[1-e-i*(h/d),t-r*(d/h),i*(h/d),r*(d/h)];case 14:return[1-t,1-e-i*(h/d),r*(d/h),i*(h/d)];case 15:return[e,1-t,i*(h/d),r*(d/h)];default:return[t,e,i,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Tt._mergeSVGProperties({bbox:this.#g()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");return i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,r,l){re("Not implemented")}static startDrawing(t,e,i,r){const{target:l,offsetX:c,offsetY:h,pointerId:d,pointerType:p}=r;if(Tt.#a&&Tt.#a!==p)return;const{viewport:{rotation:m}}=t,{width:y,height:b}=l.getBoundingClientRect(),A=Tt.#n=new AbortController,S=t.combinedSignal(A);if(Tt.#s||=d,Tt.#a??=p,window.addEventListener("pointerup",_=>{Tt.#s===_.pointerId?this._endDraw(_):Tt.#o?.delete(_.pointerId)},{signal:S}),window.addEventListener("pointercancel",_=>{Tt.#s===_.pointerId?this._currentParent.endDrawingSession():Tt.#o?.delete(_.pointerId)},{signal:S}),window.addEventListener("pointerdown",_=>{Tt.#a===_.pointerType&&((Tt.#o||=new Set).add(_.pointerId),Tt.#i.isCancellable()&&(Tt.#i.removeLastElement(),Tt.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",Ln,{signal:S}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),l.addEventListener("touchmove",_=>{_.timeStamp===Tt.#c&&be(_)},{signal:S}),t.toggleDrawing(),e._editorUndoBar?.hide(),Tt.#i){t.drawLayer.updateProperties(this._currentDrawId,Tt.#i.startNew(c,h,y,b,m));return}e.updateUIForDefaultProperties(this),Tt.#i=this.createDrawerInstance(c,h,y,b,m),Tt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Tt.#r.toSVGProperties(),Tt.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Tt.#c=-1,!Tt.#i)return;const{offsetX:e,offsetY:i,pointerId:r}=t;if(Tt.#s===r){if(Tt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Tt.#i.add(e,i)),Tt.#c=t.timeStamp,be(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Tt.#i=null,Tt.#r=null,Tt.#a=null,Tt.#c=NaN),Tt.#n&&(Tt.#n.abort(),Tt.#n=null,Tt.#s=NaN,Tt.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,Tt.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=Tt.#i,r=this._currentDrawId,l=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(r,i.setLastElement(l))},undo:()=>{e.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:Ht.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Ht.DRAW_STEP),!Tt.#i.isEmpty()){const{pageDimensions:[i,r],scale:l}=e,c=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Tt.#i.getOutlines(i*l,r*l,l,this._INNER_MARGIN),drawingOptions:Tt.#r,mustBeCommitted:!t});return this._cleanup(!0),c}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,r,l,c){re("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:r,pageHeight:l,pageX:c,pageY:h}}=e.viewport,d=this.deserializeDraw(c,h,r,l,this._INNER_MARGIN,t),p=await super.deserialize(t,e,i);return p.createDrawingOptions(t),p.#l({drawOutlines:d}),p.#f(),p.onScaleChanging(),p.rotate(),p}serializeDraw(t){const[e,i]=this.pageTranslation,[r,l]=this.pageDimensions;return this.#t.serialize([e,i,r,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class wC{#t=new Float64Array(6);#e;#i;#n;#r;#s;#a="";#o=0;#c=new Do;#l;#d;constructor(t,e,i,r,l,c){this.#l=i,this.#d=r,this.#n=l,this.#r=c,[t,e]=this.#h(t,e);const h=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#i=[{line:h,points:this.#s}],this.#t.set(h,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return dt._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#h(t,e);const[i,r,l,c]=this.#t.subarray(2,6),h=t-l,d=e-c;return Math.hypot(this.#l*h,this.#d*d)<=2?null:(this.#s.push(t,e),isNaN(i)?(this.#t.set([l,c,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,r,l,c,t,e],0),this.#e.push(...dt.createBezierPoints(i,r,l,c,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,r,l){this.#l=i,this.#d=r,this.#n=l,[t,e]=this.#h(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const h=this.#i.at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),this.#i.push({line:c,points:this.#s}),this.#t.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#a="";for(let t=0,e=this.#i.length;t<e;t++){const{line:i,points:r}=this.#i[t];this.#e=i,this.#s=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=dt.svgRound(this.#e[4]),e=dt.svgRound(this.#e[5]);if(this.#s.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#s.length<=6){const r=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,r)} M ${t} ${e}`,this.#o=6}if(this.#s.length===4){const r=dt.svgRound(this.#e[10]),l=dt.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${r} ${l}`,this.#o=12,this.#a}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let r=this.#o,l=this.#e.length;r<l;r+=6){const[c,h,d,p,m,y]=this.#e.slice(r,r+6).map(dt.svgRound);i.push(`C${c} ${h} ${d} ${p} ${m} ${y}`)}return this.#a+=i.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,i,r){const l=this.#i.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#c.build(this.#i,t,e,i,this.#n,this.#r,r),this.#t=null,this.#e=null,this.#i=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Do extends dt{#t;#e=0;#i;#n;#r;#s;#a;#o;#c;build(t,e,i,r,l,c,h){this.#r=e,this.#s=i,this.#a=r,this.#o=l,this.#c=c,this.#i=h??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${dt.svgRound(e[4])} ${dt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${dt.svgRound(e[10])} ${dt.svgRound(e[11])}`);continue}for(let i=6,r=e.length;i<r;i+=6){const[l,c,h,d,p,m]=e.subarray(i,i+6).map(dt.svgRound);t.push(`C${l} ${c} ${h} ${d} ${p} ${m}`)}}return t.join("")}serialize([t,e,i,r],l){const c=[],h=[],[d,p,m,y]=this.#d();let b,A,S,_,T,E,x,C,L;switch(this.#o){case 0:L=dt._rescale,b=t,A=e+r,S=i,_=-r,T=t+d*i,E=e+(1-p-y)*r,x=t+(d+m)*i,C=e+(1-p)*r;break;case 90:L=dt._rescaleAndSwap,b=t,A=e,S=i,_=r,T=t+p*i,E=e+d*r,x=t+(p+y)*i,C=e+(d+m)*r;break;case 180:L=dt._rescale,b=t+i,A=e,S=-i,_=r,T=t+(1-d-m)*i,E=e+p*r,x=t+(1-d)*i,C=e+(p+y)*r;break;case 270:L=dt._rescaleAndSwap,b=t+i,A=e+r,S=-i,_=-r,T=t+(1-p-y)*i,E=e+(1-d-m)*r,x=t+(1-p)*i,C=e+(1-d)*r;break}for(const{line:O,points:P}of this.#n)c.push(L(O,b,A,S,_,l?new Array(O.length):null)),h.push(L(P,b,A,S,_,l?new Array(P.length):null));return{lines:c,points:h,rect:[T,E,x,C]}}static deserialize(t,e,i,r,l,{paths:{lines:c,points:h},rotation:d,thickness:p}){const m=[];let y,b,A,S,_;switch(d){case 0:_=dt._rescale,y=-t/i,b=e/r+1,A=1/i,S=-1/r;break;case 90:_=dt._rescaleAndSwap,y=-e/r,b=-t/i,A=1/r,S=1/i;break;case 180:_=dt._rescale,y=t/i+1,b=-e/r,A=-1/i,S=1/r;break;case 270:_=dt._rescaleAndSwap,y=e/r+1,b=t/i+1,A=-1/r,S=-1/i;break}if(!c){c=[];for(const E of h){const x=E.length;if(x===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(x===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const C=new Float32Array(3*(x-2));c.push(C);let[L,O,P,z]=E.subarray(0,4);C.set([NaN,NaN,NaN,NaN,L,O],0);for(let $=4;$<x;$+=2){const Y=E[$],et=E[$+1];C.set(dt.createBezierPoints(L,O,P,z,Y,et),($-2)*3),[L,O,P,z]=[P,z,Y,et]}}}for(let E=0,x=c.length;E<x;E++)m.push({line:_(c[E].map(C=>C??NaN),y,b,A,S),points:_(h[E].map(C=>C??NaN),y,b,A,S)});const T=new this.prototype.constructor;return T.build(m,i,r,1,d,p,l),T}#l(t=this.#c){const e=this.#i+t/2*this.#a;return this.#o%180===0?[e/this.#r,e/this.#s]:[e/this.#s,e/this.#r]}#d(){const[t,e,i,r]=this.#t,[l,c]=this.#l(0);return[t+l,e+c,i-2*l,r-2*c]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#n){if(r.length<=12){for(let h=4,d=r.length;h<d;h+=6)ft.pointBoundingBox(r[h],r[h+1],t);continue}let l=r[4],c=r[5];for(let h=6,d=r.length;h<d;h+=6){const[p,m,y,b,A,S]=r.subarray(h,h+6);ft.bezierBoundingBox(l,c,p,m,y,b,A,S,t),l=A,c=S}}const[e,i]=this.#l();t[0]=sn(t[0]-e,0,1),t[1]=sn(t[1]-i,0,1),t[2]=sn(t[2]+e,0,1),t[3]=sn(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#l();this.#c=t;const[r,l]=this.#l(),[c,h]=[r-e,l-i],d=this.#t;return d[0]-=c,d[1]-=h,d[2]+=2*c,d[3]+=2*h,d}updateParentDimensions([t,e],i){const[r,l]=this.#l();this.#r=t,this.#s=e,this.#a=i;const[c,h]=this.#l(),d=c-r,p=h-l,m=this.#t;return m[0]-=d,m[1]-=p,m[2]+=2*d,m[3]+=2*p,m}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(dt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${dt.svgRound(t)} ${dt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,r=0,l=0,c=0,h=0,d=0;switch(this.#e){case 90:r=e/t,l=-t/e,h=t;break;case 180:i=-1,c=-1,h=t,d=e;break;case 270:r=-e/t,l=t/e,d=e;break;default:return""}return`matrix(${i} ${r} ${l} ${c} ${dt.svgRound(h)} ${dt.svgRound(d)})`}getPathResizingSVGProperties([t,e,i,r]){const[l,c]=this.#l(),[h,d,p,m]=this.#t;if(Math.abs(p-l)<=dt.PRECISION||Math.abs(m-c)<=dt.PRECISION){const _=t+i/2-(h+p/2),T=e+r/2-(d+m/2);return{path:{"transform-origin":`${dt.svgRound(t)} ${dt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${_} ${T})`}}}const y=(i-2*l)/(p-2*l),b=(r-2*c)/(m-2*c),A=p/i,S=m/r;return{path:{"transform-origin":`${dt.svgRound(h)} ${dt.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${S}) translate(${dt.svgRound(l)} ${dt.svgRound(c)}) scale(${y} ${b}) translate(${dt.svgRound(-l)} ${dt.svgRound(-c)})`}}}getPathResizedSVGProperties([t,e,i,r]){const[l,c]=this.#l(),h=this.#t,[d,p,m,y]=h;if(h[0]=t,h[1]=e,h[2]=i,h[3]=r,Math.abs(m-l)<=dt.PRECISION||Math.abs(y-c)<=dt.PRECISION){const T=t+i/2-(d+m/2),E=e+r/2-(p+y/2);for(const{line:x,points:C}of this.#n)dt._translate(x,T,E,x),dt._translate(C,T,E,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${dt.svgRound(t)} ${dt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(i-2*l)/(m-2*l),A=(r-2*c)/(y-2*c),S=-b*(d+l)+t+l,_=-A*(p+c)+e+c;if(b!==1||A!==1||S!==0||_!==0)for(const{line:T,points:E}of this.#n)dt._rescale(T,S,_,b,A,T),dt._rescale(E,S,_,b,A,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${dt.svgRound(t)} ${dt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[r,l]=i,c=this.#t,h=t-c[0],d=e-c[1];if(this.#r===r&&this.#s===l)for(const{line:p,points:m}of this.#n)dt._translate(p,h,d,p),dt._translate(m,h,d,m);else{const p=this.#r/r,m=this.#s/l;this.#r=r,this.#s=l;for(const{line:y,points:b}of this.#n)dt._rescale(y,h,d,p,m,y),dt._rescale(b,h,d,p,m,b);c[2]*=p,c[3]*=m}return c[0]=t,c[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${dt.svgRound(t)} ${dt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${dt.svgRound(t[0])} ${dt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Oc extends r0{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:wt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Oc(this._viewParameters);return t.updateAll(this),t}}class gf extends Tt{static _type="ink";static _editorType=Mt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){wt.initialize(t,e),this._defaultDrawingOptions=new Oc(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return zt(this,"typesMap",new Map([[Ht.INK_THICKNESS,"stroke-width"],[Ht.INK_COLOR,"stroke"],[Ht.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,r,l){return new wC(t,e,i,r,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,r,l,c){return Do.deserialize(t,e,i,r,l,c)}static async deserialize(t,e,i){let r=null;if(t instanceof ff){const{data:{inkLists:c,rect:h,rotation:d,id:p,color:m,opacity:y,borderStyle:{rawWidth:b},popupRef:A,richText:S,contentsObj:_,creationDate:T,modificationDate:E},parent:{page:{pageNumber:x}}}=t;r=t={annotationType:Mt.INK,color:Array.from(m),thickness:b,opacity:y,paths:{points:c},boxes:null,pageIndex:x-1,rect:h.slice(0),rotation:d,annotationElementId:p,id:p,deleted:!1,popupRef:A,richText:S,comment:_?.str||null,creationDate:T,modificationDate:E}}const l=await super.deserialize(t,e,i);return l._initialData=r,t.comment&&l.setCommentData(t),l}get toolbarButtons(){return this._colorPicker||=new mo(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ht.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=gf.getDefaultDrawingOptions({stroke:ft.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":l,"stroke-width":c}}=this,h=Object.assign(super.serialize(t),{color:wt._colorManager.convert(r),opacity:l,thickness:c,paths:{lines:e,points:i}});return this.addComment(h),t?(h.isCopy=!0,h):this.annotationElementId&&!this.#t(h)?null:(h.id=this.annotationElementId,h)}#t(t){const{color:e,thickness:i,opacity:r,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,h)=>c!==e[h])||t.thickness!==i||t.opacity!==r||t.pageIndex!==l}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class Od extends Do{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const rc=8,eo=3;class Us{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,r){return i-=t,r-=e,i===0?r>0?0:4:i===1?r+6:2-r}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,i,r,l,c,h){const d=this.#e(i,r,l,c);for(let p=0;p<8;p++){const m=(-p+d-h+16)%8,y=this.#i[2*m],b=this.#i[2*m+1];if(t[(i+y)*e+(r+b)]!==0)return m}return-1}static#r(t,e,i,r,l,c,h){const d=this.#e(i,r,l,c);for(let p=0;p<8;p++){const m=(p+d+h+16)%8,y=this.#i[2*m],b=this.#i[2*m+1];if(t[(i+y)*e+(r+b)]!==0)return m}return-1}static#s(t,e,i,r){const l=t.length,c=new Int32Array(l);for(let m=0;m<l;m++)c[m]=t[m]<=r?1:0;for(let m=1;m<i-1;m++)c[m*e]=c[m*e+e-1]=0;for(let m=0;m<e;m++)c[m]=c[e*i-1-m]=0;let h=1,d;const p=[];for(let m=1;m<i-1;m++){d=1;for(let y=1;y<e-1;y++){const b=m*e+y,A=c[b];if(A===0)continue;let S=m,_=y;if(A===1&&c[b-1]===0)h+=1,_-=1;else if(A>=1&&c[b+1]===0)h+=1,_+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const T=[y,m],E=_===y+1,x={isHole:E,points:T,id:h,parent:0};p.push(x);let C;for(const J of p)if(J.id===d){C=J;break}C?C.isHole?x.parent=E?C.parent:d:x.parent=E?d:C.parent:x.parent=E?d:0;const L=this.#n(c,e,m,y,S,_,0);if(L===-1){c[b]=-h,c[b]!==1&&(d=Math.abs(c[b]));continue}let O=this.#i[2*L],P=this.#i[2*L+1];const z=m+O,$=y+P;S=z,_=$;let Y=m,et=y;for(;;){const J=this.#r(c,e,Y,et,S,_,1);O=this.#i[2*J],P=this.#i[2*J+1];const at=Y+O,ot=et+P;T.push(ot,at);const rt=Y*e+et;if(c[rt+1]===0?c[rt]=-h:c[rt]===1&&(c[rt]=h),at===m&&ot===y&&Y===z&&et===$){c[b]!==1&&(d=Math.abs(c[b]));break}else S=Y,_=et,Y=at,et=ot}}}return p}static#a(t,e,i,r){if(i-e<=4){for(let z=e;z<i-2;z+=2)r.push(t[z],t[z+1]);return}const l=t[e],c=t[e+1],h=t[i-4]-l,d=t[i-3]-c,p=Math.hypot(h,d),m=h/p,y=d/p,b=m*c-y*l,A=d/h,S=1/p,_=Math.atan(A),T=Math.cos(_),E=Math.sin(_),x=S*(Math.abs(T)+Math.abs(E)),C=S*(1-x+x**2),L=Math.max(Math.atan(Math.abs(E+T)*C),Math.atan(Math.abs(E-T)*C));let O=0,P=e;for(let z=e+2;z<i-2;z+=2){const $=Math.abs(b-m*t[z+1]+y*t[z]);$>O&&(P=z,O=$)}O>(p*L)**2?(this.#a(t,e,P+2,r),this.#a(t,P,i,r)):r.push(l,c)}static#o(t){const e=[],i=t.length;return this.#a(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#c(t,e,i,r,l,c){const h=new Float32Array(c**2),d=-2*r**2,p=c>>1;for(let _=0;_<c;_++){const T=(_-p)**2;for(let E=0;E<c;E++)h[_*c+E]=Math.exp((T+(E-p)**2)/d)}const m=new Float32Array(256),y=-2*l**2;for(let _=0;_<256;_++)m[_]=Math.exp(_**2/y);const b=t.length,A=new Uint8Array(b),S=new Uint32Array(256);for(let _=0;_<i;_++)for(let T=0;T<e;T++){const E=_*e+T,x=t[E];let C=0,L=0;for(let P=0;P<c;P++){const z=_+P-p;if(!(z<0||z>=i))for(let $=0;$<c;$++){const Y=T+$-p;if(Y<0||Y>=e)continue;const et=t[z*e+Y],J=h[P*c+$]*m[Math.abs(et-x)];C+=et*J,L+=J}}const O=A[E]=Math.round(C/L);S[O]++}return[A,S]}static#l(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let r=-1/0,l=1/0;for(let h=0,d=i.length;h<d;h++){const p=i[h]=t[h<<2];r=Math.max(r,p),l=Math.min(l,p)}const c=255/(r-l);for(let h=0,d=i.length;h<d;h++)i[h]=(i[h]-l)*c;return i}static#h(t){let e,i=-1/0,r=-1/0;const l=t.findIndex(d=>d!==0);let c=l,h=l;for(e=l;e<256;e++){const d=t[e];d>i&&(e-c>r&&(r=e-c,h=e-1),i=d,c=e)}for(e=h-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:r}=t,{maxDim:l}=this.#t;let c=i,h=r;if(i>l||r>l){let b=i,A=r,S=Math.log2(Math.max(i,r)/l);const _=Math.floor(S);S=S===_?_-1:_;for(let E=0;E<S;E++){c=Math.ceil(b/2),h=Math.ceil(A/2);const x=new OffscreenCanvas(c,h);x.getContext("2d").drawImage(t,0,0,b,A,0,0,c,h),b=c,A=h,t!==e&&t.close(),t=x.transferToImageBitmap()}const T=Math.min(l/c,l/h);c=Math.round(c*T),h=Math.round(h*T)}const p=new OffscreenCanvas(c,h).getContext("2d",{willReadFrequently:!0});p.fillStyle="white",p.fillRect(0,0,c,h),p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,c,h);const m=p.getImageData(0,0,c,h).data;return[this.#d(m),c,h]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:r},l,c,h,d){let p=new OffscreenCanvas(1,1),m=p.getContext("2d",{alpha:!1});const y=200,b=m.font=`${i} ${r} ${y}px ${e}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:S,actualBoundingBoxAscent:_,actualBoundingBoxDescent:T,fontBoundingBoxAscent:E,fontBoundingBoxDescent:x,width:C}=m.measureText(t),L=1.5,O=Math.ceil(Math.max(Math.abs(A)+Math.abs(S)||0,C)*L),P=Math.ceil(Math.max(Math.abs(_)+Math.abs(T)||y,Math.abs(E)+Math.abs(x)||y)*L);p=new OffscreenCanvas(O,P),m=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=b,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,O,P),m.fillStyle="black",m.fillText(t,O*(L-1)/2,P*(3-L)/2);const z=this.#d(m.getImageData(0,0,O,P).data),$=this.#l(z),Y=this.#h($),et=this.#s(z,O,P,Y);return this.processDrawnLines({lines:{curves:et,width:O,height:P},pageWidth:l,pageHeight:c,rotation:h,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,i,r,l){const[c,h,d]=this.#f(t),[p,m]=this.#c(c,h,d,Math.hypot(h,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(m),b=this.#s(p,h,d,y);return this.processDrawnLines({lines:{curves:b,width:h,height:d},pageWidth:e,pageHeight:i,rotation:r,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:r,innerMargin:l,mustSmooth:c,areContours:h}){r%180!==0&&([e,i]=[i,e]);const{curves:d,width:p,height:m}=t,y=t.thickness??0,b=[],A=Math.min(e/p,i/m),S=A/e,_=A/i,T=[];for(const{points:x}of d){const C=c?this.#o(x):x;if(!C)continue;T.push(C);const L=C.length,O=new Float32Array(L),P=new Float32Array(3*(L===2?2:L-2));if(b.push({line:P,points:O}),L===2){O[0]=C[0]*S,O[1]=C[1]*_,P.set([NaN,NaN,NaN,NaN,O[0],O[1]],0);continue}let[z,$,Y,et]=C;z*=S,$*=_,Y*=S,et*=_,O.set([z,$,Y,et],0),P.set([NaN,NaN,NaN,NaN,z,$],0);for(let J=4;J<L;J+=2){const at=O[J]=C[J]*S,ot=O[J+1]=C[J+1]*_;P.set(dt.createBezierPoints(z,$,Y,et,at,ot),(J-2)*3),[z,$,Y,et]=[Y,et,at,ot]}}if(b.length===0)return null;const E=h?new Od:new Do;return E.build(b,e,i,1,r,h?0:y,l),{outline:E,newCurves:T,areContours:h,thickness:y,width:p,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:r,height:l}){let c=1/0,h=-1/0,d=0;for(const C of t){d+=C.length;for(let L=2,O=C.length;L<O;L++){const P=C[L]-C[L-2];c=Math.min(c,P),h=Math.max(h,P)}}let p;c>=-128&&h<=127?p=Int8Array:c>=-32768&&h<=32767?p=Int16Array:p=Int32Array;const m=t.length,y=rc+eo*m,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*m)*p.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=r,b[A++]=l,b[A++]=e?0:1,b[A++]=Math.max(0,Math.floor(i??0)),b[A++]=m,b[A++]=p.BYTES_PER_ELEMENT;for(const C of t)b[A++]=C.length-2,b[A++]=C[0],b[A++]=C[1];const S=new CompressionStream("deflate-raw"),_=S.writable.getWriter();await _.ready,_.write(b);const T=p.prototype.constructor;for(const C of t){const L=new T(C.length-2);for(let O=2,P=C.length;O<P;O++)L[O-2]=C[O]-C[O-2];_.write(L)}_.close();const E=await new Response(S.readable).arrayBuffer(),x=new Uint8Array(E);return xv(x)}static async decompressSignature(t){try{const e=YT(t),{readable:i,writable:r}=new DecompressionStream("deflate-raw"),l=r.getWriter();await l.ready,l.write(e).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let c=null,h=0;for await(const C of i)c||=new Uint8Array(new Uint32Array(C.buffer,0,4)[0]),c.set(C,h),h+=C.length;const d=new Uint32Array(c.buffer,0,c.length>>2),p=d[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const m=d[2],y=d[3],b=d[4]===0,A=d[5],S=d[6],_=d[7],T=[],E=(rc+eo*S)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(_){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(c.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(c.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(c.buffer,E);break}h=0;for(let C=0;C<S;C++){const L=d[eo*C+rc],O=new Float32Array(L+2);T.push(O);for(let P=0;P<eo-1;P++)O[P]=d[eo*C+rc+P+1];for(let P=0;P<L;P++)O[P+2]=O[P]+x[h++]}return{areContours:b,thickness:A,outlines:T,width:m,height:y}}catch(e){return Rt(`decompressSignature: ${e}`),null}}}class mf extends r0{constructor(){super(),super.updateProperties({fill:wt._defaultLineColor,"stroke-width":0})}clone(){const t=new mf;return t.updateAll(this),t}}class yf extends Oc{constructor(t){super(t),super.updateProperties({stroke:wt._defaultLineColor,"stroke-width":1})}clone(){const t=new yf(this._viewParameters);return t.updateAll(this),t}}class pi extends Tt{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=Mt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){wt.initialize(t,e),this._defaultDrawingOptions=new mf,this._defaultDrawnSignatureOptions=new yf(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return zt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:r,mustSmooth:l,areContours:c,description:h,uuid:d,heightInPage:p}=this.#i,{rawDims:{pageWidth:m,pageHeight:y},rotation:b}=this.parent.viewport,A=Us.processDrawnLines({lines:r,pageWidth:m,pageHeight:y,rotation:b,innerMargin:pi._INNER_MARGIN,mustSmooth:l,areContours:c});this.addSignature(A,p,h,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:r,height:l}=this.#i,c=Math.max(r,l),h=Us.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:i,width:r,height:l},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,r){const{x:l,y:c}=this,{outline:h}=this.#i=t;this.#t=h instanceof Od,this.description=i;let d;this.#t?d=pi.getDefaultDrawingOptions():(d=pi._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:d});const[,p]=this.pageDimensions;let m=e/p;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(),this.x=l,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:r}=this.parent.viewport;return Us.process(t,e,i,r,pi._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:r},rotation:l}=this.parent.viewport;return Us.extractContoursFromText(t,e,i,r,l,pi._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:r}=this.parent.viewport;return Us.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:r,innerMargin:pi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=pi.getDefaultDrawingOptions():(this._drawingOptions=pi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,l=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(l),t?(l.paths={lines:e,points:i},l.uuid=this.#n,l.isCopy=!0):l.lines=e,this.#e&&(l.accessibilityData={type:"Figure",alt:this.#e}),l}static deserializeDraw(t,e,i,r,l,c){return c.areContours?Od.deserialize(t,e,i,r,l,c):Do.deserialize(t,e,i,r,l,c)}static async deserialize(t,e,i){const r=await super.deserialize(t,e,i);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#n=t.uuid,r}}class EC extends wt{#t=null;#e=null;#i=null;#n=null;#r=null;#s="";#a=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=Mt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){wt.initialize(t,e)}static isHandlingMimeForPasting(t){return mc.includes(t)}static paste(t,e){e.pasteEditor({mode:Mt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:l,height:c}=t||this.copyCanvas(null,null,!0).imageData,h=await i.guess({name:"altText",request:{data:r,width:l,height:c,channels:r.length/(l*c)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const d=h.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#h(i,!0)).finally(()=>this.#f());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#r){const i=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=mc.join(",");const e=this._uiManager._signal;this.#i=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,r&&(this.#t=r),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},t)}#p(){const{div:t}=this;let{width:e,height:i}=this.#t;const[r,l]=this.pageDimensions,c=.75;if(this.width)e=this.width*r,i=this.height*l;else if(e>c*r||i>c*l){const d=Math.min(c*r/e,c*l/i);e*=d,i*=d}this._uiManager.enableWaiting(!1);const h=this.#a=document.createElement("canvas");h.setAttribute("role","img"),this.addContainer(h),this.width=e/r,this.height=i/l,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:r,height:l}=this.#t,c=new ei;let h=this.#t,d=r,p=l,m=null;if(e){if(r>e||l>e){const P=Math.min(e/r,e/l);d=Math.floor(r*P),p=Math.floor(l*P)}m=document.createElement("canvas");const b=m.width=Math.ceil(d*c.sx),A=m.height=Math.ceil(p*c.sy);this.#l||(h=this.#u(b,A));const S=m.getContext("2d");S.filter=this._uiManager.hcmFilter;let _="white",T="#cfcfd8";this._uiManager.hcmFilter!=="none"?T="black":WT.isDarkMode&&(_="#8f8f9d",T="#42414d");const E=15,x=E*c.sx,C=E*c.sy,L=new OffscreenCanvas(x*2,C*2),O=L.getContext("2d");O.fillStyle=_,O.fillRect(0,0,x*2,C*2),O.fillStyle=T,O.fillRect(0,0,x,C),O.fillRect(x,C,x,C),S.fillStyle=S.createPattern(L,"repeat"),S.fillRect(0,0,b,A),S.drawImage(h,0,0,h.width,h.height,0,0,b,A)}let y=null;if(i){let b,A;if(c.symmetric&&h.width<t&&h.height<t)b=h.width,A=h.height;else if(h=this.#t,r>t||l>t){const T=Math.min(t/r,t/l);b=Math.floor(r*T),A=Math.floor(l*T),this.#l||(h=this.#u(b,A))}const _=new OffscreenCanvas(b,A).getContext("2d",{willReadFrequently:!0});_.drawImage(h,0,0,h.width,h.height,0,0,b,A),y={width:b,height:A,data:_.getImageData(0,0,b,A).data}}return{canvas:m,width:d,height:p,imageData:y}}#u(t,e){const{width:i,height:r}=this.#t;let l=i,c=r,h=this.#t;for(;l>2*t||c>2*e;){const d=l,p=c;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const m=new OffscreenCanvas(l,c);m.getContext("2d").drawImage(h,0,0,d,p,0,0,l,c),h=m.transferToImageBitmap()}return h}#g(){const[t,e]=this.parentDimensions,{width:i,height:r}=this,l=new ei,c=Math.ceil(i*t*l.sx),h=Math.ceil(r*e*l.sy),d=this.#a;if(!d||d.width===c&&d.height===h)return;d.width=c,d.height=h;const p=this.#l?this.#t:this.#u(c,h),m=d.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(p,0,0,p.width,p.height,0,0,c,h)}#y(t){if(t){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,r=Math.round(this.width*e*Xs.PDF_TO_CSS_UNITS),l=Math.round(this.height*i*Xs.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(r,l);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,l),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let r=null,l=!1;if(t instanceof i0){const{data:{rect:_,rotation:T,id:E,structParent:x,popupRef:C,richText:L,contentsObj:O,creationDate:P,modificationDate:z},container:$,parent:{page:{pageNumber:Y}},canvas:et}=t;let J,at;et?(delete t.canvas,{id:J,bitmap:at}=i.imageManager.getFromCanvas($.id,et),et.remove()):(l=!0,t._hasNoCanvas=!0);const ot=(await e._structTree.getAriaAttributes(`${Jd}${E}`))?.get("aria-label")||"";r=t={annotationType:Mt.STAMP,bitmapId:J,bitmap:at,pageIndex:Y-1,rect:_.slice(0),rotation:T,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:ot},isSvg:!1,structParent:x,popupRef:C,richText:L,comment:O?.str||null,creationDate:P,modificationDate:z}}const c=await super.deserialize(t,e,i),{rect:h,bitmap:d,bitmapUrl:p,bitmapId:m,isSvg:y,accessibilityData:b}=t;l?(i.addMissingCanvas(t.id,c),c.#o=!0):m&&i.imageManager.isValidId(m)?(c.#e=m,d&&(c.#t=d)):c.#n=p,c.#l=y;const[A,S]=c.pageDimensions;return c.width=(h[2]-h[0])/A,c.height=(h[3]-h[1])/S,b&&(c.altTextData=b),c._initialData=r,t.comment&&c.setCommentData(t),c.#d=!!r,c}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(i),t)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:l}=this.serializeAltText(!1);if(!r&&l&&(i.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const h=this.#v(i);return h.isSame?null:(h.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(e===null)return i;e.stamps||=new Map;const c=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:c,serialized:i}),i.bitmap=this.#y(!1);else if(this.#l){const h=e.stamps.get(this.#e);c>h.area&&(h.area=c,h.serialized.bitmap.close(),h.serialized.bitmap=this.#y(!1))}return i}#v(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,r=t.pageIndex===e,l=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&l,isSameAltText:l}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class yi{#t;#e=!1;#i=null;#n=null;#r=null;#s=new Map;#a=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#p=-1;#u;static _initialized=!1;static#g=new Map([Ie,gf,EC,xe,pi].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:r,accessibilityManager:l,annotationLayer:c,drawLayer:h,textLayer:d,viewport:p,l10n:m}){const y=[...yi.#g.values()];if(!yi._initialized){yi._initialized=!0;for(const b of y)b.initialize(m,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=e,this.div=i,this.#t=l,this.#i=c,this.viewport=p,this.#h=d,this.drawLayer=h,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Mt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case Mt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Mt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Mt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Mt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of yi.#g.values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}get#y(){return this.#s.size!==0?this.#s.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const i of this.#y)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=this.#i;if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const i=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",r=>{const{clientX:c,clientY:h,timeStamp:d}=r,p=this.#p;if(d-p>500){this.#p=d;return}this.#p=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const y=document.elementsFromPoint(c,h);if(m.toggle("getElements",!1),!this.div.contains(y[0]))return;let b;const A=new RegExp(`^${ho}[0-9]+$`);for(const _ of y)if(A.test(_.id)){b=_.id;break}if(!b)return;const S=this.#s.get(b);S?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),S.dblclick(r))},{signal:i,capture:!0})}const t=this.#i;if(t){const i=new Map,r=new Map;for(const c of this.#y){if(c.disableEditing(),!c.annotationElementId){c.updateFakeAnnotationElement(t);continue}if(c.serialize()!==null){i.set(c.annotationElementId,c);continue}else r.set(c.annotationElementId,c);this.getEditableAnnotation(c.annotationElementId)?.show(),c.remove()}const l=t.getEditableAnnotations();for(const c of l){const{id:h}=c.data;if(this.#u.isDeletedAnnotationElement(h)){c.updateEdited({deleted:!0});continue}let d=r.get(h);if(d){d.resetAnnotationElement(c),d.show(!1),c.show();continue}d=i.get(h),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(c)&&d.show(!1)),c.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const i of yi.#g.values())e.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:i}=He.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),xe.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),wt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of this.#s.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#b(){return yi.#g.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#T(t){const e=this.#b;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:i,offsetY:r}=this.#w(),l=this.getNextId(),c=this.#T({parent:this,id:l,x:i,y:r,uiManager:this.#u,isCentered:!0,...e});c&&this.add(c)}async deserialize(t){return await yi.#g.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,i={}){const r=this.getNextId(),l=this.#T({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...i});return l&&this.add(l),l}get boundingClientRect(){return this.div.getBoundingClientRect()}#w(){const{x:t,y:e,width:i,height:r}=this.boundingClientRect,l=Math.max(0,t),c=Math.max(0,e),h=Math.min(window.innerWidth,t+i),d=Math.min(window.innerHeight,e+r),p=(l+h)/2-t,m=(c+d)/2-e,[y,b]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#w(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=He.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#u.getMode();if(i===Mt.STAMP||i===Mt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===Mt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=He.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const i=this.#u.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,e,i){const r=this.#u.findParent(e,i);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,bs(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,bs(this.div,{rotation:i}),e!==i)for(const r of this.#s.values())r.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class je{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return zt(this,"_svgFactory",new yo)}static#r(t,[e,i,r,l]){const{style:c}=t;c.top=`${100*i}%`,c.left=`${100*e}%`,c.width=`${100*r}%`,c.height=`${100*l}%`}#s(){const t=je._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const i=je._svgFactory.createElement("clipPath");t.append(i);const r=`clip_${e}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const l=je._svgFactory.createElement("use");return i.append(l),l.setAttribute("href",`#${e}`),l.classList.add("clip"),r}#o(t,e){for(const[i,r]of Object.entries(e))r===null?t.removeAttribute(i):t.setAttribute(i,r)}draw(t,e=!1,i=!1){const r=je.#n++,l=this.#s(),c=je._svgFactory.createElement("defs");l.append(c);const h=je._svgFactory.createElement("path");c.append(h);const d=`path_p${this.pageIndex}_${r}`;h.setAttribute("id",d),h.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(r,h);const p=i?this.#a(c,d):null,m=je._svgFactory.createElement("use");return l.append(m),m.setAttribute("href",`#${d}`),this.updateProperties(l,t),this.#e.set(r,l),{id:r,clipPathId:`url(#${p})`}}drawOutline(t,e){const i=je.#n++,r=this.#s(),l=je._svgFactory.createElement("defs");r.append(l);const c=je._svgFactory.createElement("path");l.append(c);const h=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",h),c.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const y=je._svgFactory.createElement("mask");l.append(y),d=`mask_p${this.pageIndex}_${i}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const b=je._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=je._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${h}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const p=je._svgFactory.createElement("use");r.append(p),p.setAttribute("href",`#${h}`),d&&p.setAttribute("mask",`url(#${d})`);const m=p.cloneNode();return r.append(m),p.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(i,r),i}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:r,rootClass:l,path:c}=e,h=typeof t=="number"?this.#e.get(t):t;if(h){if(i&&this.#o(h,i),r&&je.#r(h,r),l){const{classList:d}=h;for(const[p,m]of Object.entries(l))d.toggle(p,m)}if(c){const p=h.firstChild.firstChild;this.#o(p,c)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Rd};globalThis.pdfjsLib={AbortException:Vi,AnnotationEditorLayer:yi,AnnotationEditorParamsType:Ht,AnnotationEditorType:Mt,AnnotationEditorUIManager:Gi,AnnotationLayer:pf,AnnotationMode:bi,AnnotationType:Te,applyOpacity:kv,build:Qv,ColorPicker:Rn,createValidAbsoluteUrl:Kd,CSSConstants:Rv,DOMSVGFactory:yo,DrawLayer:je,FeatureTest:He,fetchData:nr,findContrastColor:Ov,getDocument:cf,getFilenameFromUrl:Cv,getPdfFilenameFromUrl:Dv,getRGB:ir,getUuid:Qd,getXfaPageViewport:Mv,GlobalWorkerOptions:ys,ImageKind:oo,InvalidPDFException:pc,isDataScheme:Eo,isPdfFile:Rc,isValidExplicitDest:Bv,MathClamp:sn,noContextMenu:Ln,normalizeUnicode:Tv,OPS:Ja,OutputScale:ei,PasswordResponses:wv,PDFDataRangeTransport:hf,PDFDateString:gc,PDFWorker:tr,PermissionFlag:Sv,PixelsPerInch:Xs,RenderingCancelledException:Mc,renderRichText:ef,ResponseException:fo,setLayerDimensions:bs,shadow:zt,SignatureExtractor:Us,stopEvent:be,SupportedImageMimeTypes:mc,TextLayer:go,TouchManager:xo,updateUrlHash:Wd,Util:ft,VerbosityLevel:_o,version:Wv,XfaLayer:tf};const TC=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Vi,AnnotationEditorLayer:yi,AnnotationEditorParamsType:Ht,AnnotationEditorType:Mt,AnnotationEditorUIManager:Gi,AnnotationLayer:pf,AnnotationMode:bi,AnnotationType:Te,CSSConstants:Rv,ColorPicker:Rn,DOMSVGFactory:yo,DrawLayer:je,FeatureTest:He,GlobalWorkerOptions:ys,ImageKind:oo,InvalidPDFException:pc,MathClamp:sn,OPS:Ja,OutputScale:ei,PDFDataRangeTransport:hf,PDFDateString:gc,PDFWorker:tr,PasswordResponses:wv,PermissionFlag:Sv,PixelsPerInch:Xs,RenderingCancelledException:Mc,ResponseException:fo,SignatureExtractor:Us,SupportedImageMimeTypes:mc,TextLayer:go,TouchManager:xo,Util:ft,VerbosityLevel:_o,XfaLayer:tf,applyOpacity:kv,build:Qv,createValidAbsoluteUrl:Kd,fetchData:nr,findContrastColor:Ov,getDocument:cf,getFilenameFromUrl:Cv,getPdfFilenameFromUrl:Dv,getRGB:ir,getUuid:Qd,getXfaPageViewport:Mv,isDataScheme:Eo,isPdfFile:Rc,isValidExplicitDest:Bv,noContextMenu:Ln,normalizeUnicode:Tv,renderRichText:ef,setLayerDimensions:bs,shadow:zt,stopEvent:be,updateUrlHash:Wd,version:Wv},Symbol.toStringTag,{value:"Module"}));function o0(a){var t,e,i="";if(typeof a=="string"||typeof a=="number")i+=a;else if(typeof a=="object")if(Array.isArray(a)){var r=a.length;for(t=0;t<r;t++)a[t]&&(e=o0(a[t]))&&(i&&(i+=" "),i+=e)}else for(e in a)a[e]&&(i&&(i+=" "),i+=e);return i}function Lc(){for(var a,t,e=0,i="",r=arguments.length;e<r;e++)(a=arguments[e])&&(t=o0(a))&&(i&&(i+=" "),i+=t);return i}var Ob=Object.prototype.hasOwnProperty;function Lb(a,t,e){for(e of a.keys())if(Ka(e,t))return e}function Ka(a,t){var e,i,r;if(a===t)return!0;if(a&&t&&(e=a.constructor)===t.constructor){if(e===Date)return a.getTime()===t.getTime();if(e===RegExp)return a.toString()===t.toString();if(e===Array){if((i=a.length)===t.length)for(;i--&&Ka(a[i],t[i]););return i===-1}if(e===Set){if(a.size!==t.size)return!1;for(i of a)if(r=i,r&&typeof r=="object"&&(r=Lb(t,r),!r)||!t.has(r))return!1;return!0}if(e===Map){if(a.size!==t.size)return!1;for(i of a)if(r=i[0],r&&typeof r=="object"&&(r=Lb(t,r),!r)||!Ka(i[1],t.get(r)))return!1;return!0}if(e===ArrayBuffer)a=new Uint8Array(a),t=new Uint8Array(t);else if(e===DataView){if((i=a.byteLength)===t.byteLength)for(;i--&&a.getInt8(i)===t.getInt8(i););return i===-1}if(ArrayBuffer.isView(a)){if((i=a.byteLength)===t.byteLength)for(;i--&&a[i]===t[i];);return i===-1}if(!e||typeof a=="object"){i=0;for(e in a)if(Ob.call(a,e)&&++i&&!Ob.call(t,e)||!(e in t)||!Ka(a[e],t[e]))return!1;return Object.keys(t).length===i}}return a!==a&&t!==t}function Mo(a){let t=!1;return{promise:new Promise((i,r)=>{a.then(l=>!t&&i(l)).catch(l=>!t&&r(l))}),cancel(){t=!0}}}const xC=["onCopy","onCut","onPaste"],CC=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],DC=["onFocus","onBlur"],MC=["onInput","onInvalid","onReset","onSubmit"],RC=["onLoad","onError"],kC=["onKeyDown","onKeyPress","onKeyUp"],OC=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],LC=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],NC=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],zC=["onSelect"],BC=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],PC=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],FC=["onScroll"],UC=["onWheel"],IC=["onAnimationStart","onAnimationEnd","onAnimationIteration"],jC=["onTransitionEnd"],HC=["onToggle"],VC=["onChange"],GC=[...xC,...CC,...DC,...MC,...RC,...kC,...OC,...LC,...NC,...zC,...BC,...PC,...FC,...UC,...IC,...jC,...VC,...HC];function l0(a,t){const e={};for(const i of GC){const r=a[i];r&&(t?e[i]=(l=>r(l,t(i))):e[i]=r)}return e}var qC="Invariant failed";function ae(a,t){if(!a)throw new Error(qC)}var gd,Nb;function $C(){if(Nb)return gd;Nb=1;var a=function(){};return gd=a,gd}var XC=$C();const an=jb(XC),c0=ut.createContext(null),YC="noopener noreferrer nofollow";class ZC{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return ae(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){ae(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,i){t.href=e,t.rel=this.externalLinkRel||YC,t.target=i?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{ae(this.pdfDocument),ae(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{ae(Array.isArray(e));const i=e[0];new Promise(r=>{ae(this.pdfDocument),i instanceof Object?this.pdfDocument.getPageIndex(i).then(l=>{r(l)}).catch(()=>{ae(!1)}):typeof i=="number"?r(i):ae(!1)}).then(r=>{const l=r+1;ae(this.pdfViewer),ae(l>=1&&l<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:r,pageNumber:l})})})}goToPage(t){const e=t-1;ae(this.pdfViewer),ae(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function Wa({children:a,type:t}){return V.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:a})}const zb={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function KC(a,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return a}}function er(){return ut.useReducer(KC,{value:void 0,error:void 0})}const Nc=typeof window<"u",u0=Nc&&window.location.protocol==="file:";function WC(a){return typeof a<"u"}function Fs(a){return WC(a)&&a!==null}function QC(a){return typeof a=="string"}function JC(a){return a instanceof ArrayBuffer}function tD(a){return ae(Nc),a instanceof Blob}function Ld(a){return QC(a)&&/^data:/.test(a)}function Bb(a){ae(Ld(a));const[t="",e=""]=a.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function eD(){return Nc&&window.devicePixelRatio||1}const h0="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Pb(){an(!u0,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${h0}`)}function nD(){an(!u0,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${h0}`)}function Zs(a){a?.cancel&&a.cancel()}function Nd(a,t){return Object.defineProperty(a,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(a,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(a,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(a,"originalHeight",{get(){return this.view[3]},configurable:!0}),a}function iD(a){return a.name==="RenderingCancelledException"}function sD(a){return new Promise((t,e)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return e(new Error("Error while reading a file."));t(i.result)},i.onerror=r=>{if(!r.target)return e(new Error("Error while reading a file."));const{error:l}=r.target;if(!l)return e(new Error("Error while reading a file."));switch(l.code){case l.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case l.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case l.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},i.readAsArrayBuffer(a)})}const{PDFDataRangeTransport:aD}=TC,rD=(a,t)=>{switch(t){case zb.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");a(e);break}case zb.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");a(e);break}}};function Fb(a){return typeof a=="object"&&a!==null&&("data"in a||"range"in a||"url"in a)}const oD=ut.forwardRef(function({children:t,className:e,error:i="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:l,file:c,inputRef:h,imageResourcesPath:d,loading:p="Loading PDF",noData:m="No PDF file specified.",onItemClick:y,onLoadError:b,onLoadProgress:A,onLoadSuccess:S,onPassword:_=rD,onSourceError:T,onSourceSuccess:E,options:x,renderMode:C,rotate:L,scale:O,...P},z){const[$,Y]=er(),{value:et,error:J}=$,[at,ot]=er(),{value:rt,error:ht}=at,k=ut.useRef(new ZC),j=ut.useRef([]),nt=ut.useRef(void 0),vt=ut.useRef(void 0);c&&c!==nt.current&&Fb(c)&&(an(!Ka(c,nt.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),nt.current=c),x&&x!==vt.current&&(an(!Ka(x,vt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),vt.current=x);const xt=ut.useRef({scrollPageIntoView:Ut=>{const{dest:Vt,pageNumber:oe,pageIndex:he=oe-1}=Ut;if(y){y({dest:Vt,pageIndex:he,pageNumber:oe});return}const ni=j.current[he];if(ni){ni.scrollIntoView();return}an(!1,`An internal link leading to page ${oe} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});ut.useImperativeHandle(z,()=>({linkService:k,pages:j,viewer:xt}),[]);function R(){E&&E()}function q(){J&&(an(!1,J.toString()),T&&T(J))}function Q(){Y({type:"RESET"})}ut.useEffect(Q,[c,Y]);const lt=ut.useCallback(async()=>{if(!c)return null;if(typeof c=="string")return Ld(c)?{data:Bb(c)}:(Pb(),{url:c});if(c instanceof aD)return{range:c};if(JC(c))return{data:c};if(Nc&&tD(c))return{data:await sD(c)};if(ae(typeof c=="object"),ae(Fb(c)),"url"in c&&typeof c.url=="string"){if(Ld(c.url)){const{url:Ut,...Vt}=c;return{data:Bb(Ut),...Vt}}Pb()}return c},[c]);ut.useEffect(()=>{const Ut=Mo(lt());return Ut.promise.then(Vt=>{Y({type:"RESOLVE",value:Vt})}).catch(Vt=>{Y({type:"REJECT",error:Vt})}),()=>{Zs(Ut)}},[lt,Y]),ut.useEffect(()=>{if(!(typeof et>"u")){if(et===!1){q();return}R()}},[et]);function bt(){rt&&(S&&S(rt),j.current=new Array(rt.numPages),k.current.setDocument(rt))}function _t(){ht&&(an(!1,ht.toString()),b&&b(ht))}ut.useEffect(function(){ot({type:"RESET"})},[ot,et]),ut.useEffect(function(){if(!et)return;const Vt=x?{...et,...x}:et,oe=cf(Vt);A&&(oe.onProgress=A),_&&(oe.onPassword=_);const he=oe,ni=he.promise.then(Ai=>{ot({type:"RESOLVE",value:Ai})}).catch(Ai=>{he.destroyed||ot({type:"REJECT",error:Ai})});return()=>{ni.finally(()=>he.destroy())}},[x,ot,et]),ut.useEffect(()=>{if(!(typeof rt>"u")){if(rt===!1){_t();return}bt()}},[rt]),ut.useEffect(function(){k.current.setViewer(xt.current),k.current.setExternalLinkRel(r),k.current.setExternalLinkTarget(l)},[r,l]);const mt=ut.useCallback((Ut,Vt)=>{j.current[Ut]=Vt},[]),Kt=ut.useCallback(Ut=>{delete j.current[Ut]},[]),Ot=ut.useMemo(()=>({imageResourcesPath:d,linkService:k.current,onItemClick:y,pdf:rt,registerPage:mt,renderMode:C,rotate:L,scale:O,unregisterPage:Kt}),[d,y,rt,mt,C,L,O,Kt]),$t=ut.useMemo(()=>l0(P,()=>rt),[P,rt]);function Je(){function Ut(oe){return!!oe?.pdf}if(!Ut(Ot))throw new Error("pdf is undefined");const Vt=typeof t=="function"?t(Ot):t;return V.jsx(c0.Provider,{value:Ot,children:Vt})}function tn(){return c?rt==null?V.jsx(Wa,{type:"loading",children:typeof p=="function"?p():p}):rt===!1?V.jsx(Wa,{type:"error",children:typeof i=="function"?i():i}):Je():V.jsx(Wa,{type:"no-data",children:typeof m=="function"?m():m})}return V.jsx("div",{className:Lc("react-pdf__Document",e),ref:h,...$t,children:tn()})});function d0(){return ut.useContext(c0)}function f0(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];var e=a.filter(Boolean);if(e.length<=1){var i=e[0];return i||null}return function(l){for(var c=0,h=e;c<h.length;c++){var d=h[c];typeof d=="function"?d(l):d&&(d.current=l)}}}const p0=ut.createContext(null);function zc(){return ut.useContext(p0)}function lD(){const a=d0(),t=zc();ae(t);const e={...a,...t},{imageResourcesPath:i,linkService:r,onGetAnnotationsError:l,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:d,page:p,pdf:m,renderForms:y,rotate:b,scale:A=1}=e;ae(m),ae(p),ae(r);const[S,_]=er(),{value:T,error:E}=S,x=ut.useRef(null);an(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){T&&c&&c(T)}function L(){E&&(an(!1,E.toString()),l&&l(E))}ut.useEffect(function(){_({type:"RESET"})},[_,p]),ut.useEffect(function(){if(!p)return;const Y=Mo(p.getAnnotations()),et=Y;return Y.promise.then(J=>{_({type:"RESOLVE",value:J})}).catch(J=>{_({type:"REJECT",error:J})}),()=>{Zs(et)}},[_,p]),ut.useEffect(()=>{if(T!==void 0){if(T===!1){L();return}C()}},[T]);function O(){d&&d()}function P($){an(!1,`${$}`),h&&h($)}const z=ut.useMemo(()=>p.getViewport({scale:A,rotation:b}),[p,b,A]);return ut.useEffect(function(){if(!m||!p||!r||!T)return;const{current:Y}=x;if(!Y)return;const et=z.clone({dontFlip:!0}),J={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:m.annotationStorage,commentManager:null,div:Y,l10n:null,linkService:r,page:p,structTreeLayer:null,viewport:et},at={annotations:T,annotationStorage:m.annotationStorage,div:Y,imageResourcesPath:i,linkService:r,page:p,renderForms:y,viewport:et};Y.innerHTML="";try{new pf(J).render(at),O()}catch(ot){P(ot)}return()=>{}},[T,i,r,p,m,y,z]),V.jsx("div",{className:Lc("react-pdf__Page__annotations","annotationLayer"),ref:x})}const g0={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},cD=/^H(\d+)$/;function uD(a){return a in g0}function Bc(a){return"children"in a}function m0(a){return Bc(a)?a.children.length===1&&0 in a.children&&"id"in a.children[0]:!1}function hD(a){const t={};if(Bc(a)){const{role:e}=a,i=e.match(cD);if(i)t.role="heading",t["aria-level"]=Number(i[1]);else if(uD(e)){const r=g0[e];r&&(t.role=r)}}return t}function y0(a){const t={};if(Bc(a)){if(a.alt!==void 0&&(t["aria-label"]=a.alt),a.lang!==void 0&&(t.lang=a.lang),m0(a)){const[e]=a.children;if(e){const i=y0(e);return{...t,...i}}}}else"id"in a&&(t["aria-owns"]=a.id);return t}function dD(a){return a?{...hD(a),...y0(a)}:null}function b0({className:a,node:t}){const e=ut.useMemo(()=>dD(t),[t]),i=ut.useMemo(()=>!Bc(t)||m0(t)?null:t.children.map((r,l)=>V.jsx(b0,{node:r},l)),[t]);return V.jsx("span",{className:a,...e,children:i})}function fD(){const a=zc();ae(a);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=a,[i,r]=er(),{value:l,error:c}=i,{customTextRenderer:h,page:d}=a;function p(){l&&e&&e(l)}function m(){c&&(an(!1,c.toString()),t&&t(c))}return ut.useEffect(function(){r({type:"RESET"})},[r,d]),ut.useEffect(function(){if(h||!d)return;const b=Mo(d.getStructTree()),A=b;return b.promise.then(S=>{r({type:"RESOLVE",value:S})}).catch(S=>{r({type:"REJECT",error:S})}),()=>Zs(A)},[h,d,r]),ut.useEffect(()=>{if(l!==void 0){if(l===!1){m();return}p()}},[l]),l?V.jsx(b0,{className:"react-pdf__Page__structTree structTree",node:l}):null}const Ub=bi;function pD(a){const t=zc();ae(t);const e={...t,...a},{_className:i,canvasBackground:r,devicePixelRatio:l=eD(),onRenderError:c,onRenderSuccess:h,page:d,renderForms:p,renderTextLayer:m,rotate:y,scale:b}=e,{canvasRef:A}=a;ae(d);const S=ut.useRef(null);function _(){d&&h&&h(Nd(d,b))}function T(L){iD(L)||(an(!1,L.toString()),c&&c(L))}const E=ut.useMemo(()=>d.getViewport({scale:b*l,rotation:y}),[l,d,y,b]),x=ut.useMemo(()=>d.getViewport({scale:b,rotation:y}),[d,y,b]);ut.useEffect(function(){if(!d)return;d.cleanup();const{current:O}=S;if(!O)return;O.width=E.width,O.height=E.height,O.style.width=`${Math.floor(x.width)}px`,O.style.height=`${Math.floor(x.height)}px`,O.style.visibility="hidden";const P={annotationMode:p?Ub.ENABLE_FORMS:Ub.ENABLE,canvas:O,canvasContext:O.getContext("2d",{alpha:!1}),viewport:E};r&&(P.background=r);const z=d.render(P),$=z;return z.promise.then(()=>{O.style.visibility="",_()}).catch(T),()=>Zs($)},[r,d,p,E,x]);const C=ut.useCallback(()=>{const{current:L}=S;L&&(L.width=0,L.height=0)},[]);return ut.useEffect(()=>C,[C]),V.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:f0(A,S),style:{display:"block",userSelect:"none"},children:m?V.jsx(fD,{}):null})}function gD(a){return"str"in a}function mD(){const a=zc();ae(a);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:i,onRenderTextLayerError:r,onRenderTextLayerSuccess:l,page:c,pageIndex:h,pageNumber:d,rotate:p,scale:m}=a;ae(c);const[y,b]=er(),{value:A,error:S}=y,_=ut.useRef(null);an(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function T(){A&&i&&i(A)}function E(){S&&(an(!1,S.toString()),e&&e(S))}ut.useEffect(function(){b({type:"RESET"})},[c,b]),ut.useEffect(function(){if(!c)return;const $=Mo(c.getTextContent()),Y=$;return $.promise.then(et=>{b({type:"RESOLVE",value:et})}).catch(et=>{b({type:"REJECT",error:et})}),()=>Zs(Y)},[c,b]),ut.useEffect(()=>{if(A!==void 0){if(A===!1){E();return}T()}},[A]);const x=ut.useCallback(()=>{l&&l()},[l]),C=ut.useCallback(z=>{an(!1,z.toString()),r&&r(z)},[r]);function L(){const z=_.current;z&&z.classList.add("selecting")}function O(){const z=_.current;z&&z.classList.remove("selecting")}const P=ut.useMemo(()=>c.getViewport({scale:m,rotation:p}),[c,p,m]);return ut.useLayoutEffect(function(){if(!c||!A)return;const{current:$}=_;if(!$)return;$.innerHTML="";const Y=c.streamTextContent({includeMarkedContent:!0}),et={container:$,textContentSource:Y,viewport:P},J=new go(et),at=J;return J.render().then(()=>{const ot=document.createElement("div");ot.className="endOfContent",$.append(ot);const rt=$.querySelectorAll('[role="presentation"]');if(t){let ht=0;A.items.forEach((k,j)=>{if(!gD(k))return;const nt=rt[ht];if(!nt)return;const vt=t({pageIndex:h,pageNumber:d,itemIndex:j,...k});nt.innerHTML=vt,ht+=k.str&&k.hasEOL?2:1})}x()}).catch(C),()=>Zs(at)},[t,C,x,c,h,d,A,P]),V.jsx("div",{className:Lc("react-pdf__Page__textContent","textLayer"),onMouseUp:O,onMouseDown:L,ref:_})}const Ib=1;function yD(a){const e={...d0(),...a},{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:l,canvasRef:c,children:h,className:d,customRenderer:p,customTextRenderer:m,devicePixelRatio:y,error:b="Failed to load the page.",height:A,inputRef:S,loading:_="Loading page",noData:T="No page specified.",onGetAnnotationsError:E,onGetAnnotationsSuccess:x,onGetStructTreeError:C,onGetStructTreeSuccess:L,onGetTextError:O,onGetTextSuccess:P,onLoadError:z,onLoadSuccess:$,onRenderAnnotationLayerError:Y,onRenderAnnotationLayerSuccess:et,onRenderError:J,onRenderSuccess:at,onRenderTextLayerError:ot,onRenderTextLayerSuccess:rt,pageIndex:ht,pageNumber:k,pdf:j,registerPage:nt,renderAnnotationLayer:vt=!0,renderForms:xt=!1,renderMode:R="canvas",renderTextLayer:q=!0,rotate:Q,scale:lt=Ib,unregisterPage:bt,width:_t,...mt}=e,[Kt,Ot]=er(),{value:$t,error:Je}=Kt,tn=ut.useRef(null);ae(j);const Ut=Fs(k)?k-1:ht??null,Vt=k??(Fs(ht)?ht+1:null),oe=Q??($t?$t.rotate:null),he=ut.useMemo(()=>{if(!$t)return null;let Lt=1;const Bt=lt??Ib;if(_t||A){const me=$t.getViewport({scale:1,rotation:oe});_t?Lt=_t/me.width:A&&(Lt=A/me.height)}return Bt*Lt},[A,$t,oe,lt,_t]);ut.useEffect(function(){return()=>{Fs(Ut)&&r&&bt&&bt(Ut)}},[r,j,Ut,bt]);function ni(){if($){if(!$t||!he)return;$(Nd($t,he))}if(r&&nt){if(!Fs(Ut)||!tn.current)return;nt(Ut,tn.current)}}function Ai(){Je&&(an(!1,Je.toString()),z&&z(Je))}ut.useEffect(function(){Ot({type:"RESET"})},[Ot,j,Ut]),ut.useEffect(function(){if(!j||!Vt)return;const Bt=Mo(j.getPage(Vt)),me=Bt;return Bt.promise.then(Yn=>{Ot({type:"RESOLVE",value:Yn})}).catch(Yn=>{Ot({type:"REJECT",error:Yn})}),()=>Zs(me)},[Ot,j,Vt]),ut.useEffect(()=>{if($t!==void 0){if($t===!1){Ai();return}ni()}},[$t,he]);const ii=ut.useMemo(()=>Fs(Ut)&&Vt&&Fs(oe)&&Fs(he)?{_className:i,canvasBackground:l,customTextRenderer:m,devicePixelRatio:y,onGetAnnotationsError:E,onGetAnnotationsSuccess:x,onGetStructTreeError:C,onGetStructTreeSuccess:L,onGetTextError:O,onGetTextSuccess:P,onRenderAnnotationLayerError:Y,onRenderAnnotationLayerSuccess:et,onRenderError:J,onRenderSuccess:at,onRenderTextLayerError:ot,onRenderTextLayerSuccess:rt,page:$t,pageIndex:Ut,pageNumber:Vt,renderForms:xt,renderTextLayer:q,rotate:oe,scale:he}:null,[i,l,m,y,E,x,C,L,O,P,Y,et,J,at,ot,rt,$t,Ut,Vt,xt,q,oe,he]),M=ut.useMemo(()=>l0(mt,()=>$t&&(he?Nd($t,he):void 0)),[mt,$t,he]),F=`${Ut}@${he}/${oe}`;function X(){switch(R){case"custom":return ae(p),V.jsx(p,{},`${F}_custom`);case"none":return null;case"canvas":default:return V.jsx(pD,{canvasRef:c},`${F}_canvas`)}}function ct(){return q?V.jsx(mD,{},`${F}_text`):null}function it(){return vt?V.jsx(lD,{},`${F}_annotations`):null}function st(){function Lt(me){return!!me?.page}if(!Lt(ii))throw new Error("page is undefined");const Bt=typeof h=="function"?h(ii):h;return V.jsxs(p0.Provider,{value:ii,children:[X(),ct(),it(),Bt]})}function At(){return Vt?j===null||$t===void 0||$t===null?V.jsx(Wa,{type:"loading",children:typeof _=="function"?_():_}):j===!1||$t===!1?V.jsx(Wa,{type:"error",children:typeof b=="function"?b():b}):st():V.jsx(Wa,{type:"no-data",children:typeof T=="function"?T():T})}return V.jsx("div",{className:Lc(i,d),"data-page-number":Vt,ref:f0(S,tn),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${he}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:l||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...M,children:At()})}nD();ys.workerSrc="pdf.worker.mjs";ys.workerSrc=new URL("/christian-lester-website-v3/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();const v0="/christian-lester-website-v3/files/resume.pdf",bD=8.5/11,vD=700,AD=()=>{const a=document.createElement("a");a.href=v0,a.download="resume.pdf",document.body.appendChild(a),a.click(),document.body.removeChild(a)};function _D(){const[a,t]=ut.useState(700),e=ut.useRef(null);return ut.useEffect(()=>{const i=()=>{if(e.current){const{clientWidth:r,clientHeight:l}=e.current,c=Math.min(r,l*bD,vD);t(c)}};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),V.jsx("div",{className:"w-full flex justify-center",children:V.jsxs("div",{className:"flex flex-col w-full max-w-[800px]",ref:e,children:[V.jsx("button",{onClick:AD,className:"px-4 py-1 border rounded-xl text-(--color-text-inverted) bg-(--color-accent) w-1/2 mx-auto hover:bg-(--color-accent-hover) transition-all duration-150 ease-in-out cursor-pointer mb-4",children:"Download"}),V.jsx("div",{className:"h-[70vh] overflow-y-auto flex justify-center",children:V.jsx(oD,{file:v0,className:"react-pdf-document border-2 border-(--color-border)",children:V.jsx(yD,{width:a,pageNumber:1,renderTextLayer:!1,renderAnnotationLayer:!1,className:"react-pdf-page"})})})]})})}function md(a){return V.jsxs("div",{className:"flex flex-row border border-(--color-border) bg-(--color-badge) sm:px-2 sm:py-2 p-1 rounded-lg w-24 md:w-32 items-center gap-2 text-xs sm:text-sm hover:border-(--color-accent) transition-all duration-150 ease-in-out",children:[V.jsx("img",{src:a.skillSrc,alt:"skill logo",className:"rounded w-6 sm:w-8"}),V.jsx("span",{children:a.skillName})]})}function SD(){const a=Object.values(rd).filter(i=>"type"in i&&i.type==="frontend"),t=Object.values(rd).filter(i=>"type"in i&&i.type==="backend"),e=Object.values(rd).filter(i=>"type"in i&&i.type==="lang");return V.jsxs("div",{className:"flex flex-col m-auto gap-8 mb-8",children:[V.jsxs("div",{className:"bg-(--color-card) p-4 rounded-xl border border-(--color-border) gap-2 flex flex-col",children:[V.jsx("h1",{className:"text-center text-xl font-semibold",children:"Front-End"}),V.jsx("div",{className:"grid grid-cols-3 place-items-center md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:a.map((i,r)=>V.jsx(md,{skillName:i.name,skillSrc:i.src,skillType:i.type},r))})]}),V.jsxs("div",{className:"bg-(--color-card) p-4 rounded-xl border border-(--color-border) gap-2 flex flex-col",children:[V.jsx("h1",{className:"text-center text-xl font-semibold",children:"Back-End"}),V.jsx("div",{className:"grid grid-cols-3 place-items-center md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:t.map((i,r)=>V.jsx(md,{skillName:i.name,skillSrc:i.src,skillType:i.type},r))})]}),V.jsxs("div",{className:"bg-(--color-card) p-4 rounded-xl border border-(--color-border) gap-2 flex flex-col",children:[V.jsx("h1",{className:"text-center text-xl font-semibold",children:"Other Languages / Tools"}),V.jsx("div",{className:"grid grid-cols-3 place-items-center md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:e.map((i,r)=>V.jsx(md,{skillName:i.name,skillSrc:i.src,skillType:i.type},r))})]})]})}function A0({direction:a,isOpen:t=!0}){const{setSection:e}=Bd(),i=a==="col"?"flex-col":"flex-row",r=a==="col"?"mt-4 gap-2":"items-center gap-1 text-sm sm:text-md",l=a==="col"?"sidebar-content":"sidebar-content-horizontal",c=a==="col"?"sidebar-item cursor-pointer truncate":"sidebar-item-small cursor-pointer",h=a==="col"?"text-xl":"text-sm";return V.jsxs("div",{className:`${l} flex ${i} ${r} transition-opacity duration-200 ${h} ${t?"opacity-100":"opacity-0 pointer-events-none"}`,children:[V.jsx("div",{className:c,onClick:()=>e({sectionName:"about me",sectionTitle:"Christian Lester",sectionDescription:"Frontend Developer / Software Developer",sectionComponent:V.jsx(Hb,{})}),children:"About Me"}),V.jsx("div",{className:c,onClick:()=>e({sectionName:"skills",sectionTitle:"Skills",sectionDescription:"Tech Stack / Technologies",sectionComponent:V.jsx(SD,{})}),children:"Skills"}),V.jsx("div",{className:c,onClick:()=>e({sectionName:"projects",sectionTitle:"Projects",sectionDescription:"Click on a project to view it in GitHub",sectionComponent:V.jsx(FT,{})}),children:"Projects"}),V.jsx("div",{className:c,onClick:()=>e({sectionName:"resume",sectionTitle:"Resume",sectionDescription:"View and download my latest resume",sectionComponent:V.jsx(_D,{})}),children:"Resume"}),V.jsx("div",{className:c,onClick:()=>e({sectionName:"contact",sectionTitle:"Contact",sectionDescription:"Reach out",sectionComponent:V.jsx(zT,{})}),children:"Contact"})]})}function wD(){const[a,t]=ut.useState(!0);return V.jsxs("div",{className:`hidden sm:flex sidebar h-screen flex-col bg-(--color-card) text-(--color-text) 
        transition-[width] duration-300 ease-in-out overflow-hidden 
        ${a?"w-48":"w-12"}`,children:[V.jsx("div",{className:"sidebar-header flex justify-between items-center w-24 ",children:V.jsx("i",{className:"fa-solid fa-bars cursor-pointer py-2",onClick:()=>t(!a),style:{width:"32px",scale:"1.2"}})}),V.jsx(A0,{direction:"col",isOpen:a}),V.jsx("div",{className:"sidebar-footer mt-auto p-2"})]})}function ED(){const{theme:a,swapTheme:t}=Bd();return V.jsxs("div",{className:"flex flex-row bg-(--color-nav) border-b border-(--color-border) py-1 px-2 justify-between text-sm sm:text-lg font-light items-center",children:[V.jsx("div",{className:"hidden sm:flex",children:V.jsx("h1",{className:"text-(--color-accent) font-semibold",children:"<CL />"})}),V.jsx("div",{className:"sm:hidden flex items-center justify-center",children:V.jsx(A0,{direction:"row"})}),V.jsxs("div",{className:"flex flex-row items-center gap-2",children:[V.jsxs("div",{className:"hidden sm:flex flex-row items-center gap-2",children:[V.jsxs("a",{className:"flex flex-row items-center gap-2 hover:bg-(--color-border) cursor-pointer px-2 rounded transition duration-150 ease-in-out",href:"https://www.linkedin.com/in/christian-lester-b71412239/",target:"_blank",children:["LinkedIn",V.jsx("i",{className:"fa-solid fa-arrow-up-right-from-square text-sm "})]}),V.jsxs("a",{className:"flex flex-row items-center gap-2 hover:bg-(--color-border) cursor-pointer px-2 rounded transition duration-150 ease-in-out",href:"https://github.com/Clester31",target:"_blank",children:["GitHub",V.jsx("i",{className:"fa-solid fa-arrow-up-right-from-square text-sm "})]})]}),V.jsx("button",{onClick:()=>t(a==="dark"?"light":"dark"),className:"hover:bg-(--color-border) cursor-pointer px-2 rounded",children:a==="dark"?V.jsx("i",{className:"fa-solid fa-sun"}):V.jsx("i",{className:"fa-solid fa-moon"})})]})]})}G_.createRoot(document.getElementById("root")).render(V.jsx($_,{children:V.jsx(ut.StrictMode,{children:V.jsxs("div",{className:"flex flex-col h-screen overflow-hidden",children:[V.jsx(ED,{}),V.jsxs("div",{className:"flex flex-row h-screen overflow-hidden",children:[V.jsx(wD,{}),V.jsx(X_,{})]})]})})}));
